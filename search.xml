<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è§é—» ç¬¬1æœŸ]]></title>
    <url>%2Fposts%2Fbdcf%2F</url>
    <content type="text"><![CDATA[]]></content>
  </entry>
  <entry>
    <title><![CDATA[æ ‘èŽ“æ´¾éƒ¨ç½²è®°å½•]]></title>
    <url>%2Fposts%2F754e%2F</url>
    <content type="text"><![CDATA[è®°å½•ä¸€ä¸‹æ–°ä¹°çš„æ ‘èŽ“æ´¾ 4 çš„éƒ¨ç½²è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå®‰è£…ã€ç½‘ç»œè¿žæŽ¥ã€åŸºæœ¬é…ç½®ã€Xrdpã€Dockerã€Shadowsocksã€Frpã€Node.jsã€RSSHubã€Nginxã€HTTPS ç­‰å†…å®¹ã€‚æœ¬æ–‡å°½å¯èƒ½æä¾›å¯ä»¥ç›´æŽ¥æ‰§è¡Œçš„ bash å‘½ä»¤ï¼Œæ–¹ä¾¿åŽç»­å‚è€ƒã€‚ 1. ç³»ç»Ÿå®‰è£…ä¸‹è½½åœ°å€ï¼šRaspbian ä¸ºäº†æ–¹ä¾¿ä¹‹åŽä½¿ç”¨ Xrdp è¿œç¨‹è¿žæŽ¥ï¼Œä¸‹è½½çš„ç‰ˆæœ¬æ˜¯å¸¦æ¡Œé¢çš„ï¼š Windows ä¸‹å†™å…¥ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ Win32 Disk Imagerï¼Œæ³¨æ„è®¾å¤‡ä¸è¦é€‰é”™äº†ã€‚ å†™å…¥æˆåŠŸåŽï¼Œåœ¨ç›˜ç¬¦ä¸º boot çš„ TF å¡åˆ†åŒºæ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º ssh çš„ç©ºæ–‡ä»¶ã€‚æ–°ç‰ˆçš„ Raspbian é»˜è®¤ä¸å¼€å¯ sshï¼Œéœ€è¦é€šè¿‡è¿™ç§æ–¹å¼æ‰‹åŠ¨å¼€å¯ã€‚ å°† TF å¡æ’å…¥æ ‘èŽ“æ´¾ï¼Œè¿žä¸Šç½‘çº¿å’Œç”µæºå³å¯ã€‚ 2. ç½‘ç»œè¿žæŽ¥å¦‚æžœæœ‰æ˜¾ç¤ºå™¨ï¼Œç›´æŽ¥æŽ¥å…¥æ˜¾ç¤ºå™¨æ‰§è¡Œ ifconfig å³å¯èŽ·å¾— ip åœ°å€ã€‚æ²¡æœ‰æ˜¾ç¤ºå™¨çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å…ˆä½¿ç”¨ç½‘çº¿è¿žæŽ¥ï¼Œç„¶åŽåœ¨è·¯ç”±å™¨ä¸ŠæŸ¥çœ‹æ ‘èŽ“æ´¾æœ‰çº¿ç½‘å¡çš„ ip åœ°å€ã€‚ ä½¿ç”¨ SSH ç™»å½•æ ‘èŽ“æ´¾ï¼Œç”¨æˆ· piï¼Œå¯†ç ä¸º raspberry 1ssh pi@ip ä½¿ç”¨ raspi-config è¿žæŽ¥ WiFi 1sudo raspi-config è®¾ç½®å®ŒæˆåŽï¼Œæ ‘èŽ“æ´¾ä¼šé‡å¯ã€‚ï¼ˆä¹‹åŽä¾¿ç”¨ä¸ä¸Šç½‘çº¿äº†ï¼‰ 3. åŸºæœ¬é…ç½®åˆ«åç™»å½• 12345# vim ~/.ssh/configHost pi HostName pc.andiedie.cn Port 22 User pi æ— å¯†ç ç™»å½• 1ssh-copy-id pi ä¿®æ”¹å¯†ç  1sudo raspi-config ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼ˆæ¸…åŽå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼‰ 1234567891011121314sudo mv /etc/apt/sources.list /etc/apt/sources.list.baksudo tee /etc/apt/sources.list &lt;&lt;-'EOF'deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contribdeb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contribEOFsudo mv /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.baksudo tee /etc/apt/sources.list.d/raspi.list &lt;&lt;-'EOF'deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main uiEOFsudo apt update# å¯é€‰ï¼Œå‡çº§æ‰€æœ‰ä¾èµ–sudo apt upgrade -y å®‰è£…å¸¸ç”¨è½¯ä»¶ 1sudo apt install -y vim unzip 4. Xrdp è¿œç¨‹æ¡Œé¢1sudo apt install xrdp -y æ‰“å¼€ Windows è¿œç¨‹æ¡Œé¢ï¼Œè¿žæŽ¥ ip:3389ï¼Œç”¨æˆ·å¯†ç ç•™ç©ºã€‚ è¿žæŽ¥æˆåŠŸåŽï¼Œå†è¾“å…¥ pi çš„è´¦å·å’Œå¯†ç å³å¯ã€‚ 5. Docker12345678910111213141516171819202122232425curl -fsSL get.docker.com | sh -s -- --mirror Aliyun# å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç”¨æˆ·ç»„ï¼Œé¿å… sudosudo usermod -aG docker $USER# é•œåƒåŠ é€Ÿ é˜¿é‡Œã€ä¸ƒç‰›äº‘ã€DaoCloudã€Azuresudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123; "registry-mirrors": [ "https://ã€æ³¨æ„æ›¿æ¢ã€‘.mirror.aliyuncs.com", "https://reg-mirror.qiniu.com", "http://ã€æ³¨æ„æ›¿æ¢ã€‘.m.daocloud.io", "https://dockerhub.azk8s.cn" ]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker# å®‰è£… Docker Compose# å®‰è£… Pythonsudo apt install -y python python-pip libffi-dev python-backports.ssl-match-hostname# Pip é•œåƒåŠ é€Ÿpip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simplesudo pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simplesudo pip install docker-compose 6. Shadowsock123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051# å®‰è£…sudo apt install -y shadowsocks# é…ç½®sudo tee /etc/shadowsocks/config.json &lt;&lt;-'EOF'&#123; "server": "ã€æ³¨æ„æ›¿æ¢ã€‘", "server_port": "ã€æ³¨æ„æ›¿æ¢ã€‘", "local_address": "127.0.0.1", "local_port": "1080", "password": "ã€æ³¨æ„æ›¿æ¢ã€‘", "method": "ã€æ³¨æ„æ›¿æ¢ã€‘"&#125;EOF# å¼€æœºå¯åŠ¨sudo tee /etc/systemd/system/sslocal.service &lt;&lt;-'EOF'[Unit] Description = ShadowSocks Client After = network.target [Service] Type = simple User = root ExecStart = sslocal -c /etc/shadowsocks/config.json[Install] WantedBy = multi-user.targetEOFsudo systemctl start sslocalsudo systemctl enable sslocal# å®‰è£… polipo å°† socks åè®®è½¬ä¸º httpsudo apt install -y polipo# é…ç½®sudo tee /etc/polipo/config &lt;&lt;-'EOF'logSyslog = falselogFile = /var/log/polipo/polipo.logsocksParentProxy = "127.0.0.1:1080"socksProxyType = socks5proxyAddress = "127.0.0.1"proxyPort = 1088EOF# å¼€æœºå¯åŠ¨sudo systemctl start poliposudo systemctl enable polipo# ä»£ç† aliastee -a ~/.bashrc &lt;&lt;-'EOF'alias pon='export use_proxy="on" &amp;&amp; export http_proxy="http://127.0.0.1:1088/" &amp;&amp; export https_proxy=$http_proxy &amp;&amp; export ftp_proxy=$http_proxy &amp;&amp; export dns_proxy=$http_proxy &amp;&amp; export rsync_proxy=$http_proxy &amp;&amp; export no_proxy="localhost,127.0.0.1,localaddress,.localdomain.com"'alias poff='unset use_proxy &amp;&amp; unset http_proxy &amp;&amp; unset https_proxy &amp;&amp; unset ftp_proxy &amp;&amp; unset dns_proxy &amp;&amp; unset rsync_proxy &amp;&amp; unset no_proxy'EOFsource ~/.bashrc 7. Frp1234567891011121314151617181920212223242526272829303132333435363738394041# å¼€å¯ä»£ç†pon# ä¸‹è½½wget https://github.com/fatedier/frp/releases/download/v0.29.0/frp_0.29.0_linux_arm.tar.gz# å…³é—­ä»£ç†poff# è§£åŽ‹tar -xzf frp_0.29.0_linux_arm.tar.gz# ç§»åŠ¨åˆ°åˆé€‚çš„ä½ç½®sudo mkdir -p /usr/sbin/frpsudo mv frp_0.29.0_linux_arm/frps /usr/sbin/frpsudo mkdir -p /etc/frp# æ¸…ç†rm -f frp_0.29.0_linux_arm.tar.gzrm -rf frp_0.29.0_linux_arm# é…ç½®sudo tee /etc/frp/frps.ini &lt;&lt;-'EOF'[common]bind_port = 7000dashboard_port = 7500dashboard_user = ã€æ³¨æ„æ›¿æ¢ã€‘dashboard_pwd = ã€æ³¨æ„æ›¿æ¢ã€‘token = ã€æ³¨æ„æ›¿æ¢ã€‘EOF# å¼€æœºè‡ªå¯sudo tee /etc/systemd/system/frps.service &lt;&lt;-'EOF'[Unit]Description=FRP Server DaemonAfter=network.targetWants=network.target[Service]Type=simpleExecStart=/usr/sbin/frp/frps -c /etc/frp/frps.iniRestart=always[Install]WantedBy=multi-user.targetEOFsudo systemctl start frpssudo systemctl enable frps 8. Node.js12345678sudo apt install -y nodejs npmsudo npm i -g npm --registry=https://registry.npm.taobao.orgsudo npm i -g nrm --registry=https://registry.npm.taobao.orgnrm use cnpmsudo npm i -g yarn nponsudo n ltspoff 9. RSSHub1234567891011121314151617181920212223cd /home/pi/Desktoppongit clone https://github.com/DIYgod/RSSHub.gitpoffcd RSSHub/yarn# å¼€æœºå¯åŠ¨sudo tee /etc/systemd/system/rsshub.service &lt;&lt;-'EOF'[Unit] Description = RSSHubAfter = network.target [Service] Type = simple ExecStart = /bin/bash -c 'PROXY_PROTOCOL=socks PROXY_HOST=127.0.0.1 PROXY_PORT=1080 PROXY_URL_REGEX="instagram|twitter" TWITTER_CONSUMER_KEY=ã€æ³¨æ„æ›¿æ¢ã€‘ TWITTER_CONSUMER_SECRET=ã€æ³¨æ„æ›¿æ¢ã€‘ GITHUB_ACCESS_TOKEN=ã€æ³¨æ„æ›¿æ¢ã€‘ yarn --cwd /home/pi/Desktop/RSSHub start'[Install] WantedBy = multi-user.targetEOFsudo systemctl start rsshubsudo systemctl enable rsshub 10. Nginx123456789101112131415161718192021222324252627282930313233343536# å®‰è£… Certbotsudo apt install -y certbot# å®‰è£… nginxsudo apt install -y nginx# æ‰“å¼€ https://nginxconfig.io/?0.domain=rss.andiedie.cn&amp;0.document_root=&amp;0.redirect=false&amp;0.email=zchangan@163.com&amp;0.php=false&amp;0.proxy&amp;0.proxy_pass=http:%2F%2F127.0.0.1:1200&amp;0.root=false# ä¸‹è½½ zip æ–‡ä»¶ï¼Œæ”¾åˆ° /etc/nginx ç›®å½•ä¸‹cd /etc/nginx# è§£åŽ‹sudo unzip -o nginxconfig.io-rss.andiedie.cn.zip# ç”Ÿæˆ Diffie-Hellman å‚æ•°sudo openssl dhparam -out /etc/nginx/dhparam.pem 2048# èŽ·å¾—æ³›åŸŸåè¯ä¹¦ï¼ˆrenew ä¹Ÿæ˜¯è¿™æ ·ï¼‰sudo certbot certonly --preferred-challenges dns --manual -d *.andiedie.cn --email zchangan@163.com --agree-tos --force-renewal --server https://acme-v02.api.letsencrypt.org/directory# æ ¹æ®è¦æ±‚ç»™ DNS æ·»åŠ  TXT è®°å½•# è¿˜éœ€è¦æ·»åŠ  CAA è®°å½•ï¼ŒæŽ¨è cloudflare# CAA andiedie.cn 0 issue ";"# æ·»åŠ  SSL è¯ä¹¦é€šç”¨é…ç½®sudo tee /etc/nginx/ssl.conf &lt;&lt;-'EOF'ssl_certificate /etc/letsencrypt/live/andiedie.cn/fullchain.pem;ssl_certificate_key /etc/letsencrypt/live/andiedie.cn/privkey.pem;ssl_trusted_certificate /etc/letsencrypt/live/andiedie.cn/chain.pem;EOF# å°† SSL ä¸‰è¿ž æ”¹ä¸º# include ssl.conf;sudo vim /etc/nginx/sites-available/frp.andiedie.cn.confsudo vim /etc/nginx/sites-available/frp.andiedie.cn.conf# å¯åŠ¨sudo nginx -t &amp;&amp; sudo systemctl reload nginxsudo systemctl enable nginx]]></content>
  </entry>
  <entry>
    <title><![CDATA[ä¸é è°±ç§Ÿæˆ¿æŒ‡å—]]></title>
    <url>%2Fposts%2Fd968%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘æˆ‘å’Œå¥³å‹éƒ½å‡†å¤‡æ¯•ä¸šå·¥ä½œï¼ŒäºŽæ˜¯åˆ†åˆ«åœ¨å¹¿å·žå’Œæ·±åœ³éƒ½ç§Ÿäº†æˆ¿å­ã€‚è¿™ç¯‡åšå®¢è®°å½•æˆ‘åœ¨ç§Ÿæˆ¿å‰åŽç§¯ç´¯çš„ä¸€äº›ç§Ÿæˆ¿ã€çœ‹æˆ¿ã€ç­¾åˆåŒç›¸å…³çš„ç»éªŒï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚ 1. èŽ·å–æˆ¿æºä¿¡æ¯ç§Ÿæˆ¿çš„ç¬¬ä¸€æ­¥å°±æ˜¯èŽ·å–æˆ¿æºï¼ŒçŽ°åœ¨é€”å¾„æœ‰å¾ˆå¤šï¼š é“¾å®¶ã€è‡ªå¦‚ã€è´å£³ã€å®‰å±…å®¢ç­‰åœ¨çº¿å¹³å° é­”æ–¹å…¬å¯“ã€æ³Šå¯“ç­‰ç²¾è£…ä¿®æˆ¿æº çº¿ä¸‹ä¸­ä»‹ 58ã€èµ¶é›†ä¹‹ç±»çš„ä¿¡æ¯å‘å¸ƒç½‘ç«™ è±†ç“£å°ç»„ã€çŸ¥ä¹Žç­‰å°ä¼—å¹³å° æ‰«è¡— æŽ¥ä¸‹æ¥ä»ŽèŽ·å–éš¾åº¦ã€å¯é ç¨‹åº¦ã€ä»·æ ¼ç­‰æ–¹é¢ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸€ç§æˆ¿æºã€‚æ»¡åˆ†äº”é¢—æ˜Ÿï¼Œæ˜Ÿæ˜Ÿè¶Šå¤šï¼ŒèŽ·å–éš¾åº¦è¶Šå¤§ï¼Œå¯é ç¨‹åº¦è¶Šé«˜ï¼Œä»·æ ¼è¶Šä½Žã€‚ 1.1. ç§Ÿæˆ¿ä¿¡æ¯æ¥æºæ¯”è¾ƒ1.1.1. çº¿ä¸Šç§Ÿæˆ¿å¹³å°éš¾åº¦ï¼šâ˜…â˜†â˜†â˜†â˜† å¯é ï¼šâ˜…â˜…â˜…â˜†â˜† ä»·æ ¼ï¼šâ˜…â˜…â˜…â˜†â˜† ä¸€èˆ¬äººæœ€å®¹æ˜“æŽ¥è§¦åˆ°çš„å°±æ˜¯å„ç±»çº¿ä¸Šçš„ç§Ÿæˆ¿å¹³å°ï¼Œä¾‹å¦‚é“¾å®¶ã€è´å£³ã€å®‰å±…å®¢ã€è‡ªå¦‚ç­‰ã€‚ä»Žè¿™ç±»å¹³å°ä¸ŠèŽ·å–ä¿¡æ¯éžå¸¸å®¹æ˜“ï¼Œä½†æ˜¯ä¸€äº›ä¸é è°±çš„å¹³å°ä¸Šå„ç±»ç§Ÿæˆ¿ä¿¡æ¯ä¹Ÿæ˜¯é±¼é¾™æ··æ‚ã€‚æ¯”å¦‚å®‰å±…å®¢ä¸Šï¼Œä¼šå‡ºçŽ°éžå¸¸å¤šä½Žä»·æˆ¿æºï¼Œä»·æ ¼ä½Žåˆ°éš¾ä»¥ç½®ä¿¡ï¼Œä½†æ˜¯æˆ¿é—´å›¾ç‰‡å´éžå¸¸ç²¾ç¾Žã€‚ä¸€èˆ¬è¿™ç§æˆ¿æºæ˜¯ä¸ºäº†å¸å¼•ç§Ÿå®¢çœ‹æˆ¿ï¼Œå¦‚æžœå¯¹æ–¹æ¯”è¾ƒå–„è‰¯ï¼Œé‚£é¡¶å¤šå°±æ˜¯ä»¥â€œæˆ¿é—´åˆšåˆšç§Ÿäº†â€ä¹‹ç±»çš„ç†ç”±å¸¦ç§Ÿå®¢åŽ»çœ‹ä¸€äº›è´µçš„æˆ¿æºï¼Œå¯¹æ–¹ç‹¡è¯ˆä¸€ç‚¹çš„è¯è¿˜ä¼šé€šè¿‡æ”¶å–çœ‹æˆ¿è´¹éª—ç§Ÿå®¢çš„é’±ã€‚ æˆ‘è‡ªç”¨äº†å¾ˆå¤šå¹³å°ï¼Œæœ€åŽè¿˜æ˜¯æ¯”è¾ƒæŽ¨èè´å£³ï¼ˆè´å£³çš„è´¢åŠ¡çœ‹åˆ°äº†è¯·ç»™æˆ‘æ‰“é’±è°¢è°¢ï¼‰ã€‚ä¸»è¦æ˜¯å› ä¸ºè´å£³çˆ¬äº†å¾ˆå¤šåˆ«çš„å¹³å°çš„ä¿¡æ¯ï¼ˆå®‰å±…å®¢å‰æ®µæ—¶é—´å°±å› ä¸ºè¿™ä¸ªå‘Šäº†è´å£³ï¼‰ï¼Œå¯ä»¥ä¸€æ¬¡æžå®šå¤šä¸ªå¹³å°çš„æœç´¢ï¼›è´å£³ä¸Šçš„ä½Žä»·ä¸é è°±æˆ¿æºåœ¨æˆ‘ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¹Ÿå‡ºçŽ°å¾—æ¯”è¾ƒå°‘ï¼›æœ€æŽ¨èçš„ç†ç”±æ˜¯è´å£³å¯ä»¥ç­›é€‰å…¬å¸é™„è¿‘å‡ å…¬é‡Œå†…çš„æˆ¿æºï¼ˆæ— æ³•æƒ³è±¡ä¸ºä»€ä¹ˆè¿™ä¹ˆåŸºç¡€çš„åŠŸèƒ½åˆ«å®¶å±…ç„¶æ²¡æœ‰ï¼‰ã€‚ 1.1.2. ç²¾è£…ä¿®å…¬å¯“éš¾åº¦ï¼šâ˜…â˜†â˜†â˜†â˜† å¯é ï¼šâ˜…â˜…â˜…â˜…â˜… ä»·æ ¼ï¼šâ˜…â˜†â˜†â˜†â˜† è¿™ç±»è¯¸å¦‚é­”æ–¹ã€æ³Šå¯“ä¹‹ç±»çš„ç²¾è£…ä¿®å…¬å¯“ï¼Œä¹Ÿå¯ä»¥åœ¨è´å£³ã€å®‰å±…å®¢ä¹‹ç±»çš„å¹³å°ä¸Šçœ‹åˆ°ï¼Œä¼˜ç‚¹æ˜¯éžå¸¸å¯é ï¼Œå®¶ç”µé½å…¨ã€å®‰ä¿å®Œå–„ã€å‘¨è¾¹è´­ç‰©æˆ–äº¤é€šæ¯”è¾ƒä¾¿åˆ©ï¼Œä¸”ä¸€èˆ¬éƒ½æœ‰æ¡Œæ¸¸å®¤ã€å°çƒæ¡Œã€å¥èº«æˆ¿ä¹‹ç±»çš„å…¬å…±ç©ºé—´ã€‚ç¼ºç‚¹åŒæ ·éžå¸¸æ˜Žæ˜¾ï¼Œå°±æ˜¯è´µï¼Œä¸ä»…æˆ¿ç§Ÿè´µã€ç®¡ç†è´¹è´µï¼Œä¸€èˆ¬ç”¨çš„æ˜¯å•†ç”¨æ°´ç”µï¼Œæ‰€ä»¥æ¯æœˆæ°´ç”µè´¹ä¹Ÿè´µã€‚ 1.1.3. çº¿ä¸‹ä¸­ä»‹éš¾åº¦ï¼šâ˜…â˜…â˜†â˜†â˜† å¯é ï¼šâ˜…â˜…â˜…â˜†â˜† ä»·æ ¼ï¼šâ˜…â˜…â˜…â˜†â˜† æœ€ä¼ ç»Ÿçš„å°±æ˜¯æ‰¾ä¸€äº›çº¿ä¸‹å–äºŒæ‰‹æˆ¿å’Œç§Ÿæˆ¿çš„ä¸­ä»‹ï¼Œå°±æ˜¯é‚£ç§åº—é¢çŽ»ç’ƒä¸Šè´´æ»¡äº†æˆ¿æºä¿¡æ¯çš„åº—ã€‚å…¶å®žç»å¤§å¤šæ•°ä¸ªäººæˆ¿æºï¼Œç‰¹åˆ«æ˜¯æˆ¿é—´å¤šçš„å¥—æˆ¿ï¼Œæˆ¿ä¸œéƒ½æ²¡é—²åŠŸå¤«è‡ªå·±æ‰¾äººå‡ºç§Ÿï¼Œè¿™ç±»ä¸­ä»‹å°±è´Ÿè´£ä»Žæˆ¿ä¸œæ‰‹é‡ŒæŽ¥ç®¡æˆ¿å­çš„å‡ºç§Ÿæƒï¼Œç„¶åŽç§Ÿç»™ç§Ÿå®¢ã€‚ èŽ·å–éš¾åº¦ç•¥é«˜ï¼Œå› ä¸ºéœ€è¦çº¿ä¸‹è·‘åº—é¢ï¼Œä½†æ˜¯ç»¼åˆæ¥è¯´ä¹Ÿç›¸å½“çœæ—¶çœåŠ›ï¼Œæ¯•ç«Ÿä½ åªéœ€è¦å‘Šè¯‰ä¸­ä»‹ä½ çš„ç›®æ ‡æˆ¿åž‹ã€ä»·æ ¼ã€ä½ç½®ç­‰ä¿¡æ¯ï¼Œä»–ä¼šå¸®ä½ ç­›é€‰ã€‚ç¼ºç‚¹ä¹Ÿæœ‰ï¼Œä¸€ä¸ªæ˜¯éœ€è¦ä¸­ä»‹è´¹ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªæœˆæˆ–åŠæœˆçš„æˆ¿ç§Ÿä½œä¸ºä¸­ä»‹è´¹ï¼›å¦å¤–å°±æ˜¯ä¸­ä»‹æ‰‹ä¸Šçš„æˆ¿å­å¯èƒ½è¿˜æ˜¯å¥—æˆ¿å±…å¤šï¼Œä¸ªäººç§Ÿå•é—´çš„è¯ä¸å¤ªåˆé€‚ã€‚ 1.1.4. ä¿¡æ¯å‘å¸ƒç½‘ç«™éš¾åº¦ï¼šâ˜…â˜…â˜†â˜†â˜† å¯é ï¼šâ˜…â˜†â˜†â˜†â˜† ä»·æ ¼ï¼šâ˜…â˜…â˜…â˜†â˜† ç±»ä¼¼ 58 åŒåŸŽã€èµ¶é›†ç½‘ä¹‹ç±»çš„ä¿¡æ¯å‘å¸ƒç½‘ç«™ä¸Šä¸€èˆ¬ä¹Ÿä¼šæœ‰ç§Ÿæˆ¿ä¿¡æ¯ï¼Œä¸è¿‡åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯æˆ¿ä¸œç›´ç§Ÿï¼Œè¿™ç±»æˆ¿å­å…ä¸­ä»‹è´¹ã€ç§Ÿé‡‘ä¸é«˜ï¼Œå°±æ˜¯æ¯”è¾ƒå°‘é‡åˆ°ï¼›å¦ä¸€ç±»å°±æ˜¯ä¸­ä»‹å‘å¸ƒçš„ä¿¡æ¯ï¼Œçº¿ä¸‹ä¸­ä»‹çš„ä¸»è¦å®£ä¼ æ–¹å¼å°±æ˜¯è¿™ç±»ä¿¡æ¯å‘å¸ƒç½‘ç«™ã€‚ä¸è¿‡ä¹Ÿä¸è¦å› ä¸ºå¯¹æ–¹æ˜¯ä¸­ä»‹å°±æœ‰ä»€ä¹ˆé¿è®³ï¼Œå‹¤åœ¨ 58 ä¸Šå‘ä¿¡æ¯ã€ç”šè‡³ä¹°ç²¾é€‰çš„ä¸­ä»‹ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨å¿ƒåšçš„ï¼Œç›¸å¯¹è¿˜æ˜¯æ¯”è¾ƒé è°±çš„ã€‚ 1.1.5. å°ä¼—å¹³å°éš¾åº¦ï¼šâ˜…â˜…â˜…â˜…â˜† å¯é ï¼šâ˜…â˜…â˜…â˜…â˜† ä»·æ ¼ï¼šâ˜…â˜…â˜…â˜†â˜† è±†ç“£å°ç»„ã€çŸ¥ä¹Žç”šè‡³æŸäº›ç¥žç§˜çš„ QQã€å¾®ä¿¡ç¾¤é‡Œé¢ä¹Ÿå¯ä»¥æ·˜åˆ°ä¸å°‘ä¼˜è´¨çš„ç§Ÿæˆ¿ä¿¡æ¯ã€‚è¿™äº›ç§Ÿæˆ¿ä¿¡æ¯çœŸå®žåº¦é«˜ï¼Œä»·æ ¼ä¹Ÿåˆç†ï¼Œä¸»è¦çš„ç¼ºç‚¹å°±æ˜¯è¿™ç±»å°ä¼—å¹³å°ç¼ºä¹é’ˆå¯¹ç§Ÿæˆ¿çš„ç­›é€‰åŠŸèƒ½ï¼Œå› æ­¤èŽ·å–å¯¹å£çš„ç§Ÿæˆ¿ä¿¡æ¯å…¶å®žéžå¸¸è€—è´¹æ—¶é—´ç²¾åŠ›ã€‚ 1.1.6. æ‰«è¡—éš¾åº¦ï¼šâ˜…â˜…â˜…â˜…â˜… å¯é ï¼šâ˜…â˜…â˜…â˜…â˜† ä»·æ ¼ï¼šâ˜…â˜…â˜…â˜…â˜† æœ€ç¡¬æ ¸çš„ç§Ÿæˆ¿æ–¹å¼å°±æ˜¯æ‰«è¡—ï¼Œåˆ°ç§Ÿæˆ¿åœ°é™„è¿‘çš„å°åŒºå¤§é—¨ã€ç”µçº¿æ†ä¹‹ç±»çš„åœ°æ–¹çœ‹æˆ¿ä¸œè´´å‡ºæ¥çš„ç§Ÿæˆ¿å¹¿å‘Šï¼Œæˆ–è€…é—®é—¨å«å¤§å”ã€å±…å§”ä¼šå¤§å¦ˆä¹‹ç±»çš„è§’è‰²ï¼Œä»–ä»¬ä¸€èˆ¬éƒ½çŸ¥é“å“ªå®¶è¦ç§Ÿæˆ¿ã€‚ç›´æŽ¥è”ç³»åˆ°æˆ¿ä¸œï¼Œä»·æ ¼ä¾¿å®œã€ä¿¡æ¯çœŸå®žï¼Œå°±æ˜¯è¦æ‰¾åˆ°è¿™æ ·çš„æˆ¿å­æ˜¯è¦é æ­¥æ•°å’Œè¿æ°”çš„ã€‚ 1.2. ç»¼åˆæŽ¨èæœ€åŽè¿˜æ˜¯æŽ¨èç›´æŽ¥åœ¨é“¾å®¶ã€è´å£³ä¹‹ç±»çš„åœ°æ–¹ç›´æŽ¥çœ‹æˆ¿æºï¼Œè¯´å®žè¯çœæ—¶çœå¿ƒä¸”ç›¸å¯¹é è°±ã€‚ä¸è¿‡åœ¨å¹³å°ä¸ŠæŒ‘æˆ¿å­ä¹Ÿæ˜¯æœ‰è¦æ³¨æ„çš„åœ°æ–¹ï¼Œæ²¡å¿…è¦æ‹˜æ³¥äºŽåŒä¸€ä¸ªå°åŒºå†…çš„ä¸åŒè£…ä¿®çš„æˆ¿å­ï¼Œæˆ–è€…æ˜¯åŒä¸€ä¸ªä¸­ä»‹æ‰‹ä¸ŠåŒºåˆ«ä¸å¤§çš„æˆ¿å­ï¼Œè¦å¤šçœ‹ä¸åŒçš„å°åŒºã€å¤šçœ‹ä¸åŒä¸­ä»‹æ‰‹ä¸Šçš„æˆ¿å­ï¼Œå› ä¸ºäº‹åŽçœ‹æˆ¿çš„äº‹åŽï¼Œä¸­ä»‹ä¼šé¢†ä½ çœ‹åŒä¸€ä¸ªå°åŒºå’Œé™„è¿‘çš„æ‰€æœ‰æˆ¿å­ã€‚çº¿ä¸Šåªéœ€è¦å…³æ³¨ä½ç½®ã€äº¤é€šç­‰å…³é”®éƒ¨åˆ†ï¼Œç»†èŠ‚äº¤ç»™çº¿ä¸‹çœ‹æˆ¿ã€‚ 2. çœ‹æˆ¿2.1. çº¦çœ‹æˆ¿çº¦æˆ¿ä¸œæˆ–è€…ä¸­ä»‹çœ‹æˆ¿ï¼Œå¦‚æžœæ˜¯å¥³ç”Ÿçš„è¯ä¸€å®šè¦æ‰¾äººåŒè¡Œï¼Œç‹¬è‡ªçœ‹æˆ¿éžå¸¸å±é™©ã€‚ä¸€å¤©å¯ä»¥çº¦ä¸‰ä¸ªå·¦å³çš„ä¸­ä»‹ï¼Œæ—©ä¸­æ™šå„ä¸€ä¸ªã€‚çœ‹æˆ¿é€Ÿåº¦å…¶å®žå¾ˆå¿«ï¼Œä¸€ä¸ªåŒºåŸŸå†…çš„æˆ¿é—´ä¸€ä¸ªå°æ—¶å†…å°±èƒ½å…¨éƒ¨çœ‹å®Œã€‚ç”¨æ›´å°‘çš„æ—¶é—´ï¼Œçœ‹æ›´å¤šçš„å°åŒºã€‚ 2.2. çœ‹æˆ¿åˆ—è¡¨è·Ÿä¸­ä»‹è¿›äº†æˆ¿é—´ï¼Œå°±è¦å¼€å§‹æ³¨æ„ä»¥ä¸‹å†…å®¹ï¼š å®‰å…¨ï¼šå¦‚æžœæ˜¯å¥³ç”Ÿç‹¬è‡ªçœ‹æˆ¿ï¼Œæ³¨æ„ä¸€å®šä¸è¦å…³é—¨ï¼Œæ–¹ä¾¿éšæ—¶é€ƒè·‘ï¼› éš”éŸ³ï¼šç”¨æ‰‹æ•²ä¸€æ•²å¢™å£æ˜¯ä¸æ˜¯éš”éŸ³å¥½çš„æ‰¿é‡å¢™ã€é—¨çª—ç¼éš™ä¼šä¸ä¼šè¿‡å¤§ã€‚æœ‰æ¡ä»¶çš„è¯è¿˜å¯ä»¥æ‰“å¼€æ°´é¾™å¤´ã€èŠ±æ´’ã€å†²åŽ•æ‰€ã€æŠ½æ²¹çƒŸæœºç­‰æ–¹æ³•å¬ä¸€å¬å£°éŸ³æ˜¯å¦è¿‡å¤§ï¼› æ™¾æ™’ï¼šæˆ¿é—´æ˜¯å¦æœ‰è¶³å¤Ÿçš„æ™¾æ™’ç©ºé—´æ¯”å¦‚é˜³å°ï¼Œæ˜¯å¦æœ‰æ¥¼é¡¶ç­‰å…¬å…±æ™¾æ™’ç©ºé—´ï¼› ç½‘ç»œï¼šæ‰“å¼€æ‰‹æœºï¼Œçœ‹ç½‘ç»œä¿¡å·ï¼Œæœ‰æ¡ä»¶çš„è¯ä¸‰ä¸ªè¿è¥å•†çš„éƒ½çœ‹ä¸€ä¸‹ï¼›è¯¢é—®æ˜¯å¦æœ‰è‡ªå¸¦å®½å¸¦ã€èµ„è´¹å¦‚ä½•ã€æ˜¯å¦å¯ä»¥è‡ªæ‹‰ç½‘çº¿ç­‰ï¼› æŸåï¼šé—¨çª—æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å¼€é¦†ã€æˆ¿é—´å†…çš„å¢™é¢æ’åº§æ˜¯å¦æœ‰æ•ˆã€åŽ•æ‰€å†²æ°´æ˜¯å¦æœ‰æ•ˆç­‰ï¼› ç”µå™¨ï¼šç©ºè°ƒã€å†°ç®±ã€æ´—è¡£æœºã€çƒ­æ°´å™¨ç­‰ç”µå™¨çš„æ–°æ—§æƒ…å†µï¼Œå¦å¤–ä¸€å®šè¦æ³¨æ„æœ‰äº›ç”µå™¨æ˜¯å¦æ˜¯éœ€è¦â€œæ‰«ç ä»˜è´¹ä½¿ç”¨â€ï¼› æ¼æ°´ï¼šæ´—æ‰‹æ± ã€æµ´å®¤ã€æµ‹è¯•ã€é˜³å°æ˜¯å¦èƒ½æ­£å¸¸æ¼æ°´ï¼Œæˆ¿é—´å†…çš„ç®¡é“ã€é˜³å°å¤–çš„ç®¡é“æ˜¯å¦ä¼šæ¸—æ°´ï¼› æ°´ç”µï¼šå•†ç”¨æ°´ç”µè¿˜æ˜¯æ°‘ç”¨æ°´ç”µï¼› å‘¨è¾¹ï¼šæ˜¯å¦æœ‰ 24 å°æ—¶ä¾¿åˆ©åº—ã€èœå¸‚åœºã€è¶…å¸‚ï¼› ç®¡ç†ï¼šç®¡ç†è´¹å¤šå°‘é’±ï¼Œæ˜¯å¦åŒ…ç»´ä¿®ï¼› å® ç‰©ï¼šæ˜¯å¦å¯ä»¥å…»å® ç‰© 3. ç­¾åˆåŒ3.1 ç­¾åˆåŒä¹‹å‰ç­¾åˆåŒä¹‹å‰æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š å¦‚ä½•æ”¯ä»˜æˆ¿ç§Ÿã€å¦‚æžœå»¶è¿Ÿäº¤æˆ¿ç§Ÿå¦‚ä½•å¤„ç† æ°´ç”µã€ç½‘ç»œã€å¤©ç„¶æ°”è´¹ç”¨å¦‚ä½•ç¼´çº³ ææ—©æ¬ç¦»å¦‚ä½•å¤„ç† æˆ¿å±‹æ”¹é€ çš„é™åˆ¶å’Œæ‰‹ç»­ï¼Œæ¯”å¦‚æ›´æ¢ç¯å…·ã€åˆ·å¢™ã€ç²˜è´´ã€æ‰“å­”ç­‰ å¦‚ä½•ç»­çº¦ æŠ¼é‡‘å¤šå°‘ï¼Œæ‰£æŠ¼é‡‘çš„æ¡ä»¶ åˆ‡å‹¿éšæ„ç¼´çº³å®šé‡‘ 3.2. åˆåŒæœ¬èº«ä»”ç»†é˜…è¯»åˆåŒæ¡æ¬¾ï¼Œç‰¹åˆ«æ³¨æ„ï¼š ç§Ÿæˆ¿äººå’Œæ‰¿ç§Ÿäººä¿¡æ¯æ˜¯å¦æ­£ç¡® ç§ŸæœŸã€æˆ¿é—´å·ã€æˆ¿ç§Ÿã€æŠ¼é‡‘æ˜¯å¦æ­£ç¡® æ¡æ¬¾æ˜¯å¦ä¸Žå£å¤´ä¸ä¸€è‡´ å¦å¤–æœ‰ä¸€äº›å…³äºŽç§Ÿæˆ¿åˆåŒçš„å¸¸è¯†ï¼š ã€Š åˆåŒæ³• ã€‹ ç¬¬ 215 æ¡è§„å®šï¼šç§ŸèµæœŸé™å…­ä¸ªæœˆä»¥ä¸Šçš„ï¼Œåº”å½“é‡‡ç”¨ä¹¦é¢å½¢å¼ã€‚å½“äº‹äººæœªé‡‡ç”¨ä¹¦é¢å½¢å¼çš„ï¼Œè§†ä¸ºä¸å®šæœŸç§Ÿèµã€‚ï¼ˆä¸å®šæœŸç§Ÿèµæ—¶ï¼ŒåŒæ–¹éƒ½å¯ä»¥éšæ—¶å•æ–¹é¢æŽ¥è§¦ç§Ÿèµå…³ç³»ï¼Œå¦‚æžœæ˜¯å‡ºç§Ÿäººè§£é™¤ï¼Œåˆ™éœ€è¦ç»™ä¸Žæ‰¿ç§Ÿäººåˆç†çš„æ¬è¿æœŸé™ï¼‰ ã€Š æˆ¿åœ°äº§ç®¡ç†æ³• ã€‹ ç¬¬ 54 æ¡è§„å®šï¼šæˆ¿å±‹ç§Ÿèµï¼Œå‡ºç§Ÿäººå’Œæ‰¿ç§Ÿäººåº”å½“ç­¾è®¢ä¹¦é¢ç§ŸèµåˆåŒï¼Œå¹¶å‘æˆ¿äº§ç®¡ç†éƒ¨åˆ†ç™»è®°å¤‡æ¡ˆã€‚ä½†æ˜¯ç™»è®°å¤‡æ¡ˆä¸æ˜¯ç§ŸèµåˆåŒç”Ÿæ•ˆçš„å¿…è¦æ¡ä»¶ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä¸ç™»è®°ã€‚ ã€Š å•†å“æˆ¿å±‹ç§Ÿèµç®¡ç†åŠžæ³• ã€‹ ç¬¬å…«æ¡ï¼šå‡ºç§Ÿä½æˆ¿çš„ï¼Œåº”å½“ä»¥åŽŸè®¾è®¡çš„æˆ¿é—´ä¸ºæœ€å°å‡ºç§Ÿå•ä½ï¼Œäººå‡ç§Ÿä½å»ºç­‘é¢ç§¯ä¸å¾—ä½ŽäºŽå½“åœ°äººæ°‘æ”¿åºœè§„å®šçš„æœ€ä½Žæ ‡å‡†ã€‚åŽ¨æˆ¿ã€å«ç”Ÿé—´ã€é˜³å°å’Œåœ°ä¸‹å‚¨è—å®¤ä¸å¾—å‡ºç§Ÿä¾›äººå‘˜å±…ä½ã€‚å› æ­¤æ³¨æ„ï¼Œå°†æˆ¿é—´åˆ†å‰²åŽè¿›è¡Œå‡ºç§Ÿçš„è¡Œä¸ºï¼Œæ˜¯è¿æ³•çš„ã€‚ 3.3. ç­¾å®ŒåˆåŒç­¾å®ŒåˆåŒæ—¶éœ€è¦æ³¨æ„ï¼š ä¿ç•™åˆåŒã€æˆ¿ä¸œèº«ä»½è¯æ˜Žï¼ˆèº«ä»½è¯å¤å°ä»¶ï¼‰ã€æˆ¿å±‹æ‰€æœ‰æƒè¯ä¹¦ï¼ˆæˆ¿äº§è¯å¤å°ä»¶ï¼‰ã€ç§Ÿæˆ¿æŽˆæƒå§”æ‰˜ä¹¦ï¼ˆå¦‚æžœå¯¹æ–¹æ˜¯ä¸­ä»‹åˆ™éœ€è¦ï¼‰ æ‹ç…§è®°å½•æˆ¿é—´å†…çš„æ‰€æœ‰ç»†èŠ‚ï¼ŒåŒ…æ‹¬çŽ°æœ‰çš„ç ´æŸæƒ…å†µã€å®¶å…·å’Œå®¶ç”µçš„æ–°æ—§æƒ…å†µç­‰ è®°å½•å½“å‰æ°´ç”µè¡¨è¯»æ•°ï¼ˆæ–¹ä¾¿æ—¥åŽæ ¸å¯¹ï¼‰ ä¿ç•™æŠ¼é‡‘ã€ç§Ÿé‡‘ã€ä¸­ä»‹è´¹çš„æ”¶æ® ä¿ç•™å®¶å…·æ¸…å• ä¿ç•™æˆ¿ä¸œçš„é€šè®¯åœ°å€ ä»¥ä¸Šå°±æ˜¯æˆ‘ä¸ªäººçš„ä¸€äº›ç§Ÿæˆ¿ç»éªŒï¼Œå¸Œæœ›æœ‰æ‰€å¸®åŠ©ã€‚ç¥å¤§å®¶éƒ½èƒ½ç§Ÿåˆ°æ»¡æ„çš„æˆ¿å­ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[TVPause : æŽ¥æ‰“ç”µè¯æ—¶è‡ªåŠ¨æš‚åœç”µè§†]]></title>
    <url>%2Fposts%2Fcb98%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å®¶é‡Œæœ‰ä¸ªå°çš„éœ€æ±‚ï¼Œå°±æ˜¯å¸Œæœ›åœ¨æŽ¥æ‰“ç”µè¯çš„æ—¶å€™èƒ½å¤Ÿè‡ªåŠ¨æš‚åœç”µè§†èŠ‚ç›®ã€‚äºŽæ˜¯æˆ‘å°±å†™äº†ä¸€ä¸ªç®€å•çš„å·¥å…·ï¼Œè¿™ç¯‡åšå®¢ä¸»è¦è®°å½•å®žçŽ°çš„è¿‡ç¨‹ã€é‡åˆ°çš„é—®é¢˜ä»¥åŠä¸€äº›å°çš„å¿ƒå¾—ã€‚å¼€æºåœ°å€ï¼šTVPause 1. éœ€æ±‚ä¹Ÿè®¸æœ‰äººä¼šå¥‡æ€ªä¸ºä»€ä¹ˆä¼šæœ‰â€œæŽ¥æ‰“ç”µè¯çš„æ—¶å€™è‡ªåŠ¨æš‚åœç”µè§†èŠ‚ç›®â€è¿™ç§ä¼ªéœ€æ±‚ï¼Œç›´æŽ¥æŒ‰ä¸ªé¥æŽ§å™¨ä¸Šé™éŸ³æˆ–è€…æš‚åœæŒ‰é’®ä¸å°±è¡Œäº†å—ï¼Ÿäº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚ é¦–å…ˆï¼Œå®¶é‡Œæœ‰ä¸€ä¸ªä¹ æƒ¯æ˜¯ï¼Œåƒé¥­çš„æ—¶å€™çœ‹ç”µè§†ï¼Œå¦‚æžœåƒé¥­çš„æ—¶å€™æ¥ç”µè¯ï¼Œå¾—å…ˆæ”¾ä¸‹ç¢—ç­·ï¼Œé™éŸ³/æš‚åœç”µè§†ï¼Œç„¶åŽæŽ¥å¬ç”µè¯ï¼Œæ­¥éª¤å¾ˆå¤š å…¶æ¬¡ï¼Œçˆ¸çˆ¸åšå°æœ¬ç”Ÿæ„ï¼Œæ™šä¸Šç»å¸¸ä¼šæœ‰è®¢è´§çš„ç”µè¯ï¼Œå› æ­¤è¿™ä¸ªéœ€æ±‚å‡ºçŽ°çš„é¢‘æ¬¡å¾ˆé«˜ æœ€åŽï¼Œå®¶é‡Œç”¨çš„æ˜¯å°ç±³ç”µè§†ï¼Œå°ç±³ç”µè§†é¥æŽ§å™¨ï¼Œæ²¡æœ‰é™éŸ³æŒ‰é’®ï¼ðŸ¤¨ å› æ­¤æˆ‘å†³å®šç€æ‰‹è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç†æƒ³çš„çŠ¶æ€æ—¶ï¼Œä¸€æ—¦æ¥ç”µï¼Œå¦‚æžœæ­£åœ¨æ’­æ”¾ç‚¹æ’­èŠ‚ç›®ï¼Œå°±ç›´æŽ¥æš‚åœï¼›å¦‚æžœæ­£åœ¨æ”¶çœ‹ç”µè§†ç›´æ’­ï¼Œå°±é™éŸ³ã€‚ ä¸è¿‡åŽæ¥å‘çŽ°ï¼Œæƒ³è¦èŽ·å–å°ç±³ç”µè§†æ­£åœ¨æ’­æ”¾ç‚¹æ’­èŠ‚ç›®è¿˜æ˜¯ç”µè§†ç›´æ’­å¹¶ä¸å®¹æ˜“ï¼ŒäºŽæ˜¯å°±é€‰æ‹©äº†ä¸€ç§â€œåˆä¸æ˜¯ä¸èƒ½ç”¨â€çš„å®žçŽ°æ–¹æ³•ï¼šä¸€æ—¦æ¥ç”µï¼Œæ¨¡æ‹ŸæŒ‰ä¸‹ç¡®è®¤æŒ‰é’®ï¼ˆå¦‚æžœæ˜¯ç‚¹æ’­èŠ‚ç›®ä¼šæš‚åœï¼Œç›´æ’­åˆ™æ— æ•ˆæžœï¼‰ï¼Œå¹¶é™éŸ³ï¼›ç”µè¯ç»“æŸåŽï¼Œå†æ¬¡æ¨¡æ‹ŸæŒ‰ä¸‹ç¡®è®¤æŒ‰é’®ï¼ˆç‚¹æ’­èŠ‚ç›®ä¼šç»§ç»­ï¼Œç›´æ’­åˆ™æ— æ•ˆæžœï¼‰ï¼Œæ¢å¤éŸ³é‡ã€‚ è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå®žçŽ°ç®€å•ã€‚åå¤„æ˜¯ï¼Œæ¨¡æ‹Ÿç‚¹å‡»ç¡®è®¤æŒ‰é’®è¿™ä¸ªè¿‡ç¨‹ä¸å¤Ÿå¯é ï¼Œä¼šè¯¯è§¦ä¸€äº›å…¶ä»–æŒ‰é’®ã€‚ä¾‹å¦‚æ­¤æ—¶ç”µè§†å…¶å®žå¹¶æ²¡æœ‰åœ¨æ’­æ”¾èŠ‚ç›®ï¼Œè€Œæ˜¯åœ¨ä¸»ç•Œé¢å¾…æœºï¼Œæ­¤æ—¶æ¥ç”µç‚¹å‡»ç¡®è®¤æŒ‰é’®çš„è¯ï¼Œå°±ä¼šé€‰ä¸­å…‰æ ‡å†…å®¹ã€‚ æ— ä¼¤å¤§é›…ï¼Œåªè¦ä½¿ç”¨ä¸Šç•¥åŠ æ³¨æ„å°±è¡Œäº†ï¼Œå¼€å‘æ•ˆçŽ‡ä¸‡å²ã€‚ðŸŽ‰ æœ€ç»ˆæµç¨‹ï¼š 123æŽ¥æ‰“ç”µè¯ â†’ ä¿å­˜å½“å‰éŸ³é‡å€¼ â†’ æ¨¡æ‹Ÿç‚¹å‡»ç¡®è®¤ â†’ è°ƒæ•´éŸ³é‡ä¸º 0ç”µè¯ç»“æŸ â†’ è¯»å–å¤‡ä»½éŸ³é‡å€¼ â†’ æ¨¡æ‹Ÿç‚¹å‡»ç¡®è®¤ â†’ æ¢å¤å¤‡ä»½éŸ³é‡ 2. å°ç±³ç”µè§†åè®®åˆ†æžå®¶é‡Œçš„æ‰‹æœºéƒ½æ²¡æœ‰çº¢å¤–æŽ¥å£ï¼Œä¸”çº¢å¤–å¯¹ç‰©ç†è¦æ±‚å¤ªé«˜ï¼Œæ‰€ä»¥æˆ‘ç›´æŽ¥æ”¾å¼ƒäº†çº¢å¤–è¿™æ¡è·¯ã€‚ä¸‹ä¸€æ¡è·¯å°±æ˜¯åˆ†æžå°ç±³ç”µè§†çš„ APP â€œå°ç±³æŠ•å±ç¥žå™¨â€ çš„åè®®ã€‚ 2.1. åˆæˆ˜ HTTP åè®®æœ€å®¹æ˜“æƒ³åˆ°å’Œåˆ†æžçš„å°±æ˜¯ HTTP åè®®ï¼ŒæŒ‰ç…§ ç§»åŠ¨è®¾å¤‡æŠ“åŒ… è¿™ç¯‡åšå®¢ä¸­çš„ä»‹ç»ï¼Œä½¿ç”¨ Charles æŠ“åŒ…ï¼Œç»“æžœå¦‚ä¸‹ï¼š æœåŠ¡å‘çŽ° æ‰“å¼€ APP ç¬¬ä¸€æ­¥å¿…ç„¶æ˜¯å…ˆæ‰¾åˆ°å°ç±³ç”µè§†çš„æœåŠ¡åœ°å€ï¼Œè¿™é‡Œå‘çŽ°äº†ä¸€æ¡åŠŸèƒ½ç±»ä¼¼çš„ APIï¼Œæä¾›äº†å°ç±³ç”µè§†éžå¸¸è¯¦ç»†çš„ä¿¡æ¯ã€‚ä½†æ˜¯è¿™ä¸ª API è™½ç„¶ä½¿ç”¨çš„æ˜¯ HTTPSï¼Œä½†æ˜¯è¯ä¹¦ç¡®å®žç§è‡ªç­¾å‘çš„ï¼Œç›´æŽ¥è¯·æ±‚ä¼šæŠ¥é”™ï¼š ä¸”é‡Œé¢æœ‰ä¸€äº›å‚æ•°ä¾‹å¦‚ï¼Œdeviceid å’Œ key è¿˜æš‚æ—¶ä¸çŸ¥é“æ¥æºã€‚ å¦å¤–æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ª API æ˜¯å‘å…¬ç½‘è¯·æ±‚çš„è®¾å¤‡ä¿¡æ¯ï¼Œè€ŒæœåŠ¡å‘çŽ°åº”è¯¥æ˜¯åœ¨å±€åŸŸç½‘å°±èƒ½å®Œæˆçš„äº‹æƒ…ï¼Œæ‰€ä»¥æš‚æ—¶æ”¾å¼ƒè¯¥ APIã€‚ èŽ·å–éŸ³é‡åœ¨è¿›å…¥æ‰‹æœºé¥æŽ§å™¨çš„æ—¶å€™ï¼Œæ‰‹æœºä¼šå‘èµ·ä¸€ä¸ªèŽ·å–éŸ³é‡çš„è¯·æ±‚ï¼š è¿™ä¸ª API å°±éžå¸¸å‹å¥½ï¼š å‘å†…ç½‘çš„å°ç±³ç”µè§†å‘é€è¯·æ±‚ HTTP åè®® æ²¡æœ‰ä¹±ä¸ƒå…«ç³Ÿçš„å‚æ•° å¯ä»¥ç›´æŽ¥æ‹¿æ¥ç”¨ è®¾ç½®éŸ³é‡åœ¨ APP ä¸Šè°ƒæ•´éŸ³é‡æœ‰ä¸¤ä¸ªæ–¹å¼ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ‰‹æœºéŸ³é‡é”®æ­¥è¿›è°ƒæ•´ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨ UI ä¸Šçš„æ‹–åŠ¨æ¡ç›´æŽ¥ä¸€æ­¥åˆ°ä½ã€‚ æ­¥è¿›è°ƒæ•´çš„è¯·æ±‚ä½¿ç”¨ Charles æ— æ³•èŽ·å–ï¼Œä¸‹é¢æ˜¯æ‹–åŠ¨è°ƒæ•´çš„ APIï¼š è¿™é‡Œçš„ API å’Œä¸Šé¢çš„èŽ·å–éŸ³é‡çš„éžå¸¸ç›¸ä¼¼ï¼Œæœ‰å¦‚ä¸‹å‚æ•° actionï¼šsetVolum è¡¨ç¤ºè®¾ç½®éŸ³é‡ volumï¼šç›®æ ‡éŸ³é‡ tsï¼šæ—¶é—´æˆ³ signï¼šç­¾å é—®é¢˜å°±å‡ºåœ¨è¿™ä¸ªç­¾åä¸Šï¼Œç­¾åä¸€èˆ¬æ˜¯å°†å‚æ•°ä»¥æŸç§é¡ºåºæ‹¼æŽ¥åŽï¼Œé™„å¸¦ç›å€¼ï¼Œç„¶åŽä½¿ç”¨ Hash ç®—æ³•è®¡ç®—ã€‚è¿™é‡Œä¸çŸ¥é“æ‹¼æŽ¥é¡ºåºï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å¦æœ‰ç›å€¼ï¼Œæ›´ä¸çŸ¥é“ç®—æ³•æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ª API éžå¸¸å›°éš¾ã€‚ å¤±è´¥æŽ¥ç€å‘çŽ°åŒ…æ‹¬æ­¥è¿›è°ƒæ•´éŸ³é‡ã€ç‚¹å‡»ç¡®è®¤ã€ä¸Šä¸‹å·¦å³ç­‰æ‰€æœ‰ APP ä¸Šçš„ç‚¹æŒ‰æŒ‰é”®éƒ½æ— æ³•ä½¿ç”¨ Charles èŽ·å–è¯·æ±‚ï¼Œå¾ˆæ˜Žæ˜¾è¿™é‡Œä½¿ç”¨çš„ä¸æ˜¯ HTTP è¯·æ±‚ï¼Œå†åŠ ä¸Šä¹‹å‰æœåŠ¡å‘çŽ°å’Œè®¾ç½®éŸ³é‡çš„ API ä¸å¯ç”¨ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡æŒ‘æˆ˜ HTTP API å¤±è´¥ã€‚ 2.2. TCP / UDP åè®®æ—¢ç„¶ Charles ä¸è¡Œï¼Œé‚£å°±ä¸Š Wiresharkã€‚æŒ‰ç…§ ç§»åŠ¨è®¾å¤‡æŠ“åŒ… è¿™ç¯‡åšå®¢ä¸­ä»‹ç»çš„ï¼Œä½¿ç”¨ Wireshark ç›‘å¬ iPhone ä¸Šçš„æ•°æ®åŒ…ã€‚ ç‚¹å‡»æŒ‰é’®å¼€å¯ Wiresharkï¼Œç‚¹å‡»â€œç¡®è®¤â€æŒ‰é’®åŽï¼Œæ‹¦æˆªåˆ°æ•°æ®åŒ…ï¼Œé€‚å½“è¿‡æ»¤åŽï¼š ä¸¤ä¸ªåŒ…çš„å†…å®¹åˆ†åˆ«ä¸º å…¶ä¸­ï¼Œè“è‰²çš„éƒ¨åˆ†å°±æ˜¯ TCP çš„æ•°æ®å­—æ®µã€‚ç»è¿‡å¤šæ¬¡æ‹¦æˆªå’Œåˆ†æžåŽï¼Œæ€»ç»“å‡ºçš„åè®®æ ¼å¼å¦‚ä¸‹ï¼š 123450000 04 00 41 01 00 00 00 45 00 3a 01 00 00 00 00 020010 00 00 00 01 03 00 00 00 42 04 00 00 00 1c 05 000020 00 00 00 06 00 00 00 08 07 00 00 00 00 00 00 000030 00 08 00 00 00 00 00 00 00 00 0a ff ff ff ff 0b0040 00 00 03 01 0004 ~ 0007 æ˜¯åºå·ï¼Œæ¯æ¬¡å‘é€ +1 0010 ~ 0013 æ¯æ¬¡æŒ‰é”®æ—¶ä¼šå‘é€ä¸¤æ¬¡å‡ ä¹Žä¸€æ¨¡ä¸€æ ·çš„ TCP åŒ…ï¼Œç¬¬ä¸€æ¬¡è¯¥å­—æ®µä¸º 0ï¼Œ ç¬¬äºŒæ¬¡ä¸º 1ã€‚æŽ¨æµ‹åº”è¯¥æ˜¯æŒ‰é”®çŠ¶æ€ï¼Œ0 è¡¨ç¤ºæŒ‰ä¸‹ï¼Œ1 è¡¨ç¤ºæ¾å¼€ã€‚ 0018 ~ 001f æ˜¯æŒ‰é”®ç ï¼Œè¯¦è§ä¸‹è¡¨ å…¶ä»–ä½ä¿æŒå˜å³å¯ æŒ‰é”®ç è¡¨ï¼š æŒ‰é”®åŠŸèƒ½ æŒ‰é”®ç  ç”µæº 0x1a04000000740500 ä¸Š 0x1304000000670500 ä¸‹ 0x14040000006c0500 å·¦ 0x1504000000690500 å³ 0x16040000006a0500 ç¡®è®¤ 0x42040000001c0500 ä¸»é¡µ 0x0304000000660500 è¿”å›ž 0x04040000009e0500 èœå• 0x05040000008b0500 éŸ³é‡å¢ž 0x1804000000730500 éŸ³é‡å‡ 0x1904000000720500 æœåŠ¡å‘çŽ°åœ¨ä½¿ç”¨ Wireshark ç›‘å¬æ—¶å‘çŽ°ï¼Œé™¤äº†ä¸Šè¿°çš„ TCP åŒ…ç”¨äºŽå‘é€æŒ‡ä»¤ï¼ŒAPP è¿˜ä¼šåœ¨åˆšå¯åŠ¨æ—¶ä½¿ç”¨ mDNS åè®®å¯»æ‰¾æœåŠ¡ï¼š å¦‚ä¸Šå›¾ï¼Œå‰ 4 ä¸ªåŒ…æ˜¯ APP åˆšå¯åŠ¨æ—¶ï¼Œå‘æ‰€æœ‰ç½‘æ®µå¹¿æ’­å¯»æ‰¾ _rc._tcp ç±»åž‹çš„æœåŠ¡ã€‚ä¹‹åŽå°ç±³ç”µè§†æ”¶åˆ°å¹¿æ’­ï¼Œå›žå¤äº†æœåŠ¡çš„ç«¯å£å’Œåœ°å€ï¼Œå¹¶é™„å¸¦äº†å°ç±³ç”µè§†çš„è¯¦ç»†ä¿¡æ¯ã€‚ åœ¨å‘½ä»¤è¡Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤æ¨¡æ‹Ÿï¼š 1234# æœç´¢æœåŠ¡dns-sd -B _rc._tcp local# èŽ·å–æœåŠ¡ç›¸ä¿¡ä¿¡æ¯dns-sd -L å®¢åŽ…çš„å°ç±³ç›’å­ _rc._tcp. 2.3. å†æˆ˜ HTTP åè®®å…¶å®žåˆ°ä¹‹å‰çš„æ­¥éª¤å·²ç»å¯ä»¥å®žçŽ°æ•´ä¸ªåº”ç”¨äº†ï¼š 123æŽ¥æ‰“ç”µè¯ â†’ é€šè¿‡ mDNS åè®®æœç´¢å°ç±³ç”µè§† â†’ é€šè¿‡ HTTP åè®®èŽ·å–å½“å‰éŸ³é‡ â†’ ä¿å­˜å½“å‰éŸ³é‡ â†’ é€šè¿‡ TCP åè®®æŒ‰ä¸‹ç¡®è®¤é”®å¹¶è°ƒèŠ‚éŸ³é‡è‡³0ç”µè¯ç»“æŸ â†’ é€šè¿‡ mDNS åè®®æœç´¢å°ç±³ç”µè§† â†’ é€šè¿‡ HTTP åè®®èŽ·å–å½“å‰éŸ³é‡ â†’ è¯»å–å­˜æ¡£éŸ³é‡ â†’ é€šè¿‡ TCP åè®®æŒ‰ä¸‹ç¡®è®¤é”®å¹¶æ¢å¤éŸ³é‡ å®žé™…ä¸Šæˆ‘ä¹Ÿå®žçŽ°å¦ä¸€ä¸ªè¿™æ ·çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯é‡åˆ°äº†å‡ ä¸ªé—®é¢˜ï¼š åœ¨ä½¿ç”¨ TCP è¿žæŽ¥ä¸Šå°ç±³ç”µè§†åŽï¼Œç¬¬ä¸€æ¬¡è¿žæŽ¥æ€»æ˜¯ä¼šè¢«æœåŠ¡ç«¯å…³é—­ Socketã€‚åŽŸå› ä¸æ˜Žï¼Œåº”è¯¥ä¸æ˜¯æˆ‘çš„å®žçŽ°é—®é¢˜ï¼Œå› ä¸º APP ä¹Ÿä¼šå‡ºçŽ°è¿™ä¸ªé—®é¢˜ã€‚ å¦‚æžœå½“å‰éŸ³é‡æ˜¯ 50ï¼Œé‚£ä¹ˆè°ƒæ•´éŸ³é‡ä¸º 0 éœ€è¦è‡³å°‘ 50 ä¸ª TCP åŒ…ã€‚å½“ç„¶ç†è®ºä¸Šæ˜¯ 100 ä¸ªï¼ŒåŒ…æ‹¬ 50 æ¬¡éŸ³é‡ä¸‹é”®æ¯æ¬¡ä¸¤ä¸ªåŒ…ï¼Œä½†æ˜¯æµ‹è¯•å‘çŽ°åªå‘é€ç¬¬ä¸€ä¸ªåŒ…ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå› æ­¤æ˜¯ 50 ä¸ªã€‚è¿™æ ·é€Ÿåº¦æ…¢ï¼Œå¹¶ä¸”éžå¸¸ä¸ç¨³å®šã€‚ ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜å‡ºçŽ°ä¸€ä¸ªè¿˜å¥½è§£å†³ï¼Œä½†æ˜¯æ€»æ˜¯ä¸€èµ·å‡ºçŽ°ï¼Œæ¯”å¦‚è°ƒèŠ‚éŸ³é‡çš„åŒ…å‘äº†å‡ ä¸ªï¼ŒSocket è¢«å…³äº†ï¼Œå¤„ç†èµ·æ¥éžå¸¸éº»çƒ¦ã€‚ æ‰€ä»¥æˆ‘æ”¾å¼ƒäº†è¿™ä¸ªæ–¹æ¡ˆï¼Œå†³å®šå†æˆ˜ä¸€æ¬¡ HTTP åè®®ï¼Œæ¯•ç«Ÿæœ‰ä¸ª setVolum çš„ API å®žåœ¨éžå¸¸è¯±äººã€‚ 3. åç¼–è¯‘æ— æ³•ä½¿ç”¨ setVolum çš„åŽŸå› æ˜¯ä¸çŸ¥é“å¦‚ä½•è®¡ç®— signï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œå°±ç›´æŽ¥åç¼–è¯‘ APP çœ‹çœ‹ï¼Œè¿™ä¸ªç­¾åç©¶ç«Ÿæ˜¯æ€Žä¹ˆç®—å‡ºæ¥çš„ã€‚å…³äºŽåç¼–è¯‘çš„ç®€æ˜“æ•™ç¨‹å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢ã€‚ 3.1. æŸ¥çœ‹æºç è®©æˆ‘ä»¬åˆ—ä¸€ä¸ªä»»åŠ¡è¡¨ï¼Œæ›´åŠ æ¸…æ™°åœ°è¿½è¸ªæºç ï¼š ä»»åŠ¡ å®Œæˆ è®¡ç®—ç­¾åçš„è¾“å…¥ è®¡ç®—ç­¾åçš„ç®—æ³• åˆ†æžè®¾ç½®éŸ³é‡çš„å‡½æ•°ä½¿ç”¨ jd-gui æŸ¥çœ‹æŠ•å±ç¥žå™¨çš„æºç ï¼Œæ‰¾åˆ°è®¾ç½®éŸ³é‡çš„å¯¹åº”å‡½æ•°ï¼š 12345678910// com.xiaomi.mitv.phone.tvassistant.b.a.a(int) : voidpublic void a(int paramInt)&#123; String str1 = String.valueOf(System.currentTimeMillis()); String str2 = a(String.valueOf(paramInt), this.b, str1); new c(this.d, String.format("http://%s:6095/general?action=setVolum&amp;volum=%d&amp;ts=%s&amp;sign=%s", new Object[] &#123; this.a, Integer.valueOf(paramInt), str1, str2 &#125;), new c.a() &#123; public void a(int paramAnonymousInt, String paramAnonymousString) &#123;&#125; &#125;).d();&#125; å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ 6 è¡Œå‘å‡ºäº†è¯·æ±‚ï¼Œæ ¹æ® String.formatå¯ä»¥å¾—çŸ¥ä¸€äº›å˜é‡å¯¹åº”çš„ä¿¡æ¯ï¼š paramIntï¼š ç›®æ ‡éŸ³é‡å€¼ str1ï¼šå½“å‰æ—¶é—´ str2ï¼šç­¾å æ˜¾ç„¶ï¼Œå¦‚ä½•è®¡ç®— str2 æ˜¯æœ€ä»¤äººæ„Ÿå…´è¶£çš„éƒ¨åˆ†ã€‚ æ¥åˆ°ç¬¬ 5 è¡Œï¼Œå‘çŽ° str2 ä½¿ç”¨å‡½æ•° a è®¡ç®—ï¼Œå‡½æ•° a å°±æ˜¯è®¡ç®—ç­¾åçš„å‡½æ•°ã€‚ å‡½æ•° a çš„å‚æ•°åˆ†åˆ«ä¸ºï¼š String.valueOf(paramInt)ï¼šç›®æ ‡éŸ³é‡ this.bï¼šæš‚æ—¶ä¸æ˜Ž str1ï¼šå½“å‰æ—¶é—´ ä»»åŠ¡ å®Œæˆ è®¡ç®—ç­¾åçš„è¾“å…¥ â“ è®¡ç®—ç­¾åçš„ç®—æ³• â“ this.b æ˜¯ä»€ä¹ˆ â“ åˆ†æžç­¾åçš„è¾“å…¥æŸ¥çœ‹å‡½æ•° a çš„é€»è¾‘ï¼š 12345// com.xiaomi.mitv.phone.tvassistant.b.a.a(String, String, String) : Stringprivate String a(String paramString1, String paramString2, String paramString3)&#123; return g.a("mitvsignsalt" + paramString1 + paramString2 + paramString3.substring(paramString3.length() - 5));&#125; å¾ˆæ˜Žæ˜¾ï¼Œè¿™å°±æ˜¯è®¡ç®— sign çš„å‡½æ•°ï¼Œè®¡ç®—é€»è¾‘å¦‚ä¸‹ï¼š å°†ç›å€¼ mitvsignsaltã€ç›®æ ‡éŸ³é‡ paramString1ã€paramString2ï¼ˆå³this.bï¼‰å’Œå½“å‰æ—¶é—´ paramString3 æ‹¼æŽ¥åœ¨ä¸€èµ· è°ƒç”¨å‡½æ•° g.a è®¡ç®— è‡³æ­¤ï¼Œæˆ‘ä»¬æžæ‡‚äº†è®¡ç®—ç­¾åçš„è¾“å…¥ï¼Œå°±æ˜¯ä¸Šè¿°çš„å­—ç¬¦ä¸²æ‹¼æŽ¥ã€‚ ä»»åŠ¡ å®Œæˆ è®¡ç®—ç­¾åçš„è¾“å…¥ âœ… è®¡ç®—ç­¾åçš„ç®—æ³• â“ this.b æ˜¯ä»€ä¹ˆ â“ åˆ†æžç­¾åçš„ç®—æ³•è®©æˆ‘ä»¬çœ‹çœ‹ g.a å¹²äº†ä»€ä¹ˆï¼š 12345678// com.xiaomi.mitv.socialtv.common.e.g.a(String) : Stringpublic static String a(String paramString)&#123; if (paramString == null) &#123;&#125; for (paramString = "";; paramString = a(paramString.getBytes())) &#123; return paramString; &#125;&#125; g.a è°ƒç”¨äº†ä¸€ä¸ªé‡è½½çš„å‡½æ•°ï¼š 12345678910111213141516171819202122// com.xiaomi.mitv.socialtv.common.e.g.a(byte[]) : Stringpublic static String a(byte[] paramArrayOfByte)&#123; if (paramArrayOfByte == null) &#123; paramArrayOfByte = ""; &#125; for (;;) &#123; return paramArrayOfByte; try &#123; MessageDigest localMessageDigest = MessageDigest.getInstance("MD5"); localMessageDigest.reset(); localMessageDigest.update(paramArrayOfByte); paramArrayOfByte = e.a(localMessageDigest.digest()); &#125; catch (Exception paramArrayOfByte) &#123; paramArrayOfByte = ""; &#125; &#125;&#125; å¾ˆæ˜Žæ˜¾äº†ï¼Œç­¾åçš„ç®—æ³•æ˜¯ MD5 ä»»åŠ¡ å®Œæˆ è®¡ç®—ç­¾åçš„è¾“å…¥ âœ… è®¡ç®—ç­¾åçš„ç®—æ³• âœ… this.b æ˜¯ä»€ä¹ˆ â“ this.b æ˜¯ä»€ä¹ˆåªè¦æžæ¸…æ¥š this.b æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—ç­¾åäº†ã€‚è€Œä¸”æ ¹æ®ç»éªŒï¼Œå®ƒå¾ˆå¯èƒ½æ˜¯ä¸€ä¸ª keyã€‚ç”±æœåŠ¡ç«¯ï¼ˆå°ç±³ç”µè§†ï¼‰å’Œå®¢æˆ·ç«¯ï¼ˆæ‰‹æœº APPï¼‰å…±åŒæ‹¥æœ‰ã€‚ ç„¶è€Œå¾ˆé—æ†¾ï¼Œä»¥æˆ‘çš„åŠŸåŠ›ï¼Œæ²¡èƒ½å¤Ÿåœ¨ä»£ç é‡Œé¢æ‰¾åˆ° this.b çš„æ¥æºï¼Œæ‰€ä»¥æˆ‘æ¢äº†ä¸€ä¸ªæ–°æ–¹æ³•ã€‚ 3.2. é‡ç¼–è¯‘ APPæ—¢ç„¶æ²¡åŠžæ³•ç›´æŽ¥æŠŠ this.b æ˜¯ä»€ä¹ˆçœ‹å‡ºæ¥ï¼Œæˆ‘å°±æƒ³ç€å¹²è„†ç”¨æ—¥å¿—æŠŠå®ƒçš„å€¼è¾“å‡ºå‡ºæ¥ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆçŒ«è…»ã€‚ è¿™å°±æ¶‰åŠåˆ°åç¼–è¯‘ APPï¼Œä¿®æ”¹æºç ï¼Œé‡æ–°æ‰“åŒ…å’Œç­¾åï¼Œå…·ä½“è¿‡ç¨‹å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢ã€‚ å”¯ä¸€ä¿®æ”¹çš„æ–‡ä»¶ smali/com/xiaomi/mitv/phone/tvassistant/b/a.smaliï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142.method public a(I)V # é¢å¤–å®šä¹‰ 4 ä¸ªå¯„å­˜å™¨ç”¨äºŽå­˜å‚¨ TAG .locals 12 .prologue .line 55 # è®¾ç½®åˆå§‹åŒ–TAG const-string v8, "AndiedieHack.currentTimeMillis" const-string v9, "AndiedieHack.param" const-string v10, "AndiedieHack.b" const-string v11, "AndiedieHack.result" invoke-static &#123;&#125;, Ljava/lang/System;â†’currentTimeMillis()J move-result-wide v0 invoke-static &#123;v0, v1&#125;, Ljava/lang/String;â†’valueOf(J)Ljava/lang/String; move-result-object v0 # ç¬¬ä¸€ä¸ª Logï¼Œè¾“å‡º v0 çš„å€¼ï¼Œå³ç³»ç»Ÿå½“å‰æ—¶é—´ invoke-static &#123;v8, v0&#125;, Landroid/util/Log;â†’d(Ljava/lang/String;Ljava/lang/String;)I .line 57 invoke-static &#123;p1&#125;, Ljava/lang/String;â†’valueOf(I)Ljava/lang/String; move-result-object v1 # ç¬¬äºŒä¸ª Logï¼Œè¾“å‡º v1 çš„å€¼ï¼Œå³ç›®æ ‡éŸ³é‡ invoke-static &#123;v9, v1&#125;, Landroid/util/Log;â†’d(Ljava/lang/String;Ljava/lang/String;)I iget-object v2, p0, Lcom/xiaomi/mitv/phone/tvassistant/b/a;â†’b:Ljava/lang/String; # ç¬¬ä¸‰ä¸ª Logï¼Œè¾“å‡º v2 çš„å€¼ï¼Œå³ this.b invoke-static &#123;v10, v2&#125;, Landroid/util/Log;â†’d(Ljava/lang/String;Ljava/lang/String;)I invoke-direct &#123;p0, v1, v2, v0&#125;, Lcom/xiaomi/mitv/phone/tvassistant/b/a;â†’a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; move-result-object v1 # ç¬¬å››ä¸ª Logï¼Œè¾“å‡º v1 çš„å€¼ï¼Œå³ç­¾åç»“æžœ invoke-static &#123;v11, v1&#125;, Landroid/util/Log;â†’d(Ljava/lang/String;Ljava/lang/String;)I è¿è¡Œä¿®æ”¹åŽçš„ APPï¼Œå°è¯•ä¿®æ”¹éŸ³é‡ï¼Œå‡ºçŽ°ä»¥ä¸‹æ—¥å¿—ï¼š è¿™ä¸ª this.b çš„å€¼æ˜¯ 3c:bd:3e:84:35:31 ä¹ä¸€çœ‹å°±æ˜¯ä¸€ä¸ª mac åœ°å€ï¼Œå¾ˆæœ‰å¯èƒ½å°±æ˜¯å°ç±³ç”µè§†çš„ mac åœ°å€ï¼ŒäºŽæ˜¯æˆ‘å…´å¥‹åœ°æ‰“å¼€è·¯ç”±å™¨ç•Œé¢æŸ¥è¯¢ï¼š ä¸ä¸€æ ·ðŸ¤•ï¼ï¼ï¼ æ­£å½“æˆ‘å¿ƒç°æ„å†·ä¹‹æ—¶ï¼Œæˆ‘çŒ›ç„¶å‘çŽ°ï¼Œè¿™ä¸ª mac åœ°å€å’Œåˆšåˆš mDNS é‡Œé¢èŽ·å–çš„ mac åœ°å€ä¸€æ¨¡ä¸€æ ·ï¼š ä¹‹åŽæ‰å‘çŽ°ï¼Œ3c:bd:3e:84:35:31 æ˜¯å°ç±³ç”µè§†çš„ä»¥å¤ªç½‘å£çš„ mac åœ°å€ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œthis.b çš„å€¼å¯ä»¥é€šè¿‡ mDNS èŽ·å–ã€‚ ä»»åŠ¡ å®Œæˆ è®¡ç®—ç­¾åçš„è¾“å…¥ âœ… è®¡ç®—ç­¾åçš„ç®—æ³• âœ… this.b æ˜¯ä»€ä¹ˆ âœ… 3.3. éªŒè¯æŽ¥ä¸‹æ¥å¯¹ç­¾åç®—æ³•è¿›è¡ŒéªŒè¯ï¼š OKï¼Œé€šè¿‡ 4. å®žçŽ°ç»è¿‡ä¸Šé¢çš„æŠ˜è…¾ï¼Œæœ€ç»ˆçš„æ–¹æ¡ˆå®šä¸ºï¼š 12345678910111213æŽ¥æ‰“ç”µè¯ â†“é€šè¿‡ mDNS åè®®æœç´¢å°ç±³ç”µè§† â”£â†’ é€šè¿‡ TCP åè®®æŒ‰ä¸‹ç¡®è®¤é”® â”—â†’ é€šè¿‡ HTTP åè®®èŽ·å–å½“å‰éŸ³é‡ â”£â†’ ä¿å­˜å½“å‰éŸ³é‡ â”—â†’ é€šè¿‡ HTTP è®¾ç½®éŸ³é‡ä¸º 0ç”µè¯ç»“æŸ â†“é€šè¿‡ mDNS åè®®æœç´¢å°ç±³ç”µè§† â”£â†’ é€šè¿‡ TCP åè®®æŒ‰ä¸‹ç¡®è®¤é”® â”—â†’ è¯»å–ä¿å­˜éŸ³é‡ â†’ é€šè¿‡ HTTP æ¢å¤éŸ³é‡ 4.1. mDNS å®žçŽ°åˆ©ç”¨ mDNS èŽ·å–å°ç±³ç”µè§†ä¿¡æ¯ï¼Œè¿™é‡Œå€ŸåŠ© Android æä¾›çš„ NsdManager å®žçŽ°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546val mNsdManager = getSystemService(Context.NSD_SERVICE) as NsdManagerval mDiscoveryListener = object : NsdManager.DiscoveryListener &#123; val listen = this override fun onServiceFound(serviceInfo: NsdServiceInfo?) &#123; Log.d(TAG, "ServiceFound: $serviceInfo") // å‘çŽ°æœåŠ¡åŽï¼ŒèŽ·å–æœåŠ¡è¯¦ç»†ä¿¡æ¯ mNsdManager.resolveService(serviceInfo, object: NsdManager.ResolveListener &#123; override fun onResolveFailed(serviceInfo: NsdServiceInfo?, errorCode: Int) &#123; Log.e(TAG, "Resolve failed: $errorCode") &#125; override fun onServiceResolved(serviceInfo: NsdServiceInfo?) &#123; Log.d(TAG, "Resolve Succeeded. $serviceInfo") if (serviceInfo == null) return // ï¼ï¼æœåŠ¡è¯¦ç»†ä¿¡æ¯ï¼ï¼ serviceInfo mNsdManager.stopServiceDiscovery(listen) &#125; &#125;) &#125; override fun onStopDiscoveryFailed(serviceType: String?, errorCode: Int) &#123; Log.e(TAG, "Stop DNS-SD discovery failed: Error code:$errorCode") mNsdManager.stopServiceDiscovery(this) &#125; override fun onStartDiscoveryFailed(serviceType: String?, errorCode: Int) &#123; Log.e(TAG, "Start DNS-SD discovery failed: Error code:$errorCode") mNsdManager.stopServiceDiscovery(this) &#125; override fun onServiceLost(serviceInfo: NsdServiceInfo?) &#123; Log.e(TAG, "DNS-SD service lost: $serviceInfo") &#125; override fun onDiscoveryStarted(serviceType: String?) &#123; Log.d(TAG, "DNS-SD discovery started") &#125; override fun onDiscoveryStopped(serviceType: String?) &#123; Log.d(TAG, "DNS-SD discovery stopped: $serviceType") &#125;&#125;// æ³¨æ„æœåŠ¡ç±»åž‹æ˜¯ _rc._tcpmNsdManager.discoverServices("_rc._tcp", NsdManager.PROTOCOL_DNS_SD, mDiscoveryListener) 4.2. Socket å®žçŽ°å€ŸåŠ© Socket å‘é€ TCP åŒ…ï¼Œå®žçŽ°æš‚åœï¼š 12345678910val CONFIRM_BYTES = byteArrayOf(0x04, 0x00, 0x41, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3a, 0x01, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x42, 0x04, 0x00, 0x00, 0x00, 0x1c, 0x05, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x08, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x03, 0x01)val socket = Socket(serviceInfo.host, serviceInfo.port)val oStream = socket.getOutputStream()val press = CONFIRM_BYTESval up = CONFIRM_BYTES.copyOf()up[0x13] = 0x01oStream.write(press)oStream.write(up)oStream.flush() 4.3. ç›‘å¬ç”µè¯çŠ¶æ€æ·»åŠ æƒé™ 1&lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt; æ³¨æ„è¿™ä¸ªæƒé™å¿…é¡»è¿è¡Œæ—¶è¯·æ±‚ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142private const val PERMISSIONS_REQUEST = 852private fun hasPermissions(permissions: List&lt;String&gt;): Boolean &#123; for (permission in permissions) &#123; if (ActivityCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) &#123; return false &#125; &#125; return true&#125;private fun checkPermissions() &#123; val permissions = mutableListOf&lt;String&gt;(Manifest.permission.READ_PHONE_STATE) if (!hasPermissions(permissions)) &#123; Log.d(TAG, "Permissions missing") ActivityCompat.requestPermissions(this, permissions.toTypedArray(), PERMISSIONS_REQUEST) &#125; else &#123; Log.d(TAG, "Permissions granted") permission = true &#125;&#125;override fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray) &#123; if (grantResults.isEmpty()) return when (requestCode) &#123; PERMISSIONS_REQUEST -&gt; &#123; var flag = true for (result in grantResults) &#123; if (result != PackageManager.PERMISSION_GRANTED) &#123; flag = false break &#125; &#125; permission = if (flag) &#123; Log.d(TAG, "Request permissions success") true &#125; else &#123; Log.d(TAG, "Request permissions failed") false &#125; &#125; &#125;&#125; æœåŠ¡å®žçŽ°ï¼š 12345678910111213141516171819202122private val phoneStateReceiver = object : BroadcastReceiver() &#123; private var lastIdle = true override fun onReceive(context: Context?, intent: Intent?) &#123; if (context == null || intent == null) return when (intent.action) &#123; TelephonyManager.ACTION_PHONE_STATE_CHANGED -&gt; &#123; val tManager = context.getSystemService(TELEPHONY_SERVICE) as TelephonyManager if (tManager.callState == TelephonyManager.CALL_STATE_IDLE) &#123; lastIdle = true // ç”µè¯ç»“æŸ &#125; else if (lastIdle) &#123; lastIdle = false // æŽ¥æ‰“ç”µè¯ &#125; &#125; &#125; &#125;&#125;private fun register() &#123; this.registerReceiver(phoneStateReceiver, IntentFilter(TelephonyManager.ACTION_PHONE_STATE_CHANGED))&#125; 5. å‘5.1. åˆšè¿žæŽ¥ WiFi æ—¶ Socket Timeoutå¦‚æžœåœ¨åˆšåˆšè¿žæŽ¥ WiFi çš„ä¸€çž¬é—´è¿žæŽ¥ Socketï¼Œä¼šå‡ºçŽ° connect failed: ETIMEDOUT çš„é”™è¯¯ ä¸ºäº†é¿å…è¿™æ ·çš„é”™è¯¯ï¼Œå¾—è¿›è¡Œè‡ªåŠ¨é‡è¿žï¼š 1234567891011while (true) &#123; try &#123; socket = Socket(serviceInfo.host, serviceInfo.port) Log.d(TAG, "Socket connected: $&#123;serviceInfo.host&#125;:$&#123;serviceInfo.port&#125;") break &#125; catch (err : ConnectException) &#123; Thread.sleep(1000) Log.e(TAG, err.toString()) Log.d(TAG, "Retrying") &#125;&#125; 5.2. RxJava è‡ªåŠ¨å›žæ”¶RxJava ä¸­ä¸€äº›ä»»åŠ¡å¦‚æžœæ²¡æœ‰å›žæ”¶ï¼Œä¼šæœ‰ä¸€äº›æ½œåœ¨çš„é—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœåœ¨æŸä¸ª Activity ä¸­ä½¿ç”¨äº†ä¸€ä¸ªç”¨äºŽç½‘ç»œè¯·æ±‚çš„ RxJavaï¼Œæ­¤æ—¶å¦‚æžœ Activity è¢«ç³»ç»Ÿå…³é—­ï¼Œä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ ä»¥ä¸‹ä»£ç å¯ä»¥å®žçŽ°è‡ªåŠ¨å›žæ”¶ï¼š 12345678910val compositeDisposable = new CompositeDisposable();val disposable = Observable.just(1) .subscribeOn(Schedulers.io()) .subscribe(number -&gt; Log.d(number));compositeDisposable.add(disposable);// åœ¨ onDestroy æ—¶è°ƒç”¨compositeDisposable.dispose(); æ›´å¤šè¯¦æƒ…ï¼Œå‚ç…§ç›¸å…³é—®é¢˜ã€‚ 5.3. æœåŠ¡å§‹ç»ˆä¿æŒè¿è¡Œæœ¬æ¥å¯ä»¥ç›´æŽ¥ç”¨æ™®é€šçš„ Service æ¥æžå®šï¼Œä½†æ˜¯ Service ä¼šä¸å®šæ—¶è¢«ç³»ç»Ÿå›žæ”¶ï¼Œä¸”å›½å†…å®‰å“å¸‚åœºæ··ä¹±ï¼Œå¾ˆå®¹æ˜“è¢«è¿›åˆ¶åŽå°ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨å‰å°æœåŠ¡ ForegroundService æ¥ä¿æŒæœåŠ¡å§‹ç»ˆè¿è¡Œã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œå‰å°æœåŠ¡æ˜¯åœ¨æœåŠ¡è¿è¡Œè¿‡ç¨‹ä¸­å¯åŠ¨çš„ï¼Œè€Œéžå¯åŠ¨æœåŠ¡çš„æ—¶å€™ï¼›å¦å¤–å‰å°æœåŠ¡è¿è¡Œä¸­ï¼Œé€šçŸ¥æ ä¼šæœ‰æ— æ³•å…³é—­çš„é€šçŸ¥æ¥å‘ŠçŸ¥ç”¨æˆ·æœåŠ¡ä»ç„¶åœ¨è¿è¡Œã€‚ å£°æ˜ŽæœåŠ¡ï¼š 1&lt;service android:name=".PhoneStateReceiverService" android:exported="false" /&gt; å£°æ˜Žæƒé™ï¼š 1&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE" /&gt; æ³¨æ„è¿™ä¸ªæƒé™å¿…é¡»è¿è¡Œæ—¶è¯·æ±‚ï¼ŒåŒä¸Šè¿° android.permission.READ_PHONE_STATE æƒé™ã€‚ æœåŠ¡å®žçŽ°ç»†èŠ‚ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243private val TAG = "TVPause." + PhoneStateReceiverService::class.java.simpleNameclass PhoneStateReceiverService : Service() &#123; companion object &#123; private const val CHANNEL_ID = "cn.andiedie.TVPause.PhoneStateReceiverService.CHANNEL" private const val NOTIFICATION_ID = 19210 &#125; override fun onCreate() &#123; super.onCreate() // Android O å¼€å§‹éœ€è¦ç®¡ç†é€šçŸ¥çš„é¢‘é“ if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; val name = getText(R.string.channel_name) val description = getText(R.string.channel_description).toString() val importance = NotificationManager.IMPORTANCE_DEFAULT val mChannel = NotificationChannel(CHANNEL_ID, name, importance) mChannel.description = description val notificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager notificationManager.createNotificationChannel(mChannel) &#125; Log.d(TAG, "PhoneStateReceiverService create") &#125; private fun register() &#123; val builder = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; Notification.Builder(this, CHANNEL_ID) &#125; else &#123; Notification.Builder(this) &#125; val notification = builder.setContentTitle(getText(R.string.notification_title)) .setContentText(getText(R.string.notification_message)) .setSmallIcon(R.mipmap.ic_launcher) .build() startForeground(NOTIFICATION_ID, notification) // ä»Žè¿™å¼€å§‹ æœåŠ¡å°±ä¿æŒä¸€ç›´è¿è¡Œ // å°†éœ€è¦é•¿æ—¶é—´è¿è¡Œçš„æœåŠ¡ï¼Œä¾‹å¦‚ç”µè¯çŠ¶æ€æŽ¥æ”¶å‡½æ•°æ”¾åœ¨è¿™é‡Œæ³¨å†Œ &#125; private fun unregister() &#123; unregisterReceiver(phoneStateReceiver) &#125; override fun onBind(intent: Intent?): IBinder? &#123; return null &#125;&#125; 5.4. Android P æ˜Žæ–‡ä¼ è¾“é”™è¯¯Android 9.0 (API level 28) å¼€å§‹é»˜è®¤ç¦æ­¢æ˜Žæ–‡ä¼ è¾“ï¼Œå› æ­¤ HTTP ä¼šå‡ºé”™ã€‚ éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼š 12345678910&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;manifest ...&gt; &lt;uses-permission android:name="android.permission.INTERNET" /&gt; &lt;application ... android:networkSecurityConfig="@xml/network_security_config" ...&gt; ... &lt;/application&gt;&lt;/manifest&gt; æ›´å¤šè¯¦æƒ…ï¼Œå‚ç…§ç›¸å…³é—®é¢˜ã€‚ 5.5. å…³äºŽå±å¹•æ—‹è½¬Android åœ¨å±å¹•æ—‹è½¬çš„è¿‡ç¨‹ä¸­ï¼Œé»˜è®¤ä¼šé”€æ¯å½“å‰ Activityï¼Œç„¶åŽé‡æ–°æ¸²æŸ“ä¸€ä¸ªæ–°çš„ Activityã€‚å¯ä»¥é€šè¿‡é…ç½®ä¿®æ”¹è¿™ä¸ªè¡¨çŽ°ã€‚ ä¿æŒç«–å±ï¼š 123456789&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;manifest ...&gt; &lt;application ...&gt; &lt;activity android:screenOrientation="portrait" &gt; &lt;/activity&gt; &lt;/application&gt;&lt;/manifest&gt; æ›´å¤šè¯¦æƒ…ï¼Œå‚è€ƒè¿™ä¸ªé“¾æŽ¥ã€‚ 6. æ•ˆæžœ è¯·æ— è§†ç”µè§†å‰§å†…å®¹å’Œæ‰‹æœºæ¥ç”µå¤´åƒðŸ¤ ã€‚ 7. ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å¯ä»¥è€ƒè™‘åœ¨ç”µè§†è£…ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œè¿™æ ·å°±å¯ä»¥éžå¸¸è¯¦ç»†åœ°èŽ·å¾—å½“å‰ç”µè§†çš„è¿è¡Œæƒ…å†µï¼Œå„ç§è¿žæŽ¥ã€æ“ä½œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æžå®šã€‚]]></content>
      <categories>
        <category>Development</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Android åç¼–è¯‘ã€ä¿®æ”¹ã€é‡æ‰“åŒ…ä¸Žç­¾å]]></title>
    <url>%2Fposts%2F552a%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡åšå®¢ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨ Apktoolã€dex2jarã€jd-guiç­‰å·¥å…·åç¼–è¯‘ Android APPã€ä¿®æ”¹æºç ã€é‡æ–°æ‰“åŒ…å¹¶ç­¾åã€‚ 1. å·¥å…·å®‰è£…1.1. ApktoolApktool ä¸»è¦ç”¨äºŽåç¼–è¯‘å’Œé‡ç¼–è¯‘ APK æ–‡ä»¶ã€‚ Windows å’Œ Linux å®‰è£…æ–¹æ³•å‚ç…§ï¼šå®˜æ–¹æŒ‡å— macOS å®‰è£…æ–¹æ³•å¦‚ä¸‹ï¼š å³é”®ä¿å­˜å¯åŠ¨è„šæœ¬ï¼Œå‘½åä¸º apktool ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ Apktoolï¼Œå‘½åä¸º apktool.jar å°† apktool å’Œ apktool.jar ç§»åŠ¨åˆ° /usr/local/bin ç›®å½•ä¸‹ ä½¿ç”¨ chmod +x apktool å’Œ chmod +x apktool.jar æ·»åŠ è¿è¡Œæƒé™ åœ¨å‘½ä»¤è¡Œç›´æŽ¥è¿è¡Œå‘½ä»¤ apktool å³å¯ï¼Œå®‰è£…å®Œæˆ 1.2. dex2jardex2jar ä¸»è¦ç”¨äºŽå°† dex æ–‡ä»¶è½¬ä¸º jar æ–‡ä»¶ ä»Ž GitHub ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶è§£åŽ‹ã€‚è¿è¡Œè§£åŽ‹åŽç›®å½•ä¸‹çš„ d2j-dex2jar.sh æˆ– d2j-dex2jar.bat å³å¯ã€‚ 1.3. jd-guijd-gui ä¸»è¦ç”¨æ¥å¯è§†åŒ– jar æ–‡ä»¶ã€‚ ä»Ž GitHub ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶è§£åŽ‹ã€‚è¿è¡Œè§£åŽ‹åŽç›®å½•ä¸‹çš„ JD-GUI å³å¯ã€‚ macOS ä¸‹æ³¨æ„ï¼š å¦‚æžœ jd-gui æ— æ³•æ‰“å¼€ï¼Œç¼–è¾‘ JD-GUI.app/Contents/MacOS/universalJavaApplicationStub.sh 123456789101112exec "$JAVACMD" \ -cp "$&#123;JVMClassPath&#125;" \ -Xdock:icon="$&#123;ResourcesFolder&#125;/$&#123;CFBundleIconFile&#125;" \ -Xdock:name="$&#123;CFBundleName&#125;" \ ## ----- æ·»åŠ è¿™ä¸¤è¡Œ ----- --add-opens java.base/jdk.internal.loader=ALL-UNNAMED \ --add-opens jdk.zipfs/jdk.nio.zipfs=ALL-UNNAMED \ ## -------------------- $&#123;JVMOptions:+$JVMOptions &#125;\ $&#123;JVMDefaultOptions:+$JVMDefaultOptions &#125;\ $&#123;JVMMainClass&#125;\ $&#123;JVMArguments:+ $JVMArguments&#125; è¯¦è§ issue 2. æŸ¥çœ‹æºç ä»¥å°ç±³æŠ•å±ç¥žå™¨ APP ä¸ºä¾‹ã€‚ è¿è¡Œ d2j-dex2jar.sh å°† APK ä¸­çš„ dex æ–‡ä»¶è½¬ä¸º jar æ–‡ä»¶ï¼š 12$ ./d2j-dex2jar.sh mi.apkdex2jar mi.apk -&gt; ./mi-dex2jar.jar æ‰“å¼€ jd-guiï¼Œå°† mi-dex2jar.jar æ‹–è¿›åŽ»ï¼Œå³å¯çœ‹åˆ°åç¼–è¯‘åŽçš„æºç ã€‚ 3. ä¿®æ”¹æºç è¿™é‡Œä»¥å¢žåŠ  Log ä¸ºä¿®æ”¹æºç çš„ä¾‹å­ã€‚ jd-gui åªèƒ½æŸ¥çœ‹æºç ï¼Œä½†æ˜¯æ— æ³•ä¿®æ”¹ã€‚è¦ä¿®æ”¹æºç ï¼Œåªèƒ½ä¿®æ”¹ smali æ–‡ä»¶ï¼Œå®ƒç±»ä¼¼äºŽæ±‡ç¼–ï¼Œä½†æ˜¯è¦ç®€å•å¾ˆå¤šã€‚ é¦–å…ˆå¾—ä½¿ç”¨ apktool è¿›è¡Œåç¼–è¯‘ï¼š 1apktool d mi.apk -o mi è¿™é‡Œå°† mi.apk è¿›è¡Œåç¼–è¯‘å¹¶å°†ç»“æžœæ”¾åˆ° mi ç›®å½•ä¸­ã€‚ é¦–å…ˆæ‰¾åˆ°éœ€è¦æ·»åŠ  Log çš„ä½ç½®ï¼Œå»ºè®®åœ¨ jd-gui ä¸­å¯»æ‰¾ï¼Œç„¶åŽåœ¨ mi ç›®å½•ä¸­å®šä½ã€‚ ä¾‹å¦‚ä»¥ä¸‹ class å’Œ smali çš„å¯¹åº”å…³ç³» mi-dex2jar.jar!/com/xiaomi/mitv/phone/tvassistant/b/a.class mi/smali/com/xiaomi/mitv/phone/tvassistant/b/a.smali æ‰“å¼€ a.class å’Œ a.smaliï¼Œé¦–å…ˆçœ‹ javaï¼š 123456789public void a(int paramInt)&#123; String str1 = String.valueOf(System.currentTimeMillis()); String str2 = a(String.valueOf(paramInt), this.b, str1); new c(this.d, String.format("http://%s:6095/general?action=setVolum&amp;volum=%d&amp;ts=%s&amp;sign=%s", new Object[] &#123; this.a, Integer.valueOf(paramInt), str1, str2 &#125;), new c.a() &#123; public void a(int paramAnonymousInt, String paramAnonymousString) &#123;&#125; &#125;).d();&#125; å¯¹åº”çš„ smali æ–‡ä»¶å†…å®¹ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘åªæå–äº†éƒ¨åˆ†å†…å®¹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637.method public a(I)V # a æ˜¯æ–¹æ³•ï¼Œp0 = this # a æŽ¥æ”¶ä¸€ä¸ªå‚æ•°, p1 = paramInt' # å®šä¹‰äº† 8 ä¸ªå¯„å­˜å™¨ .locals 8 .prologue .line 55 # èŽ·å–ç³»ç»Ÿå½“å‰æ—¶é—´ invoke-static &#123;&#125;, Ljava/lang/System;-&gt;currentTimeMillis()J # ç»“æžœèµ‹å€¼ç»™ v0 move-result-wide v0 # è°ƒç”¨ String.valueOf æ–¹æ³•ï¼Œå°† v0 è½¬ä¸ºå­—ç¬¦ä¸² invoke-static &#123;v0, v1&#125;, Ljava/lang/String;-&gt;valueOf(J)Ljava/lang/String; # ç»“æžœèµ‹å€¼ç»™ v0 move-result-object v0 # åˆ°è¿™ä¸€æ­¥ # String str1 = String.valueOf(System.currentTimeMillis()); # æ‰§è¡Œå®Œäº† .line 57 # è°ƒç”¨ String.valueOf æ–¹æ³• p1 è½¬ä¸ºå­—ç¬¦ä¸² invoke-static &#123;p1&#125;, Ljava/lang/String;-&gt;valueOf(I)Ljava/lang/String; # ç»“æžœèµ‹å€¼ç»™ v1 move-result-object v1 # èŽ·å– this.bï¼Œä¹Ÿå°±æ˜¯ä»Ž p1 ä¸­èŽ·å– bï¼Œå¹¶èµ‹å€¼ç»™ v2 iget-object v2, p0, Lcom/xiaomi/mitv/phone/tvassistant/b/a;-&gt;b:Ljava/lang/String; # å°† v1ï¼Œv2ï¼Œv0 ä½œä¸ºå‚æ•°è°ƒç”¨æ–¹æ³• aï¼Œå¹¶ä¼ é€’ p0 ä½œä¸º this invoke-direct &#123;p0, v1, v2, v0&#125;, Lcom/xiaomi/mitv/phone/tvassistant/b/a;-&gt;a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; # å°†ç»“æžœèµ‹å€¼ç»™ v1 move-result-object v1 # åˆ°è¿™ä¸€æ­¥ # String str2 = a(String.valueOf(paramInt), this.b, str1); # æ‰§è¡Œå®Œäº† ... å‡è®¾æˆ‘ä»¬æƒ³è¦å¾—çŸ¥å…¶ä¸­ this.b çš„å€¼ï¼Œå¯ä»¥è¿™æ ·æ·»åŠ  Logï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243.method public a(I)V # é¢å¤–å®šä¹‰ 4 ä¸ªå¯„å­˜å™¨ç”¨äºŽå­˜å‚¨ TAG .locals 12 .prologue .line 55 # è®¾ç½®åˆå§‹åŒ–TAG const-string v8, "AndiedieHack.currentTimeMillis" const-string v9, "AndiedieHack.param" const-string v10, "AndiedieHack.b" const-string v11, "AndiedieHack.result" invoke-static &#123;&#125;, Ljava/lang/System;-&gt;currentTimeMillis()J move-result-wide v0 invoke-static &#123;v0, v1&#125;, Ljava/lang/String;-&gt;valueOf(J)Ljava/lang/String; move-result-object v0 # ç¬¬ä¸€ä¸ª Logï¼Œä½¿ç”¨ v8 ä½œä¸º TAGï¼Œè¾“å‡º v0 çš„å€¼ï¼Œå³ç³»ç»Ÿå½“å‰æ—¶é—´ invoke-static &#123;v8, v0&#125;, Landroid/util/Log;-&gt;d(Ljava/lang/String;Ljava/lang/String;)I .line 57 invoke-static &#123;p1&#125;, Ljava/lang/String;-&gt;valueOf(I)Ljava/lang/String; move-result-object v1 # ç¬¬äºŒä¸ª Logï¼Œä½¿ç”¨ v9 ä½œä¸º TAGï¼Œè¾“å‡º v1 çš„å€¼ # v1 æ˜¯ p1 çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œp1 æ˜¯å‡½æ•°å‚æ•° invoke-static &#123;v9, v1&#125;, Landroid/util/Log;-&gt;d(Ljava/lang/String;Ljava/lang/String;)I iget-object v2, p0, Lcom/xiaomi/mitv/phone/tvassistant/b/a;-&gt;b:Ljava/lang/String; # ç¬¬ä¸‰ä¸ª Logï¼Œä½¿ç”¨ v10 ä½œä¸º TAGï¼Œè¾“å‡º v2 çš„å€¼ï¼Œå³ this.b invoke-static &#123;v10, v2&#125;, Landroid/util/Log;-&gt;d(Ljava/lang/String;Ljava/lang/String;)I invoke-direct &#123;p0, v1, v2, v0&#125;, Lcom/xiaomi/mitv/phone/tvassistant/b/a;-&gt;a(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; move-result-object v1 # ç¬¬å››ä¸ª Logï¼Œä½¿ç”¨ v11 ä½œä¸º TAGï¼Œè¾“å‡º v1 çš„å€¼ï¼Œå³ str2 invoke-static &#123;v11, v1&#125;, Landroid/util/Log;-&gt;d(Ljava/lang/String;Ljava/lang/String;)I åˆ°è¿™ä¸€æ­¥ï¼Œæºç ä¿®æ”¹å®Œæˆã€‚æŽ¥ä¸‹æ¥è¿›è¡Œé‡æ–°æ‰“åŒ…ã€‚ 3. é‡æ–°æ‰“åŒ…ä¸Žç­¾åå°†ä¿®æ”¹åŽçš„å†…å®¹é‡æ–°æ‰“åŒ…ä¸º APKï¼š 1apktool b mi -o unsigned.apk æ‰“åŒ…ä¹‹åŽçš„ unsigned.apk æ˜¯æ²¡æœ‰ç­¾åçš„ï¼Œæ— æ³•å®‰è£…ã€‚ ç­¾åéœ€è¦ä½¿ç”¨ä¸€ä¸ª keystoreï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ Android Studio ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„ debug ç”¨ keystoreã€‚ ä½ç½®åœ¨ ç”¨æˆ·ç›®å½•/.android/debug.keystoreï¼Œalias æ˜¯ androiddebugkeyï¼Œå¯†ç æ˜¯ android ç­¾åå‘½ä»¤ï¼š 1jarsigner -keystore debug.keystore -signedjar signed.apk unsigned.apk androiddebugkey è¾“å…¥å¯†ç å³å¯ã€‚ 4. æµ‹è¯•åœ¨æ‰‹æœºä¸Šå®‰è£… signed.apkï¼Œæ³¨æ„å¦‚æžœä¹‹å‰å·²ç»å®‰è£…äº†æŠ•å±ç¥žå™¨ï¼Œéœ€è¦å…ˆå¸è½½ï¼Œå› ä¸ºä¸¤è€…çš„ç­¾åä¸ä¸€è‡´ã€‚ è¿è¡Œ APPï¼Œè°ƒæ•´éŸ³é‡ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ Logï¼š]]></content>
      <categories>
        <category>Tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç§»åŠ¨è®¾å¤‡æŠ“åŒ…]]></title>
    <url>%2Fposts%2Fcc60%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦ä»¥ iOS ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Charles å’Œ Wireshark åœ¨ç§»åŠ¨è®¾å¤‡ä¸ŠæŠ“å– HTTPSã€HTTPSã€TCP ç­‰åè®®çš„æ•°æ®åŒ…ã€‚ ä»¥ä¸‹ç§° PC ä¸ºæŠ“åŒ…æ‰€ç”¨çš„è®¡ç®—æœºï¼Œæ‰‹æœºä¸ºè¢«æŠ“åŒ…çš„ç§»åŠ¨è®¾å¤‡ã€‚ 1. ä½¿ç”¨ Charles æŠ“å– HTTPé¦–å…ˆå®‰è£… Charlesï¼Œä¸‹è½½åœ°å€ï¼šå®˜ç½‘ã€‚ ä½¿ç”¨ Charles æŠ“åŒ…è¦æ±‚ PC å’Œ æ‰‹æœºå¿…é¡»ä½äºŽåŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹ã€‚ 1.1. é…ç½® Charlesæ‰“å¼€ Charlesï¼Œèœå• Proxy &gt; Proxy Settings... è¿›å…¥ä»£ç†è®¾ç½®ï¼Œæ‰“å¼€ä»£ç†æœåŠ¡å™¨ã€‚å¯ä»¥æŒ‡å®šä»£ç†æœåŠ¡å™¨è¿è¡Œçš„ç«¯å£ï¼Œè¿™é‡Œä½¿ç”¨é»˜è®¤ç«¯å£ 8888ã€‚ æŽ¥ä¸‹æ¥èŽ·å– Charles ä»£ç†æœåŠ¡å™¨å±€åŸŸç½‘ IPï¼Œä¹Ÿå°±æ˜¯æœ¬æœºåœ¨å±€åŸŸç½‘çš„ IPã€‚macOS å¯ä»¥æ‰“å¼€ System Preferences &gt; Network ä¸­æŸ¥çœ‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è¿è¡Œ ifconfig æŸ¥çœ‹ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“äº† Charles çš„ä»£ç†æœåŠ¡å™¨çš„åœ°å€æ˜¯ 192.168.31.110:8888ã€‚ 1.2. é…ç½®æ‰‹æœºæ‰‹æœºè¿žæŽ¥ PC æ‰€åœ¨å±€åŸŸç½‘çš„ WiFiï¼Œå¹¶é…ç½®ä»£ç†æœåŠ¡å™¨ã€‚iOS ç¤ºä¾‹å¦‚ä¸‹ï¼š 1.3. å¼€å§‹æŠ“åŒ…æ­¤æ—¶ç›´æŽ¥ä»Žæ‰‹æœºå‘èµ·ä»»ä½• HTTP è¯·æ±‚å³å¯ï¼ŒPC ä¸Šçš„ Charles ä¼šæ˜¾ç¤ºæ‰€æœ‰ HTTP æ•°æ®åŒ…ã€‚è‹¥æƒ³è¦åœæ­¢æŠ“åŒ…ï¼Œè¯·å…³é—­ Charles å¹¶åœ¨æ‰‹æœºä¸Šå–æ¶ˆä½¿ç”¨ä»£ç†æœåŠ¡å™¨ã€‚ 2. ä½¿ç”¨ Charles æŠ“å– HTTPSä¸ºäº†ä½¿ Charles èƒ½å¤Ÿæˆä¸ºä¸­é—´äººæŠ“å– HTTPSï¼Œå¿…é¡»é¦–å…ˆå®‰è£…å¹¶ä¿¡ä»» Charles ç­¾å‘çš„ CA è¯ä¹¦ã€‚ 2.1. è®¾ç½®ä»£ç†æœåŠ¡å™¨é¦–å…ˆæŒ‰ç…§ä¸Šä¸€æ­¥æåˆ°çš„æ­¥éª¤ï¼Œæ‰“å¼€ Charles çš„ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶é…ç½®æ‰‹æœºè¿žæŽ¥è¯¥ä»£ç†æœåŠ¡å™¨ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ä¸‹è½½ Charles ç­¾å‘çš„è¯ä¹¦ã€‚ 2.2. å®‰è£…è¯ä¹¦åœ¨æ‰‹æœºä¸Šè®¿é—®ç½‘é¡µ chls.pro/sslï¼ŒiOS ä¸Šæ³¨æ„ä½¿ç”¨ Safari æ‰“å¼€è¯¥é¡µé¢æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºè¯ä¹¦ã€‚ æ³¨æ„ï¼Œå®‰è£…æ—¶éœ€è¦è¾“å…¥æ‰‹æœºå¯†ç ã€‚ 2.3. ä¿¡ä»»è¯ä¹¦iOS è¿›å…¥è®¾ç½® &gt; é€šç”¨ &gt; å…³äºŽæœ¬æœº &gt; è¯ä¹¦ä¿¡ä»»è®¾ç½®ï¼Œå¹¶è®¾ç½®å¯¹ Charles è¯ä¹¦çš„ä¿¡ä»»ã€‚ 2.4. é…ç½® Charlesé»˜è®¤ Charles ä¸ä¼šä»£ç†ä»»ä½• HTTPS è¯·æ±‚ï¼Œéœ€è¦åœ¨ Proxy &gt; SSL Proxying Setting... ä¸­æ‰“å¼€ HTTPS ä»£ç†ï¼š æ³¨æ„ï¼ŒCharles ä»£ç† HTTPS é‡‡ç”¨ç™½åå•æœºåˆ¶ï¼Œåªæœ‰åå•ä¸­çš„åœ°å€æ‰ä¼šè¢«ä»£ç† HTTPS åè®®ã€‚å¦‚æžœæƒ³ä»£ç†å…¨éƒ¨åœ°å€çš„ HTTPSï¼Œåœ¨æ·»åŠ åœ°å€æ—¶åªéœ€è¦åœ¨ Host è¾“å…¥ * å³å¯ã€‚ 2.5. å¼€å§‹æŠ“åŒ…æ­¤æ—¶ç›´æŽ¥ä»Žæ‰‹æœºå‘èµ·ä»»ä½• HTTPS è¯·æ±‚å³å¯ï¼ŒPC ä¸Šçš„ Charles ä¼šæ˜¾ç¤ºæ‰€æœ‰ HTTPS æ•°æ®åŒ…ã€‚è‹¥æƒ³è¦åœæ­¢æŠ“åŒ…ï¼Œè¯·å…³é—­ Charles å¹¶åœ¨æ‰‹æœºä¸Šå–æ¶ˆä½¿ç”¨ä»£ç†æœåŠ¡å™¨ã€‚ 3. ä½¿ç”¨ Wireshark æŠ“å–é¦–å…ˆå®‰è£… Wiresharkï¼Œä¸‹è½½åœ°å€ï¼šå®˜ç½‘ã€‚ Wireshark å¯ä»¥ç›‘å¬ä»»ä½•ç½‘å¡ä¸­çš„æ‰€æœ‰ç½‘ç»œæµé‡ï¼Œå› æ­¤æ—¢ç„¶æˆ‘ä»¬è¦ç›‘å¬æ‰‹æœºä¸Šçš„ç½‘ç»œæµé‡ï¼Œå°±éœ€è¦å»ºç«‹ä¸€ä¸ªæ˜ å°„åˆ°æ‰‹æœºä¸Šçš„è™šæ‹Ÿç½‘å¡ã€‚ 3.1. å®‰è£… Xcodeç”±äºŽå»ºç«‹è™šæ‹Ÿç½‘å¡éœ€è¦ä½¿ç”¨å‘½ä»¤ rvictlï¼Œè¿™æ˜¯ Xcode å·¥å…·é“¾ä¹‹ä¸€ï¼Œæ‰€ä»¥éœ€è¦å®‰è£… Xcodeã€‚å¯ä»¥ä»Žä»Ž App Store æˆ– è¿™é‡Œ ä¸‹è½½å¹¶å®‰è£… Xcodeã€‚ ä¸‹è½½å¹¶å®‰è£…ä¹‹åŽï¼Œè¯·è‡³å°‘è¿è¡Œä¸€æ¬¡ Xcode ï¼ŒXcode ä¼šè‡ªåŠ¨å®‰è£…å¿…è¦çš„å·¥å…·ã€‚ 3.2. èŽ·å–è®¾å¤‡ UDIDé¦–å…ˆï¼Œéœ€è¦èŽ·å–è®¾å¤‡çš„ UDIDã€‚å°†æ‰‹æœºé€šè¿‡æ•°æ®çº¿è¿žæŽ¥ç”µè„‘ï¼Œæ‰“å¼€ iTunesï¼Œå•å‡» iPhone çš„åºåˆ—å·ï¼š è®¾å¤‡çš„ UDID å°±ä¼šå‡ºçŽ°ï¼Œå³é”®å¯ä»¥å¤åˆ¶ï¼š 3.3. é…ç½®è™šæ‹Ÿç½‘å¡åœ¨ç»ˆç«¯è¿è¡Œå‘½ä»¤ï¼š 123$ rvictl -s [YOUR UDID]Starting device [YOUR UDID] [SUCCEEDED] with interface rvi0 å¯ä»¥çœ‹åˆ°ï¼Œè™šæ‹Ÿç½‘å¡ rvi0 å·²ç»å»ºç«‹ã€‚ 3.4. å¼€å§‹æŠ“åŒ…æ‰“å¼€ Wiresharkï¼Œé€‰æ‹©è™šæ‹Ÿç½‘å¡ rvi0 å³å¯å¼€å§‹æŠ“åŒ…ã€‚ åœ¨æ‰‹æœºä¸Šå‘é€ä»»æ„æ•°æ®åŒ…å³å¯ã€‚ 3.5. åœæ­¢æŠ“åŒ…åœæ­¢æŠ“åŒ…åŽï¼Œé™¤äº†å…³é—­ Wiresharkï¼Œè¿˜éœ€è¦ç§»é™¤è™šæ‹Ÿç½‘å¡ã€‚ åœ¨ç»ˆç«¯è¿è¡Œå‘½ä»¤ï¼š 123$ rvictl -x [YOUR UDID]Stopping device [YOUR UDID] [SUCCEEDED]]]></content>
  </entry>
  <entry>
    <title><![CDATA[Bilibili Watchlater Plus : è®© B ç«™çš„ç¨åŽå†çœ‹æ›´å¥½ç”¨]]></title>
    <url>%2Fposts%2F7a6d%2F</url>
    <content type="text"><![CDATA[B ç«™çš„ç¨åŽå†çœ‹åŠŸèƒ½æ˜Žæ˜¾æ˜¯ä¸€ä¸ªåŠæˆå“ï¼Œæœ‰è®¸å¤šä¸å®Œå–„çš„åœ°æ–¹ï¼Œå…¶ä¸­æœ€è‡´å‘½çš„å°±æ˜¯æ— æ³•åŠ å…¥å’Œæ’­æ”¾ç•ªå‰§ã€‚æœ€è¿‘æˆ‘ç»ˆäºŽå¿å—ä¸äº†å®ƒçš„è¯¸å¤šé—®é¢˜ï¼Œç€æ‰‹å¼€å‘äº†ä¸€ä¸ªæ²¹çŒ´è„šæœ¬ Bilibili Watchlater Plusï¼Œå¯¹ç¨åŽå†çœ‹åŠŸèƒ½è¿›è¡Œäº†ä¸€ç•ªæ”¹é€ ã€‚å¼€æºåœ°å€ï¼šbilibili-watchlater-plusã€‚ 1. é—®é¢˜B ç«™çš„ç¨åŽå†çœ‹åŠŸèƒ½ä¸»è¦æœ‰ä¸‰ç‚¹è®©æˆ‘è§‰å¾—ä¸èƒ½å¿å—ï¼š æ— æ³•å°†ç•ªå‰§åŠ å…¥ç¨åŽå†çœ‹ã€‚ å³ä½¿é€šè¿‡ä¸€äº›ç‰¹åˆ«çš„æ–¹å¼å°†ç•ªå‰§åŠ å…¥äº†ç¨åŽå†çœ‹ï¼Œä¹Ÿæ— æ³•æ’­æ”¾ã€‚ ç¨åŽå†çœ‹æŒ‰é’®æ²¡æœ‰åˆå§‹çŠ¶æ€ã€‚ ä¸€å¥è¯æ€»ç»“ç†æƒ³çŠ¶æ€å°±æ˜¯ï¼Œå·²åŠ å…¥çš„è§†é¢‘åˆå§‹æ˜¾ç¤ºå‹¾é€‰ï¼Œæ²¡åŠ å…¥çš„è§†é¢‘åˆå§‹ä¸å‹¾é€‰ï¼›ç‚¹å‡»æœªå‹¾é€‰çš„æŒ‰é’®ï¼Œå°†è§†é¢‘åŠ å…¥ç¨åŽå†çœ‹ï¼›ç‚¹å‡»å·²å‹¾é€‰çš„æŒ‰é’®ï¼Œå°†è§†é¢‘ç§»å‡ºç¨åŽå†çœ‹ã€‚ ç„¶åŽ B ç«™ç›®å‰æ— è®ºä¸€ä¸ªè§†é¢‘æœ‰æ²¡æœ‰è¢«åŠ å…¥ç¨åŽå†çœ‹ï¼Œå®ƒçš„æŒ‰é’®éƒ½æ˜¯åŒä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢çš„ç¬¬ä¸€å¼ å›¾ã€‚ æ²¡åŠ å…¥ç¨åŽå†çœ‹çš„è§†é¢‘çš„é»˜è®¤åˆå§‹çŠ¶æ€ï¼š å·²è¢«åŠ å…¥ç¨åŽå†çœ‹çš„è§†é¢‘çš„ç†æƒ³åˆå§‹çŠ¶æ€ï¼š 2. åˆçº§é˜¶æ®µåœ¨å¼€å‘è¿™ä¸ªæ­£å¼ç‰ˆæœ¬ä¹‹å‰ï¼Œæˆ‘æ›¾å†™è¿‡ä¸€ä¸ªä¸´æ—¶ç”¨ç”¨çš„ç‰ˆæœ¬ï¼Œä¸»è¦ä½œç”¨äºŽé¦–é¡µå³ä¸Šè§’çš„åŠ¨æ€æ‚¬æµ®çª—ï¼Œå› ä¸ºé‚£æ˜¯æˆ‘ç”¨çš„æœ€å¤šçš„åœ°æ–¹ã€‚ è¿™ä¸ªç‰ˆæœ¬å¯ä»¥ä»Žè¿™é‡ŒèŽ·å–ï¼šBilibili Watchlater Plus 0.0.1ã€‚ å½“æ—¶è§£å†³äº†åœ¨åŠ¨æ€æ‚¬æµ®çª—ä¸Šå·²ç»å¯ä»¥å°†ç•ªå‰§åŠ å…¥ç¨åŽå†çœ‹ï¼Œç¨åŽå†çœ‹æŒ‰é’®æœ‰åˆå§‹çŠ¶æ€ã€‚å¯¹äºŽåœ¨ç¨åŽå†çœ‹ä¸­çš„ç•ªå‰§è§†é¢‘ï¼Œåˆ™æ˜¯é‡‡ç”¨ç›´æŽ¥è·³è½¬åˆ°æ’­æ”¾é“¾æŽ¥çš„æ–¹å¼è§£å†³ã€‚ ä¸Šè¿°çš„ä¸´æ—¶ç‰ˆæœ¬è®©æˆ‘åœ¨ä¸€æ®µæ—¶é—´å†…æœ‰äº†æ¯”è¾ƒèˆ’é€‚çš„ä½¿ç”¨ä½“éªŒï¼Œä½†æ˜¯è¿‘æ®µæ—¶é—´ B ç«™æ›´æ”¹äº†ä¸€äº› UI å’Œ API æŽ¥å£ï¼ŒåŽŸæ¥çš„è„šæœ¬å¤±æ•ˆäº†ã€‚æ­£å·§å‡æœŸæ—¶é—´æ¯”è¾ƒå……è£•ï¼Œæˆ‘å°±å€Ÿæ­¤æœºä¼šå¼€å‘äº†ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ç‰ˆæœ¬ã€‚ 3. å®žçŽ°3.1. å¦‚ä½•å®žçŽ°é¦–å…ˆè€ƒè™‘å„ç§éœ€æ±‚è¯¥å¦‚ä½•å®žçŽ°ã€‚ è®©ç•ªå‰§ä¹Ÿå¯ä»¥åŠ å…¥ç¨åŽå†çœ‹ã€‚ é¦–å…ˆæ˜¯å¯è¡Œæ€§ã€‚B ç«™çš„ç¨åŽå†çœ‹ API éœ€è¦ aid ï¼ˆå³è§†é¢‘ IDï¼‰ä½œä¸ºå‚æ•°ï¼Œè€Œç•ªå‰§çš„å•é›† ID æ˜¯ epidã€‚åªéœ€è¦é€šè¿‡ç•ªå‰§æ’­æ”¾é¡µå°±å¯ä»¥èŽ·å– epid å¯¹åº”çš„ aidï¼Œå†è°ƒç”¨ API å°±å¯ä»¥å°†ç•ªå‰§åŠ å…¥ç¨åŽå†çœ‹ã€‚ ç„¶åŽæ˜¯å¦‚ä½•å®žçŽ°ã€‚ç›®å‰å¸¸è§„è§†é¢‘åœ¨å°é¢å›¾å³ä¸‹è§’éƒ½ä¼šæœ‰ä¸€ä¸ªç¨åŽå†çœ‹æŒ‰é’®ï¼Œç‚¹å‡»å°±å¯ä»¥æ·»åŠ æˆ–åˆ é™¤ç¨åŽå†çœ‹ï¼Œç„¶åŽç•ªå‰§çš„å°é¢å´æ²¡æœ‰ã€‚å› æ­¤å®žçŽ°ç•ªå‰§åŠ å…¥ç¨åŽå†çœ‹éžå¸¸ç®€å•ï¼Œåªéœ€è¦ç»™ç•ªå‰§çš„å°é¢ä¹Ÿæ·»åŠ ä¸€ä¸ªç¨åŽå†çœ‹æŒ‰é’®å°±å¯ä»¥äº†ã€‚ ç¨åŽå†çœ‹æŒ‰é’®çš„åˆå§‹çŠ¶æ€ã€‚ åœ¨ä¹‹å‰æåˆ°çš„åˆçº§ç‰ˆæœ¬é‡Œï¼Œæˆ‘è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•éžå¸¸ç²—æš´ï¼šé¦–å…ˆé€šè¿‡ API ç¡®å®šæ¯ä¸ªè§†é¢‘æ˜¯å¦å·²ç»åŠ å…¥äº†ç¨åŽå†çœ‹ï¼Œå¯¹äºŽå·²ç»åŠ å…¥ç¨åŽå†çœ‹çš„è§†é¢‘ï¼Œç»™å®ƒçš„æŒ‰é’®æ·»åŠ ä¸€ä¸ª class æ”¹å˜æ ·å¼ã€‚ è¿™æ ·çš„å¥½å¤„æ˜¯éžå¸¸ç®€å•ç²—æš´ï¼Œå‡ è¡Œå°±å¯ä»¥å†™å®Œæ‰€æœ‰é€»è¾‘ã€‚ä½†æ˜¯åå¤„ä¹Ÿæ˜¾è€Œæ˜“è§ï¼ŒæŒ‰é’®ä»…ä»…æ˜¯æ ·å¼æ”¹å˜äº†ï¼ŒåŠŸèƒ½å´æ²¡æœ‰ï¼Œå¯¼è‡´ç‚¹å‡»ä¸€ä¸ªå·²å‹¾é€‰çš„æŒ‰é’®ç»“æžœå´åˆæ˜¯å°†è§†é¢‘åŠ å…¥ç¨åŽå†çœ‹ï¼Œè€Œä¸æ˜¯å‹¾é€‰æŒ‰é’®åº”è¯¥åšçš„â€å°†è§†é¢‘ç§»å‡ºç¨åŽå†çœ‹â€œã€‚ç®€å•çš„æ¥è¯´å°±æ˜¯æŒ‰é’®åŠŸèƒ½å’Œæ ·å¼çš„ä¸ç»Ÿä¸€ã€‚ è¦å®žçŽ°æŒ‰é’®åŠŸèƒ½å’Œæ ·å¼çš„ç»Ÿä¸€ï¼Œåªèƒ½æŠ›å¼ƒåŽŸæœ‰çš„æŒ‰é’®ï¼Œè‡ªå·±ä»Žå¤´å¼€å§‹ä¸ºæ¯ä¸ªè§†é¢‘æ·»åŠ ç¨åŽå†çœ‹æŒ‰é’®ã€‚è¿™æ ·æŒ‰é’®çš„æ ·å¼ã€åŠŸèƒ½éƒ½å¯ä»¥è‡ªå·±æŽ§åˆ¶ï¼Œå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯éœ€è¦ä¸€å®šçš„å·¥ä½œé‡ã€‚ å¯ä»¥åœ¨ç¨åŽå†çœ‹æ’­æ”¾ç•ªå‰§ã€‚ è¿™ä¸ªæ˜¯æœ€è®©æˆ‘å¤´ç–¼çš„åœ°æ–¹å°±æ˜¯å¦‚ä½•åœ¨ç¨åŽå†çœ‹ä¸­æ’­æ”¾ç•ªå‰§ã€‚æœ€åŽæˆ‘å‘çŽ° Hack B ç«™çš„è§†é¢‘æ’­æ”¾å™¨ä½¿ä¹‹èƒ½æ’­æ”¾ç•ªå‰§å¤ªéº»çƒ¦äº†ï¼Œä¸å¦‚æˆ‘è‡ªå·±å®žçŽ°ä¸€ä¸ªç¨åŽå†çœ‹çš„æ’­æ”¾é€»è¾‘ã€‚ åŽŸæœ¬çš„æ’­æ”¾é€»è¾‘æ˜¯ B ç«™åœ¨ä¸€ä¸ªä¸“ä¸ºç¨åŽå†çœ‹ç¼–å†™çš„å•é¡µé¢åº”ç”¨ä¸­ï¼Œé€ä¸ªæ’­æ”¾è§†é¢‘ï¼Œå½“é‡åˆ°ç•ªå‰§æ—¶å°±æ— æ³•è§£æžå¹¶å¼¹çª—ã€‚ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œæˆ‘è®¾å®šçš„æ–°é€»è¾‘æ˜¯ï¼Œç‚¹å‡»ç¨åŽå†çœ‹çš„è§†é¢‘ç›´æŽ¥è·³è½¬åˆ°å¸¸è§„è§†é¢‘æ’­æ”¾é¡µé¢ï¼Œå¹¶åœ¨é¡µé¢å·¦è¾¹æ·»åŠ ä¸€ä¸ªæ±‰å ¡èœå•ï¼Œå¯ä»¥çœ‹åˆ°å¹¶è·³è½¬åˆ°å…¶ä»–ç¨åŽå†çœ‹ã€‚ 3.2. ç›‘å¬é¡µé¢å˜åŒ–ä¸Šé¢æåˆ°ï¼Œæˆ‘ä»¬éœ€è¦æ›¿æ¢ã€æ·»åŠ æŒ‰é’®ï¼Œä½†è¿™ä¼šé‡åˆ°å‡ ä¸ªé—®é¢˜ï¼š ç”±äºŽæ²¹çŒ´è„šæœ¬å¯èƒ½åœ¨ä»»ä½•æ—¶å€™æ’å…¥é¡µé¢ï¼Œæ­¤æ—¶é¡µé¢çš„çŠ¶æ€ä¸ç¡®å®š é¡µé¢å¯èƒ½åœ¨ä»»ä½•æ—¶å€™æ›´æ–°ï¼Œæ¯”å¦‚åŠ è½½ä¸­çš„é¡µé¢æˆ–è€…ç”¨æˆ·ç‚¹å‡»å¯¼è‡´é¡µé¢å˜åŒ– æœ€ç†æƒ³çš„å®žçŽ°æ˜¯ï¼Œç›‘å¬é¡µé¢çš„å˜åŒ–ã€‚è¿™é‡Œæå‡ºä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘éœ€è¦å¯»æ‰¾é¡µé¢ä¸­æ‰€æœ‰çš„æ—§æŒ‰é’®ï¼Œæ›¿æ¢æˆæ–°çš„è‡ªå®šä¹‰çš„æŒ‰é’®ã€‚åˆ©ç”¨ HTML æä¾›çš„ MutationObserver APIï¼Œæˆ‘ä»¬å¯ä»¥è®¢é˜…æŸä¸ªæ ¹èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å˜åŒ–ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å˜åŒ–çš„èŠ‚ç‚¹ä¸‹å¯»æ‰¾æœ‰æ²¡æœ‰æ—§æŒ‰é’®å°±è¡Œäº†ã€‚ ä½†æ˜¯çŽ°åœ¨å‡ºçŽ°äº†å¦ä¸€ä¸ªéœ€æ±‚ï¼šæ·»åŠ æŒ‰é’®ã€‚ æ·»åŠ æŒ‰é’®çš„é€»è¾‘æ˜¯ï¼Œæ‰¾åˆ°ä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œè¿™ä¸ªçˆ¶å…ƒç´ åŽŸæœ¬åº”è¯¥æœ‰ç¨åŽå†çœ‹æŒ‰é’®ï¼Œè€ŒçŽ°åœ¨å´æ²¡æœ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å‘çˆ¶å…ƒç´ é‡Œæ·»åŠ è‡ªå®šä¹‰çš„æŒ‰é’®ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æœç´¢çš„æ£€æŸ¥ç‚¹æœ‰ä¸¤ä¸ªï¼Œçˆ¶å…ƒç´ å’Œæ˜¯å¦æœ‰å­å…ƒç´ ï¼Œåªæœ‰â€æ‰¾åˆ°çˆ¶å…ƒç´ â€œå’Œâ€æŒ‰é’®å­å…ƒç´ ä¸å­˜åœ¨â€œåŒæ—¶æ»¡è¶³æ—¶ï¼Œæ‰æ·»åŠ è‡ªå®šä¹‰æŒ‰é’®ã€‚ è®©æˆ‘ä»¬å›žæƒ³åˆšåˆšæåˆ°çš„æ–¹æ³•ï¼Œé¦–å…ˆ MutationObserver ä¼šæä¾›ä¸€ä¸ªæœ‰æ›´æ”¹çš„èŠ‚ç‚¹ï¼Œå¦‚æžœç›®æ ‡çˆ¶å…ƒç´ å’Œå­å…ƒç´ éƒ½ä½äºŽè¿™ä¸ªèŠ‚ç‚¹ä¸‹ï¼Œé‚£ä¹ˆæ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„æœç´¢åˆ°ã€‚ä½†å¦‚æžœ MutationObserver å›žè°ƒçš„èŠ‚ç‚¹ä½äºŽçˆ¶å…ƒç´ å’Œå­å…ƒç´ ä¹‹é—´ï¼Œæœç´¢å°±ä¼šå˜å¾—ç•¥å¾®å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é€šçŸ¥å‘ä¸¤ä¸ªæ–¹å‘æœç´¢ã€‚ æœ€ç»ˆå¦¥åäº†ä¸Šè¿°ä¸¤ç§æƒ…å†µï¼Œä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œä½¿ç”¨ MutationObserver ç›‘å¬è¿™ä¸ª document.body çš„å˜åŒ–ã€‚åœ¨æ¯æ¬¡å˜åŒ–å‘ç”Ÿä¹‹åŽï¼ŒéåŽ†æ•´ä¸ªæ–‡æ¡£å¯»æ‰¾ç›®æ ‡èŠ‚ç‚¹ã€‚ è¿™æ ·çš„åšæ³•å¥½å¤„æ˜¯ï¼ŒéåŽ†çš„é€»è¾‘éžå¸¸ç®€å•ï¼Œç›´æŽ¥ä½¿ç”¨ JQuery å°±å¯ä»¥åšåˆ°ã€‚åå¤„æ˜¯æ›´åŠ è€—æ—¶ï¼Œå› ä¸ºæ¯æ¬¡æ•´ä¸ªæ–‡æ¡£çš„ä»»æ„ä¸€å¤„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå“ªæ€•å˜åŒ–çš„åœ°æ–¹ä¸Žæˆ‘ä»¬çš„ç›®æ ‡æ¯«æ— å…³ç³»ï¼Œéƒ½éœ€è¦éåŽ†æ•´ä¸ªæ–‡æ¡£æ ‘ï¼Œè€Œä¸”é€šå¸¸æ•´ä¸ª HTML æ–‡æ¡£ä¼šåœ¨çŸ­æ—¶é—´å†…é¢‘ç¹åœ°æ›´æ–°ã€‚ä¸ºäº†è§£å†³æ€§èƒ½é—®é¢˜ï¼Œä½¿ç”¨ Lodash çš„ debounce å‡½æ•°å¯¹å›žè°ƒåŽ»æŠ–åŠ¨ï¼Œè¿™æ ·çŸ­æ—¶é—´å†…çš„é¢‘ç¹æ›´æ–°åªä¼šè§¦å‘ä¸€æ¬¡æœç´¢ã€‚ å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516new MutationObserver((mutationList) = &#123; for (const mutation of mutationList)&#123; // åªå…³å¿ƒæ·»åŠ èŠ‚ç‚¹çš„å˜åŒ– if (mutation.addedNodes.length) &#123; // 200 æ¯«ç§’å†…çš„é¢‘ç¹è°ƒç”¨åªä¼šè§¦å‘ä¸€æ¬¡ _.debounce(() =&gt; &#123; $('...').each((index, ele) =&gt; &#123; // æ‰¾åˆ°çš„ç›®æ ‡ &#125;); &#125;, 200); &#125; &#125;&#125;).observe(document.body, &#123; childList: true, subtree: true&#125;); 3.3. å¼‚æ­¥æ›´æ–°çŠ¶æ€åœ¨å¼€å‘ä¸­è¿˜é‡åˆ°ä¸€ä¸ªå°æƒ…æ™¯ï¼šçŽ°åœ¨æ‰€æœ‰çš„ç¨åŽå†çœ‹æŒ‰é’®éƒ½æˆåŠŸæ›¿æ¢æˆäº†è‡ªå®šä¹‰çš„æŒ‰é’®ï¼Œç„¶è€Œå› ä¸ºç¨åŽå†çœ‹åˆ—è¡¨æ˜¯å¼‚æ­¥èŽ·å–çš„ï¼Œæ²¡åŠžæ³•åŒæ­¥åœ°ç»™è¿™äº›æŒ‰é’®è®¾ç½®æ˜¯å¦å‹¾é€‰çš„çŠ¶æ€ã€‚ é‚£ä¹ˆå¦‚ä½•å¼‚æ­¥åœ°ç»™æŒ‰é’®ä»¬æ›´æ–°çŠ¶æ€å‘¢ï¼Ÿ ä¸€ä¸ªæœ€ç®€å•ç²—æš´çš„æ€è·¯å°±æ˜¯ï¼šæŒ‰é’®é»˜è®¤éƒ½æ˜¯ä¸å‹¾é€‰çš„çŠ¶æ€ã€‚æ­¤æ—¶åŽ»èŽ·å–ç¨åŽå†çœ‹åˆ—è¡¨ï¼Œå¾…æ•°æ®è¿”å›žåŽï¼Œå†ä»Žé¡µé¢ä¸­æ‰¾å›žæ‰€æœ‰çš„æŒ‰é’®ï¼Œä¾æ¬¡ç»™ä»–ä»¬åˆ†é…çŠ¶æ€ã€‚ 12345678910111213for (const oldButton of oldButtons) &#123; const button = document.createElement('div'); button.aid = '...'; // é»˜è®¤ä¸å‹¾é€‰ button.checked = false; button.className = 'watch-later-plus-button'; oldButton.replaceWith(button);&#125;const watchlaterList = await getWatchlaterList();$('.watch-later-plus-button') .filter('...') // æ ¹æ® watchlaterList è¿‡æ»¤å‡ºéœ€è¦å‹¾é€‰çš„æŒ‰é’® .each((_, ele) =&gt; ele.checked = true); ä¸Šé¢çš„æƒ³æ³•å¯ä»¥é€šè¿‡ä¿å­˜æŒ‰é’®å¼•ç”¨çš„æ–¹å¼å‡å°‘ä¸€æ¬¡éåŽ†ï¼š 12345678910111213const newButtons = [];for (const oldButton of oldButtons) &#123; const button = document.createElement('div'); button.aid = '...'; // é»˜è®¤ä¸å‹¾é€‰ button.checked = false; newButtons.push(buttons); oldButton.replaceWith(button);&#125;const watchlaterList = await getWatchlaterList();buttons.filter('...') // æ ¹æ® watchlaterList è¿‡æ»¤å‡ºéœ€è¦å‹¾é€‰çš„æŒ‰é’® .forEach((ele) =&gt; ele.checked = true); ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåœ¨åˆ›å»ºæŒ‰é’®ä¹‹åŽå•ç‹¬ç»´æŠ¤äº†ä¸€ç³»åˆ—ç”¨äºŽæ›´æ–°çŠ¶æ€çš„è¯­å¥ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é—­åŒ…ä»¥åŠ Promise çš„ç‰¹æ€§ï¼Œå†™å‡ºè¿™æ ·çš„æ–¹æ³•ï¼š 12345678910111213141516171819const watchLaterList = (() =&gt; &#123; let promise; return () =&gt; &#123; if (!promise) &#123; promise = getWatchLaterList(); &#125; return promise; &#125;;&#125;)();for (const oldButton of oldButtons) &#123; const button = document.createElement('div'); button.aid = '...'; watchLaterList().then(list =&gt; &#123; button.checked = list.includes(button.aid); &#125;); buttons.push(buttons); oldButton.replaceWith(button);&#125; è¿™æ ·æ›´æ–°çŠ¶æ€çš„é€»è¾‘å°±ä¸éœ€è¦å•ç‹¬ç»´æŠ¤äº†ã€‚ 4. çŽ°çŠ¶å’Œåæ§½ä½¿ç”¨è„šæœ¬ä¹‹åŽï¼Œä¸Šé¢æåˆ°çš„ Bç«™ç¨åŽå†çœ‹çš„é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ï¼Œç‰¹åˆ«æ˜¯ç•ªå‰§ä¹Ÿæ”¯æŒç¨åŽå†çœ‹ä¹‹åŽï¼Œä½¿ç”¨ä½“éªŒéžå¸¸æ£’ã€‚ ä¸è¦å«Œå¼ƒæˆ‘çš„ UIï¼Œåˆä¸æ˜¯ä¸èƒ½ç”¨ã€‚ä¹‹åŽ B ç«™å†æ”¹ UI æˆ– API çš„æ—¶å€™å†æ›´æ–°å§ã€‚ åæ§½ä¸€ä¸‹ B ç«™çš„å‰ç«¯ï¼Œå†™ä¸ªæ–°ç‰ˆæœ¬çš„ UI è¿˜åªæœ‰æ’­æ”¾ç•Œé¢æ‰æœ‰ï¼Œè¿˜æ˜¯å¸¸è§„è§†é¢‘çš„æ’­æ”¾ç•Œé¢æœ‰æ–° UI è€Œç•ªå‰§çš„æ’­æ”¾ç•Œé¢æ²¡æœ‰ï¼›å…¶ä»–åœ°æ–¹éƒ½æ˜¯æ™®é€šçš„å¤šé¡µåº”ç”¨ï¼Œä½†æ˜¯åˆ°äº†ç¨åŽå†çœ‹å’Œä¸ªäººç©ºé—´ç¡®å®žå•é¡µé¢åº”ç”¨ï¼›å°±ä¸€ä¸ªç¨åŽå†çœ‹çš„æŒ‰é’®çš„é€»è¾‘ï¼Œåœ¨é¦–é¡µã€åŠ¨æ€æ‚¬æµ®çª—ã€åŠ¨æ€é¦–é¡µã€ç©ºé—´é¡µé¢çš„å®žçŽ°å±…ç„¶éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨çš„ Badge]]></title>
    <url>%2Fposts%2F5d4d%2F</url>
    <content type="text"><![CDATA[åœ¨å¼€æºé¡¹ç›®çš„ Readme ä¸­æ·»åŠ  Badge å·²ç»æˆä¸ºäº†ä¸€ç§æµªæ¼«ã€‚è¿™é‡Œåˆ—ä¸¾ä¸€äº›ä¸ªäººå¸¸ç”¨çš„ Badgeï¼Œä¾›æ—¥åŽå‚è€ƒã€‚ ä¸»è¦ä½¿ç”¨çš„æ˜¯ shields.io æä¾›çš„æœåŠ¡ï¼Œé€šè¿‡å®ƒèŽ·å¾—çš„ Badge å¯ä»¥å®šåˆ¶æ ·å¼ã€é¢œè‰²ã€å›¾æ ‡ç­‰ã€‚ 1. ä»“åº“çŠ¶æ€ Travis CI 1![](https://img.shields.io/travis/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) Coveralls 1![](https://img.shields.io/coveralls/$&#123;VSC_TYPE&#125;/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) Code Climate maintainability 1![](https://img.shields.io/codeclimate/maintainability/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) 2. GitHub GitHub issues 1![](https://img.shields.io/github/issues-raw/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) GitHub license 1![](https://img.shields.io/github/license/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) GitHub release 1![](https://img.shields.io/github/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) Contributions welcome 1![](https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat-square) 3. Npm Npm package vulnerabilities 1![](https://img.shields.io/snyk/vulnerabilities/npm/$&#123;PACKAGE&#125;.svg?style=flat-square) Dependencies 12![](https://img.shields.io/david/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square)![](https://img.shields.io/david/dev/$&#123;USER&#125;/$&#123;REPO&#125;.svg?style=flat-square) Npm download 1![](https://img.shields.io/npm/dt/$&#123;PACKAGE&#125;.svg) Npm package version 1![](https://img.shields.io/npm/v/$&#123;PACKAGE&#125;.svg?style=flat-square)]]></content>
      <categories>
        <category>Development</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[115 è´¦å·å…±äº«ä¹‹è·¯]]></title>
    <url>%2Fposts%2Fdbf%2F</url>
    <content type="text"><![CDATA[115 çš„ç¦»çº¿ä¸‹è½½åŠŸèƒ½ç¡®å®žå¼ºæ‚ï¼Œä½†æ˜¯ 500 å…ƒä¸€å¹´çš„ä¼šå‘˜ä»·æ ¼ä¹Ÿä¸ä¾¿å®œã€‚äºŽæ˜¯æˆ‘å°±ä¸Žä¸‰ä¸ªæœ‹å‹ä¸€èµ·åˆä¹°äº†ä¸€å¹´ä¼šå‘˜ï¼Œå‡†å¤‡å››äººå…±äº«ä½¿ç”¨ã€‚ä½†æ˜¯ 115 çš„å•ç‚¹ç™»å½•å´ç»™å…±äº«å¸¦æ¥äº†å¾ˆå¤šé™åˆ¶ï¼ŒäºŽæ˜¯æˆ‘ä»¬æŽ¢ç´¢äº†è¯¸å¤šå…±äº«æ–¹æ¡ˆï¼ŒæœŸé—´åŽ†ç¨‹å°±ä¾¿æˆäº†è¿™ç¯‡åšæ–‡ã€‚ 1. 115 çš„é™åˆ¶ å•ç‚¹ç™»å½• 115 åœ¨æ‰€æœ‰å®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬ç½‘é¡µç«¯ï¼ŒPC ç«¯ï¼ˆæœ¬è´¨å°±æ˜¯ç½‘é¡µç«¯ï¼‰å’Œæ‰‹æœºç«¯éƒ½å®žè¡Œå•ç‚¹ç™»å½•ã€‚è¿™å°±æ„å‘³ç€ï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå®¢æˆ·ç«¯é€šè¿‡è´¦å·å¯†ç ç™»å½•æˆåŠŸï¼Œä¹‹å‰çš„æ‰€æœ‰ç™»å½•éƒ½ä¼šå¤±æ•ˆï¼Œæ— è®ºæ˜¯ä»€ä¹ˆç«¯ã€‚ 115 æµè§ˆå™¨ åœ¨ç½‘é¡µç«¯åªèƒ½é€šè¿‡æ‰‹æœºç«¯æ‰«ç æ‰èƒ½ç™»é™†ï¼Œåœ¨ 115 æµè§ˆå™¨ä¸Šå¯ä»¥é€šè¿‡è´¦å·å¯†ç ç™»å½•ï¼Œä½†æ˜¯åˆæ¬¡ç™»å½•ä¾ç„¶éœ€è¦æ‰‹æœºæŽ¥æ”¶éªŒè¯ç ã€‚ä¸è¿‡æ•´ä½“æ¥è¯´å°± 115 æœåŠ¡çš„ä½¿ç”¨ä¸Šï¼Œ115 æµè§ˆå™¨è¿˜æ˜¯è¦ä¼˜äºŽ Chromeï¼šåœ¨ 115 æµè§ˆå™¨ä¸Šä¸‹è½½ 115 èµ„æºå¯ä»¥æ”¯æŒå¤šçº¿ç¨‹ä¸‹è½½å’Œæ–­ç‚¹ç»­ä¼ ï¼›ä¸”åœ¨ 115 æµè§ˆå™¨ä¸Šæ‰“å¼€ç£åŠ›é“¾æŽ¥å¯ä»¥ç›´æŽ¥å¯åŠ¨ 115 ç¦»çº¿ä¸‹è½½ã€‚ä½†æ˜¯ 115 æµè§ˆå™¨ Chromium ç‰ˆæœ¬è¿˜åœç•™åœ¨ 54ï¼Œä¸”æ ‡ç­¾é¡µå¼€çš„ä¸€å¤šå°±å¡é¡¿ï¼Œæ‰€ä»¥ä¹Ÿåªèƒ½å½“åš 115 å®¢æˆ·ç«¯ç”¨ã€‚ 2. çžŽæžé˜¶æ®µä¸€å¼€å§‹æˆ‘ä»¬å››äººå¹¶æ²¡æœ‰æƒ³å‡ºå¦‚ä½•ç ´è§£ 115 çš„å•ç‚¹ç™»å½•é™åˆ¶ã€‚å› æ­¤ä¸´æ—¶çš„å…±äº«æ–¹æ¡ˆæ˜¯â€œäºŒçº§ç¦»çº¿ä¸‹è½½â€ã€‚å…·ä½“å¦‚ä¸‹ï¼š æˆ‘ä»¬åœ¨æ ¡å†…æœ‰ä¸€å°å…¬ç”¨ç”µè„‘ï¼Œ24 å°æ—¶å¼€æœºå¹¶ä¿æŒ 115 ç™»å½•çŠ¶æ€ã€‚ ä»»ä½•äººæœ‰ä¸‹è½½éœ€æ±‚æ—¶ï¼Œå°±é€šè¿‡è¿œç¨‹æ¡Œé¢è¿žæŽ¥å…¬ç”¨ç”µè„‘ï¼Œå°†èµ„æºä¸‹è½½åˆ°å…¬ç”¨ç”µè„‘ä¸Šã€‚ å…¬ç”¨ç”µè„‘ä¸‹è½½ç»“æŸåŽï¼Œåˆ©ç”¨æ ¡å›­çš„ç™¾å…†å†…ç½‘ï¼Œé€šè¿‡ FTP ä¼ å›žè‡ªå·±çš„ç”µè„‘ã€‚ è¿™å½“ç„¶æœ‰è¯¸å¤šé™åˆ¶ï¼š åœ¨å…¬ç½‘çŽ¯å¢ƒä¸‹ï¼Œæ— è®ºæ˜¯è¿œç¨‹æ¡Œé¢æŽ§åˆ¶å†…ç½‘çš„å…¬ç”¨ç”µè„‘ï¼Œè¿˜æ˜¯ FTP ä»Žå†…ç½‘å…¬ç”¨ç”µè„‘å–ä¸‹è½½èµ„æºéƒ½æ¯”è¾ƒå›°éš¾ã€‚ è¿œç¨‹æ¡Œé¢æ˜¯æŠ¢å å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäººåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šè¢«å¦ä¸€ä¸ªç™»å½•çš„äººæŒ¤ä¸‹åŽ»ã€‚ â€œäºŒçº§ç¦»çº¿ä¸‹è½½â€æ°¸è¿œè¿˜æ˜¯è¦å¤šä¸€æ­¥ï¼Œéžå¸¸éº»çƒ¦ã€‚ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿä»˜å‡ºäº†ä¸€äº›åŠªåŠ›ï¼š é€šè¿‡å†…ç½‘ç©¿é€ï¼Œåœ¨å…¬ç½‘ä¹Ÿèƒ½è½»æ¾è®¿é—®å…¬ç”¨ç”µè„‘ã€‚ä½†æ˜¯æˆ‘çš„æœåŠ¡å™¨æ°´ç®¡å¤ªå°ï¼Œç”¨ FTP å–å›žèµ„æºçš„é€Ÿåº¦å¤ªæ…¢ã€‚ ä¸ºäº†è§£å†³è¿œç¨‹æ¡Œé¢æŠ¢å å¼çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å…¬ç”¨ç”µè„‘ä¸Šæ­å»ºäº†ä¸€ä¸ªçŠ¶æ€æœåŠ¡å™¨ï¼Œå¯ä»¥éšæ—¶æ˜¾ç¤ºå½“å‰å…¬ç”¨ç”µè„‘æœ‰æ²¡æœ‰è¢«ä½¿ç”¨ã€‚æŽ¥ç€åˆ¶ä½œäº†ä¸€ä¸ªè¿œç¨‹æ¡Œé¢çš„è„šæœ¬ï¼Œå…ˆå–å…¬ç”¨ç”µè„‘çŠ¶æ€ï¼Œåªæœ‰ç©ºé—²æ—¶æ‰ä¼šç»§ç»­å¯ç”¨è¿œç¨‹æ¡Œé¢ã€‚ è™½ç„¶é€šè¿‡ä¸Šé¢ä¸¤ä¸ª workaround è§£å†³äº†éƒ¨åˆ†é—®é¢˜ï¼Œä½†æ˜¯æ°´ç®¡å¤ªå°ï¼Œæ“ä½œéº»çƒ¦çš„æœ¬è´¨é—®é¢˜è¿˜æ˜¯æ²¡æœ‰å¾—åˆ°è§£å†³ï¼Œå†ç»§ç»­ä¸‹åŽ»åªæ˜¯åœ¨ç‚¹é”™çš„æŠ€èƒ½æ ‘ç»§ç»­é”™ä¸‹åŽ»è€Œå·²ã€‚ 3. åˆ©ç”¨ Cookies å…±äº«è´¦å·å…¶å®žå¾ˆå¤šäººåº”è¯¥çœ‹åˆ°è¿™é‡Œåº”è¯¥ä¼šå˜²ç¬‘æˆ‘ï¼Œå› ä¸ºç”¨ Cookies æ¥å…±äº«è´¦å·åº”è¯¥æ˜¯éžå¸¸å®¹æ˜“æƒ³åˆ°çš„äº‹æƒ…ã€‚ ç¡®å®žï¼Œå½“æ—¶æˆ‘çš„ç¬¬ä¸€ä¸ªæƒ³æ³•ä¹Ÿæ˜¯åˆ©ç”¨ Cookiesï¼Œä½†æ˜¯ç”±äºŽå­¦è‰ºä¸ç²¾ï¼Œæˆ‘æµ‹è¯•æ—¶æ˜¯é€šè¿‡ document.cookie æå– Cookiesã€‚è¿™å½“ç„¶ä¼šå¤±è´¥ï¼Œå½“æ—¶æ„šè ¢çš„æˆ‘å°±è¿™ä¹ˆæ”¾å¼ƒäº† Cookies çš„æ–¹æ³•ï¼Œè€Œèµ°äº†ä¸Šé¢çš„æ­ªè·¯ã€‚ å…·ä½“ä¸ºä½•å¤±è´¥ï¼Œä»¥åŠè½¬æœºæ˜¯ä»€ä¹ˆï¼Œä¹‹åŽå†èŠã€‚ 3.1. åŸºæœ¬åŽŸç†115 çš„ç”¨æ¥è®°å½•ç”¨æˆ·ç™»å½•çŠ¶æ€çš„ Cookies æ˜¯ Session çº§åˆ«çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦æµè§ˆå™¨è¢«å…³é—­ï¼Œè¿™äº› Cookies å°±ä¼šè¢«åˆ é™¤ã€‚ é‡ç‚¹åœ¨äºŽåˆ é™¤è€Œä¸æ˜¯å¤±æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´è¯´è¢«åˆ é™¤çš„ Cookies æ˜¯æœ‰æ•ˆçš„ã€‚äºŽæ˜¯æˆ‘ä»¬åªéœ€è¦åœ¨æˆåŠŸç™»é™†ä¹‹åŽï¼Œå°† Cookies ä¿å­˜ä¸‹æ¥ï¼Œå¹¶åœ¨éœ€è¦å…±äº«çš„æµè§ˆå™¨ä¸Šå¥—ç”¨è¿™äº› Cookies å°±å¥½äº†ã€‚å¹¶ä¸” Session çº§åˆ«çš„ Cookies æ˜¯æ²¡æœ‰è¿‡æœŸæ—¶é—´çš„ï¼Œæ‰€ä»¥ç†è®ºä¸Šåªè¦æœåŠ¡å™¨ä¸åšç›¸å…³éªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥æ°¸ä¹…ç»´æŒç™»å½•çŠ¶æ€ã€‚ 3.2. è½¬æœºä¸Šé¢æåˆ°çš„è½¬æœºå°±æ˜¯è¿™ä¸ª Chrome æ’ä»¶ï¼šEditThisCookieã€‚ è¿™ä¸ªæ’ä»¶ä¸»è¦å°±æ˜¯ä¸º Chrome Extension Cookies API æä¾›äº† GUI ç•Œé¢ï¼Œä»Žè€Œä½¿å¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡ Chrome æ‰©å±•çš„èƒ½åŠ›ç¼–è¾‘ Cookiesã€‚ ç¨åŠ å°è¯•å°±ä¼šå‘çŽ°ï¼Œé€šè¿‡ EditThisCookie æå–çš„ Cookiesï¼Œæˆ–è€…è¯´é€šè¿‡ Chrome Extension Cookies API æå–çš„ Cookies å’Œ document.cookie æå–çš„ Cookies å®Œå…¨ä¸åŒã€‚ æˆ‘ä»¬ä»¥ 115 ä¸ºä¾‹ï¼š é€šè¿‡ document.cookie æå–çš„ Cookiesï¼š é€šè¿‡ EditThisCookie æå–çš„ Cookiesï¼š è¿™é‡Œå®žé™…ä¸Šä¿å­˜ç™»å½•çŠ¶æ€çš„ä¸‰ä¸ª Cookiesï¼šUIDã€CID å’Œ SEID åœ¨å‰è€…éƒ½æ‰¾ä¸åˆ°ï¼Œåè€Œä¸€äº›æ— å…³ç´§è¦çš„ Cookies éƒ½èƒ½èŽ·å–åˆ°ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä¸€äº›å…³é”®çš„ Cookies ä¸Šï¼Œé€šå¸¸ä¼šå¤šè®¾ç½®ä¸€ä¸ª flag å« HttpOnlyã€‚ æ ¹æ® MDN çš„è§£é‡Šï¼Œä¸ºé¿å…è·¨åŸŸè„šæœ¬ (XSS) æ”»å‡»ï¼Œé€šè¿‡ JavaScript çš„ document.cookie æ— æ³•è®¿é—®å¸¦æœ‰ HttpOnly æ ‡è®°çš„ Cookiesï¼Œå®ƒä»¬åªä¼šåœ¨ HTTP è¯·æ±‚æ˜¯è¢«å‘é€ç»™æœåŠ¡ç«¯ã€‚ å› æ­¤å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°ï¼Œåœ¨ 115.com åŸŸä¸‹å…±æœ‰ 7 ä¸ª Cookiesï¼Œå…¶ä¸­ 4 ä¸ªè¢«è®¾ç½®äº† HttpOnlyï¼Œå› æ­¤ document.cookie åªèƒ½èŽ·å–åˆ°å¦å¤– 3 ä¸ªï¼›è€Œ Chrome Extension Cookie API åˆ™å¯ä»¥èŽ·å–æ‰€æœ‰ Cookiesã€‚ 3.3. SyncMyCookie è¯žç”Ÿè™½ç„¶ä½¿ç”¨ EditThisCookie å·²ç»èƒ½å¤Ÿè½»æ¾çš„å¯¼å…¥å’Œå¯¼å‡º Cookiesï¼Œå®žçŽ°åˆ†äº«è´¦å·ã€‚ä½†æ˜¯æ¯æ¬¡æ›´æ–°ç™»å½•çŠ¶æ€æ—¶éƒ½éœ€å°† JSON æ ¼å¼çš„ Cookies ä¿¡æ¯åˆ†äº«ç»™åˆ«äººï¼Œä¸”å¯¹äºŽ Session çº§åˆ«çš„ Cookiesï¼Œæ¯æ¬¡æ‰“å¼€æµè§ˆå™¨éƒ½å¿…é¡»é‡æ–°å¯¼å…¥ä¸€æ¬¡ï¼Œä¸å¤Ÿæ–¹ä¾¿ã€‚ ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ç¼–å†™äº† Chrome æ’ä»¶ SyncMyCookieã€‚ å®ƒçš„å·¥ä½œåŽŸç†ä¹Ÿéžå¸¸ç®€å•ï¼Œä½¿ç”¨ Chrome Extension Cookies API ä»Žæµè§ˆå™¨æå–æŒ‡å®šåŸŸåä¸‹çš„æ‰€æœ‰ Cookiesï¼Œå¹¶å°†è¿™äº› Cookies ç»è¿‡ AES-128-CBC åŠ å¯†åŽä¿å­˜åœ¨ GitHub Gist ä¸­ã€‚è¿™é‡Œ GitHub Gist åªæ˜¯å……å½“ä¸€ä¸ªå­˜å‚¨ä½œç”¨ã€‚ åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒSyncMyCookie æä¾›äº†ä¸¤ä¸ªè‡ªåŠ¨åŒ–åŠŸèƒ½ï¼š Auto Mergeï¼šå¯ä»¥åœ¨æµè§ˆå™¨å¯åŠ¨æ—¶è‡ªåŠ¨å°†æŒ‡å®šçš„ Cookies åˆå¹¶è¿›æµè§ˆå™¨ï¼Œç‰¹åˆ«é€‚åˆ Session çº§åˆ«çš„ Cookiesã€‚ Auto Pushï¼šåœ¨æŒ‡å®šçš„ Cookies å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨æŽ¨é€ä¿å­˜ã€‚ 4. æ€»ç»“ä½¿ç”¨ SyncMyCookie å…±äº« 115 è´¦å·åŸºæœ¬åšåˆ°äº†æˆ‘èƒ½æƒ³è±¡åœ°æœ€å¥½ä½“éªŒï¼š æˆ‘åœ¨è‡ªå·±çš„ 115 æµè§ˆå™¨å®‰è£…æ’ä»¶å¹¶è®¾ç½®è‡ªåŠ¨æŽ¨é€ 115 çš„ Cookies å…±äº«è´¦å·çš„æœ‹å‹åœ¨ 115 æµè§ˆå™¨å®‰è£…æ’ä»¶å¹¶è®¾ç½®è‡ªåŠ¨åˆå¹¶ 115 çš„ Cookies æ¯ä¸ªäººéƒ½å¯ä»¥æ»¡é€Ÿä¸‹è½½ï¼Œéšæ„ä½¿ç”¨ä»»ä½•åŠŸèƒ½ã€‚ SyncMyCookie ä¹Ÿå¯ä»¥éšæ„åŒæ­¥ä»»ä½•åœ¨æµè§ˆå™¨æä¾›æœåŠ¡ï¼Œå¹¶ä½¿ç”¨ Cookies è®°å½•ç™»å½•çŠ¶æ€çš„åº”ç”¨ã€‚ç®€å•æµ‹è¯•äº†ä¸€ä¸‹ Bilibiliã€çˆ±å¥‡è‰ºã€ä¼˜é…·ã€è…¾è®¯ç­‰è§†é¢‘ç½‘ç«™éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚]]></content>
      <categories>
        <category>Trivia</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Mocha å¤ç”¨æµ‹è¯•ç”¨ä¾‹]]></title>
    <url>%2Fposts%2Fcc67%2F</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨ Mocha è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œç»å¸¸ä¼šæœ‰å¤ç”¨æµ‹è¯•ç”¨ä¾‹çš„éœ€æ±‚ã€‚ä¾‹å¦‚å®šä¹‰äº†ä¸€ç»„æµ‹è¯•ç”¨ä¾‹åŽï¼Œå¸Œæœ›åœ¨å¤šç§çŽ¯å¢ƒä¸‹éƒ½ä½¿ç”¨è¿™ç»„ç”¨ä¾‹è¿›è¡Œæµ‹è¯•ã€‚ 1. æµ‹è¯•çŽ¯å¢ƒé¦–å…ˆç®€å•åœ°æ­å»ºä¸€ä¸ªæµ‹è¯•çŽ¯å¢ƒã€‚ åˆ›å»ºé¡¹ç›®ï¼š 1234mkdir mocha-reusecd mocha-reuseyarn init -yyarn add -D mocha é¡¹ç›®ç›®å½•ç»“æž„å¦‚ä¸‹ï¼š index.js test index.test.js å…¶ä¸­ index.js å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122// index.jsmodule.exports = class Human &#123; constructor(name, age) &#123; if (typeof name === 'string') &#123; this.name = name; &#125; else if (name instanceof Buffer) &#123; this.name = name.toString(); &#125; else &#123; throw TypeError('Name can only be string or buffer'); &#125; if (typeof age === 'number') &#123; this.age = age; &#125; else if (typeof age === 'string') &#123; this.age = Number(age); &#125; else &#123; throw TypeError('Age can only be number or string'); &#125; &#125; toString() &#123; return `$&#123;this.name&#125;: $&#123;this.age&#125;`; &#125;&#125; é€»è¾‘éžå¸¸ç®€å•ï¼ŒHuman ç±»æž„é€ æ—¶éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œname æ”¯æŒ string å’Œ Bufferï¼›age æ”¯æŒ number å’Œ stringã€‚ æµ‹è¯•å†…å®¹æ˜¯ï¼Œæž„é€ ä¸€ä¸ª Human å®žä¾‹åŽæµ‹è¯• nameã€age å’Œ toString() æ˜¯å¦æ­£ç¡®ã€‚ 2. æ— å¤ç”¨ç‰ˆæœ¬ä¸ºäº†æé«˜æµ‹è¯•è¦†ç›–çŽ‡ï¼Œå¿…é¡»ä½¿ç”¨æ¯ä¸€ç§å¯èƒ½çš„å‚æ•°ç»„åˆå®žä¾‹åŒ– Humanã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667// test/index.test.jsconst assert = require('assert');const Human = require('../index');describe('Test with string name and number age', () =&gt; &#123; let human; before(() =&gt; &#123; human = new Human('A', 1); &#125;); it('Check name', () =&gt; &#123; assert(human.name === 'A'); &#125;); it('Check age', () =&gt; &#123; assert(human.age === 1); &#125;); it('Check toString', () =&gt; &#123; assert(human.toString() === 'A: 1'); &#125;);&#125;);describe('Test with buffer name and number age', () =&gt; &#123; let human; before(() =&gt; &#123; human = new Human(Buffer.from('A'), 1); &#125;); it('Check name', () =&gt; &#123; assert(human.name === 'A'); &#125;); it('Check age', () =&gt; &#123; assert(human.age === 1); &#125;); it('Check toString', () =&gt; &#123; assert(human.toString() === 'A: 1'); &#125;);&#125;);describe('Test with string name and string age', () =&gt; &#123; let human; before(() =&gt; &#123; human = new Human('A', '1'); &#125;); it('Check name', () =&gt; &#123; assert(human.name === 'A'); &#125;); it('Check age', () =&gt; &#123; assert(human.age === 1); &#125;); it('Check toString', () =&gt; &#123; assert(human.toString() === 'A: 1'); &#125;);&#125;);describe('Test with buffer name and string age', () =&gt; &#123; let human; before(() =&gt; &#123; human = new Human(Buffer.from('A'), '1'); &#125;); it('Check name', () =&gt; &#123; assert(human.name === 'A'); &#125;); it('Check age', () =&gt; &#123; assert(human.age === 1); &#125;); it('Check toString', () =&gt; &#123; assert(human.toString() === 'A: 1'); &#125;);&#125;); å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†åˆå§‹åŒ–ä¸åŒä¹‹å¤–ï¼Œæ‰€æœ‰çš„æµ‹è¯•æ ·ä¾‹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æƒ³åŠžæ³•å¤ç”¨æµ‹è¯•ç”¨ä¾‹ 3. å¤ç”¨æµ‹è¯•ç”¨ä¾‹ åœ¨ test ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ–‡ä»¶ share.jsï¼Œå°†å¤ç”¨çš„ç”¨ä¾‹æ”¾åœ¨é‡Œé¢ï¼š 12345678910111213const assert = require('assert');module.exports = function () &#123; it('Check name', function () &#123; assert(this.human.name === 'A'); &#125;); it('Check age', function () &#123; assert(this.human.age === 1); &#125;); it('Check toString', function () &#123; assert(this.human.toString() === 'A: 1'); &#125;);&#125;; æ­¤æ—¶ç›®å½•ç»“æž„å˜ä¸ºï¼š index.js test index.test.js share.js index.test.js å˜ä¸ºï¼š 123456789101112131415161718192021222324252627282930const Human = require('../index');const check = require('./share');describe('Test with string name and number age', () =&gt; &#123; before(function () &#123; this.human = new Human('A', 1); &#125;); check();&#125;);describe('Test with buffer name and number age', () =&gt; &#123; before(function () &#123; this.human = new Human(Buffer.from('A'), 1); &#125;); check();&#125;);describe('Test with string name and string age', () =&gt; &#123; before(function () &#123; this.human = new Human('A', '1'); &#125;); check();&#125;);describe('Test with buffer name and string age', () =&gt; &#123; before(function () &#123; this.human = new Human(Buffer.from('A'), '1'); &#125;); check();&#125;); è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œåœ¨æ‰€æœ‰æ¶‰åŠ this çš„å‡½æ•°ä¸Šï¼Œä¸è¦ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚ 4. å‚è€ƒShared Behaviours]]></content>
      <categories>
        <category>Tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[TypeScript åˆå…¥å‘]]></title>
    <url>%2Fposts%2F7625%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦ä»‹ç»æˆ‘å…¥å‘ TypeScript ä»¥åŽæ€»ç»“çš„ä¸€äº›ç›¸å…³é…ç½®ï¼ŒåŒ…æ‹¬ï¼š TypeScript å®‰è£…ã€é…ç½®ä¸Žè°ƒè¯• TSLint é…ç½® TypeScript ç¼–å†™ä¸Žå‘å¸ƒ npm åŒ… TypeScript ä¸Ž webpackã€babel TypeScript æµ‹è¯•ä¸Žè¦†ç›–çŽ‡ 1. TypeScript åŸºæœ¬é…ç½®1.1. å®‰è£… TypeScriptå…¨å±€å®‰è£…ï¼š 1yarn global add typescript ä¸è¿‡æˆ‘ä¸ªäººè¿˜æ˜¯æ›´åŠ æŽ¨èåœ¨æ¯ä¸ª TypeScript é¡¹ç›®ä¸‹éƒ½å®‰è£…ä¸€ä¸ªå¼€å‘ä¾èµ–ï¼š 1yarn add -D typescript å¦‚æžœæ˜¯åœ¨ Node.js çŽ¯å¢ƒä¸‹ç¼–å†™ï¼Œè¿˜æŽ¨èå®‰è£…ç›¸åº”çš„ç±»åž‹å£°æ˜Žï¼š 1yarn add -D @types/node å®‰è£…å®ŒåŽå¯ä»¥ä½¿ç”¨ tsc å¯¹ TypeScript æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼š 1234# å…¨å±€å®‰è£…tsc test.ts# é¡¹ç›®å®‰è£…npx tsc test.ts ä½¿ç”¨ tsc --help å¯ä»¥æŸ¥çœ‹åˆ°ç¼–è¯‘é€‰é¡¹ã€‚ 1.2. é…ç½® tsconfig.jsontsc æä¾›çš„ç¼–è¯‘é€‰é¡¹ååˆ†ä¸°å¯Œï¼Œæˆ‘ä»¬ä¹Ÿç»å¸¸éœ€è¦åœ¨é¡¹ç›®ç¼–è¯‘æ—¶æŒ‡å®šä¸€äº›å‚æ•°ï¼Œç„¶åŽæ¯æ¬¡ç¼–è¯‘æ—¶éƒ½æ‰‹åŠ¨è¾“å…¥è¿™äº›å‚æ•°éžå¸¸éº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º tsconfig.json æ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œ tsc ä¸”ä¸æŒ‡å®šè¾“å…¥æ–‡ä»¶æ—¶ï¼Œä¼šé»˜è®¤åº”ç”¨æ–‡ä»¶ä¸­çš„é…ç½®ã€‚ ä¸€ä¸ªç®€å•çš„ tsconfig.json å¦‚ä¸‹ï¼š 123456789101112&#123; "compilerOptions": &#123; "outDir": "./dist", "noImplicitAny": true, "module": "CommonJS", "declaration": true, "target": "ES2015", "strict": true &#125;, "include": ["src"], "exclude": ["node_modules"]&#125; outDir æŒ‡å®šäº†ç›®æ ‡æ–‡ä»¶è¾“å‡ºä½ç½® noImplicitAny æ£€æŸ¥åœ¨æºä»£ç ä¸­ä¸èƒ½æœ‰éšå¼å£°æ˜Žçš„ Any ç±»åž‹ module æŒ‡å®šäº†æ¨¡å—è§„èŒƒ declaration è¾“å‡ºç›®æ ‡æ–‡ä»¶æ—¶åŒæ—¶è¾“å‡ºç±»åž‹å£°æ˜Žæ–‡ä»¶ target æŒ‡å®š JavaScript çš„ç‰ˆæœ¬ strict ä¸¥æ ¼æ¨¡å¼ include å’Œ exclude æŒ‡å®šè¾“å…¥å’ŒæŽ’é™¤ç›®å½• è¯¦ç»†é…ç½®å¯è§ tsconfig.json ã€‚ é…ç½®å®ŒåŽç›´æŽ¥è¿è¡Œ tsc å³å¯ã€‚ 1.3. è°ƒè¯• TypeScriptè¿™é‡Œæ¼”ç¤ºå¦‚ä½•åœ¨ VS Code ä¸­è°ƒè¯• TypeScriptã€‚ è°ƒè¯•çš„é…ç½®æ–‡ä»¶ä½äºŽ .vscode/launch.jsonï¼Œå»ºè®®å°†æ•´ä¸ª .vscode æ–‡ä»¶å¤¹åŠ å…¥ .gitignoreä¸­ã€‚ è°ƒè¯•ç¼–è¯‘åŽçš„ JavaScriptä¸€ç§æœ€ç®€å•çš„æ–¹æ³•æ˜¯è°ƒè¯•ç¼–è¯‘åŽçš„ JavaScriptï¼š åœ¨ .vscode/launch.json ä¸­åŠ å…¥é…ç½®ï¼š 1234567891011121314&#123; "version": "0.2.0", "configurations": [ &#123; "type": "node", "request": "launch", "name": "Debug JavaScript", "program": "$&#123;workspaceRoot&#125;/dist/index.js", "args": [], "protocol": "inspector", "cwd": "$&#123;workspaceRoot&#125;" &#125; ]&#125; ç›´æŽ¥è°ƒè¯• TypeScriptç›´æŽ¥è°ƒè¯• JavaScript çš„å¥½å¤„æ˜¯é…ç½®ç®€å•ã€ä½†æ¯æ¬¡éƒ½éœ€è¦æ˜¾å¼åœ°ç¼–è¯‘éžå¸¸éº»çƒ¦ã€‚è¿™é‡Œä½¿ç”¨ ts-node ä½œä¸ºè¿è¡ŒçŽ¯å¢ƒï¼Œå°±å¯ä»¥ç›´æŽ¥è°ƒè¯• TypeScript äº†ã€‚ å®‰è£… ts-nodeï¼š 1yarn add -D ts-node åœ¨ tsconfig.json ä¸­å¼€å¯ sourceMapï¼š 12345678910111213&#123; "compilerOptions": &#123; "outDir": "./dist", "noImplicitAny": true, "module": "CommonJS", "declaration": true, "target": "ES2015", "strict": true, "sourceMap": true &#125;, "include": ["src"], "exclude": ["node_modules"]&#125; é…ç½® .vscode/launch.jsonï¼š 123456789101112131415&#123; "version": "0.2.0", "configurations": [ &#123; "type": "node", "request": "launch", "name": "Debug TypeScript", "args": ["$&#123;relativeFile&#125;"], "runtimeArgs": ["--nolazy", "-r", "ts-node/register"], "sourceMaps": true, "protocol": "inspector", "cwd": "$&#123;workspaceRoot&#125;" &#125; ]&#125; 2. TSLint2.1. åŸºæœ¬é…ç½®ç¼–å†™ JavaScript æ—¶ä¸€èˆ¬ä¼šä½¿ç”¨ ESLint å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ã€‚åŒæ ·çš„ï¼Œ åœ¨ TypeScript ä¸­æˆ‘ä»¬ä½¿ç”¨ TSLintã€‚ é¦–å…ˆéœ€è¦å®‰è£…ä¾èµ–ï¼š 1yarn add -D tslint æŽ¥ç€è¿›è¡Œé…ç½®ï¼Œåœ¨æ ¹ç›®å½•åˆ›å»º tslint.json æ–‡ä»¶ï¼Œä¸€ä¸ªå…¸åž‹çš„ä¾‹å­ï¼š 123456789&#123; "extends": ["tslint:recommended"], "rules": &#123; "quotemark": [true, "single"], "no-empty": [true, "allow-empty-functions"], "trailing-comma": [true, &#123;"multiline": "always", "singleline": "never"&#125;], "interface-name": false &#125;&#125; extends é¢„è®¾çš„è§„åˆ™æ¨¡æ¿ rules è‡ªå®šä¹‰è§„åˆ™ ä»¥ä¸Šæ˜¯æˆ‘é€šå¸¸ä½¿ç”¨çš„è§„åˆ™ï¼Œå®ƒåœ¨æŽ¨èè§„åˆ™çš„åŸºç¡€ä¸Šï¼Œå°†å­—ç¬¦ä¸²æ”¹ä¸ºå•å¼•å·ã€å…è®¸ç©ºå‡½æ•°ã€è¦æ±‚è¡Œå°¾é€—å·ä»¥åŠä¸è¦æ±‚æŽ¥å£åç§°å¿…é¡»ä»¥ I å¼€å¤´ã€‚ å®Œæˆå®‰è£…å’Œé…ç½®å°±å¯ä»¥å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥äº†ï¼š 1npx tslint -p tsconfig.json 2.2. VS Code é…ç½®è®© VS Code æ”¯æŒ TSLint é”™è¯¯æ˜¾ç¤ºå’Œè‡ªåŠ¨ä¿®å¤ï¼Œéœ€è¦åœ¨ VS Code ä¸­å®‰è£… TSLint æ’ä»¶ã€‚ åœ¨è®¾ç½®ä¸­å°† TSLint æ’ä»¶çš„ Auto Fix On Save åŠŸèƒ½æ‰“å¼€å³å¯ã€‚ 3. TypeScript å‘å¸ƒ npm åŒ…ä¸ºäº†å…¼å®¹ JavaScript ç¤¾åŒºï¼Œå‘å¸ƒåˆ° npm çš„åŒ…å¿…é¡»æ˜¯ JavaScript è€Œä¸æ˜¯ TypeScriptã€‚ æ‰€ä»¥å‘å¸ƒä¸€ä¸ªåŒ…çš„æ­¥éª¤å˜ä¸ºï¼š ç¼–è¯‘ TypeScript è®© npm åªè¯†åˆ«ç¼–è¯‘åŽçš„ JavaScript å‘å¸ƒ 3.1. ç¼–è¯‘åœ¨ npm scripts ä¸­æ·»åŠ  buildï¼š 123"scripts": &#123; "build": "tsc"&#125; 3.2. ä¿®æ”¹ npm filesåœ¨ package.json ä¸­æ–°åŠ ä¸€ä¸ªå­—æ®µ files æŒ‡å®š npm è¯†åˆ«çš„æ–‡ä»¶ï¼š 123"files": [ "dist/**/*"] è¿™æ ·å½“ npm å‘å¸ƒåŒ…çš„æ—¶å€™ï¼Œå°±åªä¼šæ”¾ files å­—æ®µä¸­æŒ‡å®šçš„æ–‡ä»¶æ‰“åŒ…å‘å¸ƒã€‚å½“ç„¶ï¼Œnpm ä¼šè‡ªåŠ¨è¯†åˆ« LICENSEã€README.md å’Œ package.jsonã€‚ æŒ‰ç…§å¦‚ä¸Šé…ç½®ï¼Œæœ€åŽå‘å¸ƒçš„åŒ…çš„ç›®å½•ç»“æž„ä¸ºï¼š dist index.js ... LICENSE package.json README.md 3.3. è‡ªåŠ¨åŒ–è°éƒ½ä¸æƒ³æ¯æ¬¡ npm publish å‰éƒ½æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡ yarn build ï¼Œå› æ­¤ä½ å¯ä»¥å†æ·»åŠ ä¸€ä¸ª npm scriptsï¼š 1234"scripts": &#123; "build": "tsc", "prepublishOnly": "yarn bulid"&#125; è¿™æ ·æ¯æ¬¡ npm publish å‰å°±ä¼šè‡ªåŠ¨è¿›è¡Œç¼–è¯‘ã€‚ 3.4. é¿å…ä¸¢å¤±ç±»åž‹å£°æ˜Žä¸ºäº†å…¼å®¹ JavaScript ç¤¾åŒºï¼Œæˆ‘ä»¬å¾€ npm å‘å¸ƒäº†ç¼–è¯‘åŽçš„ JavaScript ä»£ç ï¼Œä½†ç¼–è¯‘æˆ JavaScript åŽä¼šå¤±åŽ»ç±»åž‹å£°æ˜Žã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ tsconfig.json ä¸­å°† declaration è®¾ä¸º trueï¼Œä½¿å¾—ç¼–è¯‘æ—¶è¾“å‡ºç±»åž‹å£°æ˜Žæ–‡ä»¶ã€‚ è¿™æ ·å‘å¸ƒçš„ npm åŒ…ç›®å½•å¦‚ä¸‹ï¼š dist index.js index.d.ts â€¦ LICENSE package.json README.md è¿™æ ·ï¼ŒJavaScript å’Œ TypeScript éƒ½å¯ä»¥æ­£å¸¸å¼•ç”¨ç¼–è¯‘åŽçš„ä»£ç ï¼Œä¸” TypeScript è¿˜ä¼šè‡ªåŠ¨å¼•ç”¨åŒç›®å½•ä¸‹çš„ç±»åž‹å£°æ˜Žæ–‡ä»¶ã€‚ï¼ˆåœ¨ VS Code ä¸‹ï¼ŒJavaScript ä¹Ÿä¼šè‡ªåŠ¨å¼•ç”¨ç±»åž‹å£°æ˜Žæ–‡ä»¶ä½œä¸ºä»£ç æç¤ºã€‚ï¼‰ 4. TypeScript ä¸Ž webpack4.1. webpack ç¯‡å¦‚æžœä½¿ç”¨ TypeScript ç¼–å†™æµè§ˆå™¨ä¸Šè¿è¡Œçš„ä»£ç ï¼Œä¸€èˆ¬éœ€è¦é…åˆ webpack å·¥ä½œã€‚ é¦–å…ˆå®‰è£…ä¾èµ–ï¼š 1yarn add -D webpack webpack-cli awesome-typescript-loader åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º webpack é…ç½®æ–‡ä»¶ webpack.config.jsï¼š 1234567891011121314151617181920212223242526272829const path = require('path');function generateConfig(name) &#123; const mode = name.includes('min') ? 'production' : 'development'; return &#123; entry: './src/index.ts', mode, module: &#123; rules: [ &#123; test: /\.ts?$/, loader: 'awesome-typescript-loader', &#125;, ], &#125;, resolve: &#123; extensions: [ '.ts', '.js' ], &#125;, output: &#123; filename: `$&#123;name&#125;.js`, path: path.resolve(__dirname, 'dist'), library: 'Test', libraryTarget: 'umd', &#125;, devtool: 'source-map', &#125;;&#125;module.exports = [generateConfig('test'), generateConfig('test.min')]; è¿™é‡Œçš„é…ç½®æ–‡ä»¶ä¸€æ¬¡æ€§ç”Ÿæˆäº†ä¸¤ä¸ªé…ç½®ï¼š åœ¨å¼€å‘çŽ¯å¢ƒä¸‹ç¼–è¯‘ index.ts ä¸º test.jsï¼Œå¹¶ç”Ÿæˆ source mapï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å‡ºä»£ç ä¸ä¼šè¢«åŽ‹ç¼©ã€‚ åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸‹ç¼–è¯‘ index.ts ä¸º test.min.jsï¼Œå¹¶ç”Ÿæˆ source mapï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å‡ºä»£ç ä¼šè¢«åŽ‹ç¼©ã€‚ æ³¨æ„ï¼šä¸Šè¿°é…ç½®ç¬¬ 22 å’Œ 23 è¡Œå®šä¹‰äº†è¾“å‡ºä¸º libraryï¼Œå³åªè¦è¿è¡Œç¼–è¯‘åŽçš„ä»£ç ï¼Œå…¥å£å°±ä¼šè¢«è‡ªåŠ¨æŒ‚è½½åˆ°æµè§ˆå™¨çš„å…¨å±€ä¸‹ã€‚ ä¾‹å¦‚ JQuery å¯ä»¥è¿™ä¹ˆé…ç½®ï¼š 12345678...output: &#123; filename: 'jquery.min.js', path: path.resolve(__dirname, 'dist'), library: '$', libraryTarget: 'umd'&#125;,... é…ç½®å®ŒæˆåŽï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š 1npx webpack 4.2. Babel ç¯‡ä¸ºäº†å°†æ–°ç‰ˆæœ¬çš„ JavaScript ç‰¹æ€§ç¿»è¯‘æˆå…¼å®¹æ€§æ›´é«˜çš„ JavaScriptï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ Babelã€‚ é¦–å…ˆå®‰è£…ä¾èµ–ï¼š 1yarn add -D @babel/core @babel/plugin-transform-runtime @babel/preset-env @babel/preset-typescript @babel/runtime babel-loader ä¿®æ”¹ webpack.config.jsï¼š 1234567891011121314151617181920212223242526272829const path = require('path');function generateConfig(name) &#123; const mode = name.includes('min') ? 'production' : 'development'; return &#123; entry: './src/index.ts', mode, module: &#123; rules: [ &#123; test: /\.ts?$/, loader: ['babel-loader', 'awesome-typescript-loader'], &#125;, ], &#125;, resolve: &#123; extensions: [ '.ts', '.js' ], &#125;, output: &#123; filename: `$&#123;name&#125;.js`, path: path.resolve(__dirname, 'dist'), library: 'Test', libraryTarget: 'umd', &#125;, devtool: 'source-map', &#125;;&#125;module.exports = [generateConfig('test'), generateConfig('test.min')]; å”¯ä¸€çš„å˜åŒ–æ˜¯ 12 è¡Œï¼Œloader ä¸­åŠ å…¥äº† babel-loaderã€‚ æŽ¥ä¸‹æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º Babel é…ç½®æ–‡ä»¶ .babelrcï¼Œå…¸åž‹é…ç½®å¦‚ä¸‹ï¼š 123456789101112&#123; "plugins": ["@babel/plugin-transform-runtime"], "presets": [ "@babel/typescript", ["@babel/env", &#123; "modules": "umd", "targets": &#123; "browsers": [ "&gt;1%" ] &#125; &#125;] ]&#125; ç¼–è¯‘åŽçš„ç‰ˆæœ¬å°†æ”¯æŒä½¿ç”¨çŽ‡å¤§äºŽ 1% çš„æµè§ˆå™¨ã€‚ 5. TypeScript æµ‹è¯•5.1. ä½¿ç”¨ Mocha æµ‹è¯•è¿™é‡Œä½¿ç”¨çš„æµ‹è¯•æ¡†æž¶æ˜¯ Mochaï¼Œæ–­è¨€åº“æ˜¯ç®€å•ä¼˜ç§€çš„çš„ power-assertã€‚ å®‰è£…ä¾èµ–ï¼š 1yarn add -D mocha @types/mocha power-assert espower-typescript å‡å®šçŽ°åœ¨ç›®å½•ç»“æž„å¦‚ä¸‹ï¼š index.ts test index.test.ts å…¶ä¸­ index.ts ï¼š 123export function add(a: number, b: number): number &#123; return a + b;&#125; index.test.tsï¼š 12345678import assert = require('assert');import &#123; add &#125; from '../index';describe('Test add function', () =&gt; &#123; it('Add', () =&gt; &#123; assert(add(1, 2) === 3); &#125;);&#125;); åœ¨ npm scripts ä¸­æ·»åŠ ï¼š 123"scripts": &#123; "test": "mocha --require espower-typescript/guess test/**/*.ts"&#125; è¿è¡Œæµ‹è¯•ï¼š 1yarn test 5.2. ä½¿ç”¨ istanbul ç”Ÿæˆè¦†ç›–çŽ‡æŠ¥å‘Šé¦–å…ˆå®‰è£…ä¾èµ–ï¼š 1yarn add -D istanbul@1.1.0-alpha.1 ts-node æ³¨æ„è¿™é‡Œå¿…é¡»å®‰è£… 1.1.0-alpha.1 ç‰ˆæœ¬çš„ istanbulã€‚ åœ¨ npm scripts ä¸­æ·»åŠ ï¼š 123"scripts": &#123; "coverage": "istanbul cover -e .ts _mocha -- --require ts-node/register test/**/*.ts"&#125; è¿™é‡Œç”¨æ¥ç”Ÿæˆè¦†ç›–çŽ‡çš„å‘½ä»¤æœ‰äº›å¤æ‚ï¼Œè§£æžå¦‚ä¸‹ï¼š 1234567istanbul \ # istanbul å‘½ä»¤cover \ # istanbul å­å‘½ä»¤-e .ts \ # istanbul å‚æ•°ï¼ŒæŒ‡å®š .ts æ–‡ä»¶_mocha \ # åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…è¿è¡Œ mocha ä¿è¯ istanbul èƒ½èŽ·å¾—è¾“å‡º-- \ # ä¸¤çŸ­æ¨ªçº¿åŽçš„å‚æ•°ä¼šä¼ é€’ç»™ mocha è€Œéž istanbul--require ts-node/register \ # ä½¿ç”¨ ts-node ç¼–è¯‘test/**/*.ts # æµ‹è¯•æ–‡ä»¶ è¿è¡Œ yarn coverage å°±ä¼šè·‘å®Œæµ‹è¯•ä»£ç å¹¶åœ¨ coverage ç›®å½•ä¸‹ç”Ÿæˆè¦†ç›–çŽ‡æŠ¥å‘Šã€‚å»ºè®®å°† coverage æ·»åŠ åˆ° .gitignoreã€‚]]></content>
      <categories>
        <category>Tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºŽ Android Accessibility å®žçŽ°ä¸€é”®æ‹¨æ‰“å¾®ä¿¡ç”µè¯]]></title>
    <url>%2Fposts%2Fdf57%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡å¯¹å°é¡¹ç›® QuickWeChatCall è¿›è¡Œäº†ç®€è¦çš„å›žé¡¾ã€‚ 1. æ¦‚è¿°1.1. åŠ¨æœºå¥¶å¥¶éžå¸¸å–œæ¬¢å’Œæˆ‘è·Ÿå§å§è§†é¢‘èŠå¤©ï¼Œä½†æ˜¯å¾®ä¿¡çš„è§†é¢‘æ­¥éª¤å®žåœ¨å¤ªè¿‡å¤æ‚ï¼Œå¯¹äºŽæ‰“ç”µè¯éƒ½æœ‰å›°éš¾çš„å¥¶å¥¶æ¥è¯´å‡ ä¹Žä¸å¯èƒ½ç‹¬ç«‹ä½¿ç”¨çš„ã€‚ä¸ºæ­¤æˆ‘ç¼–å†™äº† QuickWeChatCall è¿™ä¸ªå·¥å…·ï¼Œç”¨äºŽå¸®åŠ©éœ€è¦çš„äººä¸€é”®å‘èµ·å¾®ä¿¡è§†é¢‘ã€‚ ãƒ“ãƒ‡ã‚ªãƒãƒ£ãƒƒãƒˆã—ã¾ã—ã‚‡ã†ã€ãŠã°ã‚ã¡ã‚ƒã‚“ã€‚:-) é¡¹ç›®åœ°å€ï¼šQuickWeChatCall ä¸‹è½½ï¼šRelease ä½¿ç”¨æ•™ç¨‹ï¼šUsage 1.2. ç»“æžœè¿è¡Œæˆªå›¾ï¼š å®žçŽ°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š ä¸€é”®å‘èµ·è§†é¢‘èŠå¤© è‡ªåŠ¨æŽ¥å¬è§†é¢‘ / è¯­éŸ³èŠå¤© å¿«æ·è”ç³»äººåˆ—è¡¨ 1.3. å¯å‘åœ¨è‡ªå·±å¼€å‘ä¹‹å‰ï¼Œå…ˆæµ‹è¯•äº†ä¸¤ä¸ªç½‘ç»œä¸Šæä¾›çš„è§£å†³æ–¹æ¡ˆï¼š Auto.jsï¼Œæ”¯æŒä½¿ç”¨ JavaScript æ“æŽ§ Android çš„æ— éšœç¢æœåŠ¡ã€‚ä¼˜ç‚¹æ˜¯å¼€å‘è¿…é€Ÿï¼Œåªéœ€è¦å‡ è¡Œ JavaScript ä»£ç å°±å¯ä»¥äº†ï¼Œç¼ºç‚¹åˆ™æ˜¯å¤ªè¿‡ç¡¬æ ¸ï¼Œä¸é€‚åˆè€å¹´äººä½¿ç”¨ã€‚ ç”± Mozzie åœ¨ä¸€ä¸ªçŸ¥ä¹Žå›žç­” ä¸­æä¾›çš„åŸºäºŽ Android æ— éšœç¢æœåŠ¡çš„ä¸€é”®è§†é¢‘åº”ç”¨ã€‚ä½†åœ¨è¯•ç”¨ä¹‹åŽå‘çŽ°ä½œè€…åŸºæœ¬åªæ˜¯å†™äº†ä¸ª Demoï¼Œå‡ ä¹Žæ²¡æœ‰æ˜“ç”¨æ€§ï¼Œè€Œä¸”æ ¸å¿ƒåŠŸèƒ½â€”â€”ä¸€é”®å‘èµ·è§†é¢‘ï¼Œå·²ç»æ— æ³•ä½¿ç”¨äº†ã€‚ æœ€åŽæˆ‘å†³å®šåŒæ ·åŸºäºŽ Android æ— éšœç¢æœåŠ¡ï¼Œå¼€å‘ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ä¸€é”®å‘èµ·è§†é¢‘èŠå¤©å·¥å…·ã€‚ä¹Ÿå°±è¯žç”Ÿäº† QuickWeChatCall é¡¹ç›®ã€‚ 1.4. åŽŸç†åŽŸç†éžå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨ Android Accessibility Serviceï¼Œç›‘å¬å¾®ä¿¡çš„ UI å˜åŠ¨ã€‚æ ¹æ®ä¸€å®šçš„æ­¥éª¤ï¼Œå¯»æ‰¾æŒ‡å®šçš„ UI ç»„ä»¶ï¼Œæ‰§è¡Œç‚¹å‡»æ“ä½œå³å¯ã€‚ 2. ç»†èŠ‚2.1. æ— éšœç¢æƒé™å£°æ˜Žæ— éšœç¢æœåŠ¡çš„æƒé™å£°æ˜Žéœ€è¦åœ¨ AndroidManifest.xml ä¸­å£°æ˜Žï¼š 1234567891011121314&lt;application&gt; &lt;service android:name="æ— éšœç¢æœåŠ¡ç±»å" android:label="æ— éšœç¢æœåŠ¡åç§°" android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"&gt; &lt;intent-filter&gt; &lt;action android:name="android.accessibilityservice.AccessibilityService" /&gt; &lt;/intent-filter&gt; &lt;meta-data android:name="android.accessibilityservice" android:resource="@xml/accessibility_config" /&gt; &lt;/service&gt;&lt;/application&gt; ç„¶åŽåœ¨ xml/accessibility_config ä¸­å£°æ˜Žï¼š 12345678&lt;accessibility-service xmlns:android="http://schemas.android.com/apk/res/android" android:accessibilityEventTypes="typeAllMask" android:accessibilityFeedbackType="feedbackSpoken" android:accessibilityFlags="flagIncludeNotImportantViews" android:canRetrieveWindowContent="true" android:description="æ— éšœç¢æœåŠ¡æè¿°" android:notificationTimeout="100" android:packageNames="ç›‘å¬åŒ…å" /&gt; è¿™é‡Œåªè§£é‡Šå‡ ä¸ªå…³é”®çš„å­—æ®µ æ— éšœç¢æœåŠ¡ç±»åï¼šæä¾›æ— éšœç¢æœåŠ¡çš„æœåŠ¡ç±»çš„åç§°ï¼ŒåŽç»­ç»†è°ˆ æ— éšœç¢æœåŠ¡åç§°ï¼šåœ¨ç³»ç»Ÿè®¾ç½®ä¸­æ˜¾ç¤ºçš„æ— éšœç¢æœåŠ¡çš„åç§° æ— éšœç¢æœåŠ¡æè¿°ï¼šåœ¨ç³»ç»Ÿè®¾ç½®ä¸­æ˜¾ç¤ºçš„æ— éšœç¢æœåŠ¡çš„æè¿° ç›‘å¬åŒ…åï¼šæ— éšœç¢æœåŠ¡ç›‘å¬çš„åŒ…åï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬éœ€è¦ç›‘å¬å¾®ä¿¡çš„ UI æ›´æ–°ï¼Œå› æ­¤åŒ…åå°±æ˜¯å¾®ä¿¡çš„åŒ…å com.tencent.mm æ£€æŸ¥æ— éšœç¢æœåŠ¡çš„æŽˆæƒæ¯”è¾ƒç‰¹æ®Šï¼Œä¸åƒå…¶ä»–æƒé™ä¸€æ ·å¯ä»¥é€šè¿‡ Dialog çš„æ–¹å¼æç¤ºç”¨æˆ·æŽˆæƒï¼Œè€Œæ˜¯éœ€è¦åœ¨ç³»ç»Ÿè®¾ç½®çš„æ— éšœç¢æœåŠ¡ä¸­æ‰‹åŠ¨å¼€å¯ã€‚ å› æ­¤æœ€å¥½çš„åŠžæ³•å°±æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™æ£€æŸ¥æ— éšœç¢æƒé™æƒ…å†µï¼Œå¦‚æžœæ²¡æœ‰å¾—åˆ°æŽˆæƒå°±è½¬è·³åˆ°ç³»ç»Ÿè®¾ç½®ç•Œé¢ã€‚ æ£€æŸ¥æ— éšœç¢æƒé™çš„ä»£ç ï¼Œå‚è€ƒäº† Stack Overflow ä¸Šçš„ç­”æ¡ˆï¼š 123456789101112131415161718192021222324252627282930private boolean isAccessibilitySettingsOn(Context mContext) &#123; int accessibilityEnabled = 0; final String service = getPackageName() + "/" + AccessibilityService.class.getCanonicalName(); try &#123; accessibilityEnabled = Settings.Secure.getInt( mContext.getApplicationContext().getContentResolver(), android.provider.Settings.Secure.ACCESSIBILITY_ENABLED); &#125; catch (Settings.SettingNotFoundException e) &#123; Log.e(TAG, "Error finding setting, default accessibility to not found: " + e.getMessage()); &#125; TextUtils.SimpleStringSplitter mStringColonSplitter = new TextUtils.SimpleStringSplitter(':'); if (accessibilityEnabled == 1) &#123; String settingValue = Settings.Secure.getString( mContext.getApplicationContext().getContentResolver(), Settings.Secure.ENABLED_ACCESSIBILITY_SERVICES); if (settingValue != null) &#123; mStringColonSplitter.setString(settingValue); while (mStringColonSplitter.hasNext()) &#123; String accessibilityService = mStringColonSplitter.next(); if (accessibilityService.equalsIgnoreCase(service)) &#123; Log.v(TAG, "***ACCESSIBILITY IS ENABLED***"); return true; &#125; &#125; &#125; &#125; Log.v(TAG, "***ACCESSIBILITY IS DISABLED***"); return false;&#125; è·³è½¬åˆ°ç³»ç»Ÿæ— éšœç¢æœåŠ¡è®¾ç½®ç•Œé¢ï¼š 1startActivity(new Intent(Settings.ACTION_ACCESSIBILITY_SETTINGS)); 2.2. æ— éšœç¢æœåŠ¡å½“åº”ç”¨å¼€å¯æ— éšœç¢æœåŠ¡æƒé™ä¹‹åŽï¼Œæ³¨å†Œçš„æ— éšœç¢æœåŠ¡ç±»å°±ä¼šåœ¨åŽå°è¿è¡Œã€‚å½“æ³¨å†ŒåŒ…åçš„ UI å‘ç”Ÿå˜åŒ–æ˜¯ï¼Œå°±ä¼šè§¦å‘äº‹ä»¶ï¼Œå¹¶è°ƒç”¨æ— éšœç¢æœåŠ¡ç±»ä¸­ç›¸åº”çš„å›žè°ƒã€‚è¿™äº›äº‹ä»¶å¯èƒ½æ˜¯ï¼Œå†…å®¹å˜æ›´ã€åˆ›å»ºæˆ–åˆ é™¤èŠ‚ç‚¹ç­‰ã€‚ æ‰€ä»¥æ ¸å¿ƒé€»è¾‘å°±æ˜¯åœ¨æ— éšœç¢æœåŠ¡ç±»ä¸­ï¼Œå¤„ç†å¯¹åº”çš„äº‹ä»¶ã€‚ 2.3. é€»è¾‘æ•´ä¸ªå‘èµ·å¾®ä¿¡è§†é¢‘çš„æ­¥éª¤ç»è¿‡å¤šæ¬¡è°ƒæ•´æœ€åŽç¡®å®šä¸ºï¼š æ‰“å¼€å¾®ä¿¡ ç‚¹å‡»å¾®ä¿¡ä¸‹æ–¹å¯¼èˆªæ¡ä¸­çš„â€œè”ç³»äººâ€ ç‚¹å‡»è”ç³»äººç•Œé¢çš„â€œæ ‡ç­¾â€œ ç‚¹å‡»æ ‡ç­¾åˆ—è¡¨ä¸­çš„â€å¾®ä¿¡ä¸€é”®è§†é¢‘â€œæ ‡ç­¾ ç‚¹å‡»å¯¹åº”çš„å¾®ä¿¡å¥½å‹ ç‚¹å‡»â€è§†é¢‘èŠå¤©â€œæŒ‰é’® é€‰æ‹©â€è§†é¢‘èŠå¤©â€œ å› æ­¤ï¼Œç¨‹åºè¿è¡Œçš„é€»è¾‘å°±æ˜¯ æ‰“å¼€å¾®ä¿¡ï¼Œå°†å½“å‰æ­¥éª¤è®¾å®šä¸ºä¸Šè¿°æ­¥éª¤ 2 ç­‰å¾… UI æ›´æ–° UI æ›´æ–°åŽï¼Œåœ¨ç•Œé¢ä¸­å¯»æ‰¾è¯¥æ­¥éª¤éœ€è¦ç‚¹å‡»çš„å…ƒç´ ï¼Œç‚¹å‡» å°†æ­¥éª¤è®¾ç½®ä¸ºä¸‹ä¸€æ­¥ å›žåˆ° 2ï¼Œé‡å¤æ‰§è¡Œï¼Œç›´åˆ°ç»“æŸ 2.4. åŽ»æŠ–åŠ¨å› ä¸º UI æ›´æ–°é€ æˆçš„äº‹ä»¶å¯èƒ½éžå¸¸å¯†é›†ï¼Œä¾‹å¦‚å®¶åœ¨åˆ—è¡¨çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½æ¯ä¸€ä¸ªåˆ—è¡¨é¡¹çš„åŠ å…¥éƒ½ä¼šé€ æˆä¸€æ¬¡äº‹ä»¶å›žè°ƒã€‚è€Œç¨‹åºå…¶å®žåªéœ€è¦åœ¨ä¸€æ¬¡ UI æ›´æ–°çš„ç»“æŸé˜¶æ®µï¼Œå¯»æ‰¾æŒ‡å®šå…ƒç´ å°±å¯ä»¥äº†ã€‚æ‰€ä»¥éœ€è¦ä¸€å®šçš„åŽ»æŠ–åŠ¨æœºåˆ¶ã€‚ åŽŸç†å…¶å®žä¹Ÿéžå¸¸ç®€å•ï¼Œå¯ä»¥å‚ç…§ Lodash ä¸­çš„å®žçŽ°ã€‚ 123456789101112131415161718@Overridepublic void onAccessibilityEvent(AccessibilityEvent event) &#123; if (finished) &#123; finished = false; &#125; else &#123; Log.v(TAG, "bounce"); handler.removeCallbacks(new Runnable() &#123; @Override public void run() &#123; _onAccessibilityEvent(input); finished = true; &#125; &#125;); &#125; input = event; handler = new Handler(); handler.postDelayed(runnable, WAIT);&#125; 3. å‘3.1. æ— éšœç¢æœåŠ¡æŽˆæƒæœŸé™èŽ·å¾—æ— éšœç¢æœåŠ¡çš„æƒé™ä¹‹åŽï¼Œæ— éšœç¢æœåŠ¡ç±»å°±åœ¨åŽå°è¿è¡Œäº†ã€‚ä½†å¦‚æžœè¿™æ—¶å€™ç”±äºŽä»»ä½•æƒ…å†µï¼ˆå…³æœºã€é‡å¯ã€åŽå°è¢«æ€ã€è‡ªèº«å¼‚å¸¸ç­‰ç­‰ï¼‰ï¼Œæ— éšœç¢æœåŠ¡ç±»å…³é—­äº†ï¼Œé‚£ä¹ˆæ— éšœç¢æœåŠ¡çš„æƒé™å°±ä¼šè‡ªåŠ¨ä¸¢å¤±ï¼Œå¿…é¡»é‡æ–°æŽˆæƒã€‚ 3.2. å¾®ä¿¡é¦–é¡µç»„ä»¶æœç´¢æ— éšœç¢æœåŠ¡æä¾›äº†ä¸€ä¸ªå‡½æ•° findAccessibilityNodeInfosByText ç”¨æ¥æœç´¢å½“å‰å¸ƒå±€ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯ä¸çŸ¥ä¸ºä½•ï¼Œåœ¨å¾®ä¿¡é¦–é¡µè°ƒç”¨è¿™ä¸ªå‡½æ•°æœç´¢ä¸åˆ°ä»»ä½•å†…å®¹ã€‚ç„¶è€Œè‡ªå·±æ‰‹åŠ¨éåŽ†çš„è¯ï¼Œå´å¯ä»¥æœç´¢åˆ°ã€‚ å› æ­¤æˆ‘æ‰‹åŠ¨å®žçŽ°äº†ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆæœç´¢çš„å¤šå±žæ€§æœç´¢å‡½æ•°ï¼š 123456789101112131415161718192021222324252627private AccessibilityNodeInfo findNode(AccessibilityNodeInfo root, Property type, String text) &#123; if (root == null) return null; boolean satisfied = false; switch (type) &#123; case TEXT: satisfied = root.getText() != null &amp;&amp; text.contentEquals(root.getText()); break; case CLASS_NAME: satisfied = root.getClassName() != null &amp;&amp; text.contentEquals(root.getClassName()); break; case DESCRIPTION: satisfied = root.getContentDescription() != null &amp;&amp; text.contentEquals(root.getContentDescription()); break; &#125; if (satisfied) &#123; return root; &#125; else &#123; for (int i = 0; i &lt; root.getChildCount(); i++) &#123; AccessibilityNodeInfo result = findNode(root.getChild(i), type, text); if (result != null) &#123; return result; &#125; &#125; &#125; root.recycle(); return null;&#125; 3.3. é­…æ—è°ƒè¯•åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè£…å¾®ä¿¡é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå› æ­¤æˆ‘å°±ç›´æŽ¥åœ¨æ‰‹å¤´å”¯ä¸€çš„é­…è“ 5 ä¸Šå®žæœºè°ƒè¯•ã€‚ä½†æ˜¯å‘çŽ°åœ¨é­…è“ 5 ä¸Šæ— è®ºå¦‚ä½•éƒ½èŽ·å–ä¸åˆ° Log ä¿¡æ¯ï¼ŒåŽæ¥å‘çŽ°éœ€è¦åœ¨ ç³»ç»Ÿè®¾ç½® -&gt; å¼€å‘è€…é€‰é¡¹ -&gt; æ€§èƒ½ä¼˜åŒ– -&gt; é«˜çº§æ—¥å¿—è¾“å‡º ä¸­é€‰æ‹© å…¨éƒ¨å…è®¸ã€‚ 4. åŽæ¥åŽæ¥ç”±äºŽï¼Œä¸Šé¢ä¹Ÿæåˆ°çš„æ— éšœç¢æƒé™æ€»æ˜¯éœ€è¦é‡å¤æŽˆæƒçš„é—®é¢˜ï¼Œè™½ç„¶ç®€å•å¼€å‘å®Œäº†è¿™ä¸ªå·¥å…·ï¼Œæœ€åŽè¿˜æ˜¯æ”¾å¼ƒäº†ä½¿ç”¨ã€‚æ¯•ç«Ÿå¯¹äºŽå¥¶å¥¶æ¥è¯´ï¼Œå¦‚æžœä¸€ä¸å°å¿ƒå¼€å…³æœºæˆ–è€…æ¸…ç†äº†åŽå°ï¼Œé‡æ–°æŽˆæƒç¡®å®žå¤ªå¤æ‚äº†ã€‚ æœ€åŽçš„è§£å†³æ–¹æ³•æ˜¯ï¼ŒFaceTime ðŸ˜‚ æ²¡é”™ï¼ŒApple å¤§æ³•å¥½ã€‚é€šè¿‡æ·å¾„é…åˆ FaceTimeï¼Œå¥¶å¥¶å¯ä»¥åœ¨ iPad ä¸Šä¸€é”®å‘èµ·è§†é¢‘èŠå¤©ã€‚ å”¯ä¸€çš„ç¼ºç‚¹å¤§æ¦‚å°±æ˜¯å¿…é¡»æ˜¯å¯¹æ–¹ä¹Ÿå¿…é¡»æ˜¯è‹¹æžœè®¾å¤‡ï¼Œæ°å¥½æˆ‘å’Œå§å§éƒ½æ˜¯âœŒï¸ã€‚ æ„Ÿè°¢æ´›ä¼Šé…± â¤ï¸ æä¾›çš„ iPad å‘€ï¼Œå¥¶å¥¶è¶…å¼€å¿ƒã€‚]]></content>
      <categories>
        <category>Development</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[éšæœºæ•°æ˜¯å¦‚ä½•ç”Ÿæˆçš„]]></title>
    <url>%2Fposts%2Fd02e%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦ä»‹ç»éšæœºæ•°çš„æ¦‚å¿µä¸Žåˆ†ç±»ï¼Œä»¥åŠç®€å•çš„ç»Ÿè®¡å­¦ä¼ªéšæœºæ•°ç®—æ³•ã€‚ 1. éšæœºæ•°æ¦‚å¿µè¿™é‡Œæˆ‘ä»¬ä¸»è¦è®¨è®ºçš„æ˜¯å¯†ç å­¦èŒƒç•´çš„éšæœºæ•°ã€‚éšæœºæ•°çš„éšæœºæ€§æ£€éªŒå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ‡å‡†ï¼š ç»Ÿè®¡å­¦ä¼ªéšæœºæ€§ã€‚åœ¨ç»™å®šçš„éšæœºæ¯”ç‰¹æµæ ·æœ¬ä¸­ï¼Œ1 çš„æ•°é‡å¤§è‡´ç­‰äºŽ 0 çš„æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœæˆ‘ä»¬æŠŠä¸€ä¸ªï¼ˆåŒ…å«è¶³å¤Ÿå¤šéšæœºæ•°çš„ï¼‰éšæœºåºåˆ—é‡Œçš„æ¯ä¸ªéšæœºæ•°æ•°è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ•°ï¼Œå¹¶é¦–å°¾ç›¸æŽ¥å½¢æˆä¸€ä¸ªä¸²ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸²ä¸­çš„ 1 å’Œ 0 çš„æ•°é‡åº”è¯¥å¤§è‡´ç›¸ç­‰ã€‚æ»¡è¶³è¿™ç±»è¦æ±‚çš„æ•°å­—ï¼Œäººç±»â€œä¸€çœ¼çœ‹ä¸ŠåŽ»â€æ˜¯éšæœºçš„ã€‚ å¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ€§ã€‚ç»™å®šä¸€å®šé•¿åº¦çš„éšæœºåºåˆ—ï¼Œåœ¨å¤šé¡¹å¼æ—¶é—´å†…æ¼”ç®—å‡ºéšæœºåºåˆ—çš„ä»»ä½•éƒ¨åˆ†çš„æ¦‚çŽ‡ä½ŽäºŽ 50%ã€‚ä¾‹å¦‚å³ä½¿ç»™å®šéšæœºåºåˆ—çš„å‰ 100 ä¸ªéšæœºæ•°ï¼Œä¹Ÿæ— æ³•åœ¨æœ‰æ•ˆåœ°ç®—å‡ºç¬¬ 101 ä¸ªéšæœºæ•°æ˜¯ä»€ä¹ˆã€‚è¿™æ ·çš„ä¼ªéšæœºæ•°åºåˆ—éš¾ä»¥è¢«é¢„æµ‹ã€‚ çœŸéšæœºæ€§ã€‚éšæœºåºåˆ—ä¸å¯é‡çŽ°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»™å®šç›¸åŒçš„å‚æ•°ï¼Œå¤šæ¬¡è®¡ç®—å‡ºçš„ç»“æžœæ˜¯ä¸åŒçš„ã€‚ç”±äºŽè®¡ç®—æœºç®—æ³•éƒ½å…·å¤‡ç¡®å®šæ€§çš„ç‰¹å¾ï¼Œå› æ­¤çœŸéšæœºæ•°æ— æ³•é€šè¿‡ç®—æ³•ç”Ÿæˆã€‚ ç›¸åº”çš„ï¼Œéšæœºæ•°è¢«åˆ†ä¸ºä¸‰ç±»ï¼š ç»Ÿè®¡å­¦ä¼ªéšæœºæ•°ã€‚ä»…ç¬¦åˆç¬¬ä¸€ä¸ªæ ‡å‡†çš„éšæœºæ•°ã€‚ä¹Ÿå°±æ˜¯åªæ˜¯äººç±»â€œä¸€çœ¼çœ‹ä¸ŠåŽ»â€è§‰å¾—éšæœºè€Œå·²ã€‚ å¯†ç å­¦å®‰å…¨çš„ä¼ªéšæœºæ•°ã€‚ç¬¦åˆå‰ä¸¤ä¸ªæ ‡å‡†çš„çš„éšæœºæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä»…äººç±»è§‰å¾—éšæœºï¼Œè€Œä¸”éšæœºåºåˆ—éš¾ä»¥é¢„æµ‹ã€‚è¿™ç§éšæœºæ•°å¯ä»¥é€šè¿‡å¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆ CSPRNG ï¼‰è®¡ç®—å¾—å‡ºã€‚ çœŸéšæœºæ•°ã€‚åŒæ—¶ç¬¦åˆä¸‰ä¸ªæ¡ä»¶çš„éšæœºæ•°ï¼Œä¸»æµè§‚ç‚¹è®¤ä¸ºåªæœ‰é€šè¿‡é‡å­åŠ›å­¦çš„å†…ç¦€éšæœºæ€§ç”Ÿæˆçš„éšæœºæ•°æ‰æ˜¯çœŸéšæœºæ•°ã€‚ 2. ç»Ÿè®¡å­¦ä¼ªéšæœºæ•°ç®—æ³•2.1. å¹³æ–¹å–ä¸­æ³• Middle-square methodç®—æ³•æè¿°è¯¥æ–¹æ³•ç”±å†¯ Â· è¯ºä¼Šæ›¼åœ¨ 1946 å¹´æå‡ºï¼Œç®—æ³•éžå¸¸ç®€å•ï¼š é€‰æ‹©ä¸€ä¸ª m ä½æ•° $N_i$ ä½œä¸ºç§å­ è®¡ç®— $N_i^2$ è‹¥ $N_i^2$ ä¸è¶³ 2m ä½ï¼Œåœ¨å‰è¡¥ 0ã€‚é€‰æ‹©è¿™ä¸ªæ•°ä¸­é—´ m ä¸ªä½çš„æ•°ï¼Œå³ $10^{\lfloor m/2 \rfloor}$ è‡³ $10^{\lfloor m/2 \rfloor + m}$ çš„æ•°ï¼Œå°†ç»“æžœä½œä¸º $N_{i+1}$ã€‚ ä»¥ 675248 ä¸ºç§å­ä¸ºä¾‹ï¼Œ675248 çš„å¹³æ–¹ä¸º 455959861504ï¼Œæœ€åŽå–æœ€ä¸­é—´çš„ 6 ä½æ•°å­—ä½œä¸ºç»“æžœï¼š959861ã€‚ ç®€å•å®žçŽ°Python å®žçŽ°å¦‚ä¸‹ï¼š 1234567seed = '675248'def middleSquare(): global seed length = len(seed) square = int(seed) * int(seed) seed = str(square).zfill(length * 2)[int(length / 2):int(length / 2) + length] return int(seed) ä½“éªŒ See the Pen BGJxVE by Andie (@Andiedie) on CodePen. é—®é¢˜ æ€»ä½“å‘¨æœŸè¿‡çŸ­ã€‚å¯¹äºŽ n ä½æ•°çš„ç§å­ï¼Œå®ƒçš„å¾ªçŽ¯å‘¨æœŸæ€»æ˜¯å°äºŽç­‰äºŽ $8^n$ã€‚ å¦‚æžœä¸­é—´ n ä½éƒ½æ˜¯é›¶ï¼ŒæŽ¥ä¸‹æ¥å°±ä¼šæ°¸è¿œè¾“å‡º 0ã€‚ å¦‚æžœç§å­çš„å‰åŠéƒ¨åˆ†ä¸º 0ï¼Œé‚£ä¹ˆåŽç»­çš„éšæœºåºåˆ—å¾ˆå¿«å°±ä¼šå˜æˆ 0ã€‚ä½ å¯ä»¥å°è¯•åœ¨ä¸Šé¢çš„ Seed ä½ç½®å¡«å…¥0099ï¼Œå¹¶ç‚¹å‡»å¤šæ¬¡ Get Nextã€‚ éšæœºé˜Ÿåˆ—å¡ä½ä¸å˜ã€‚ä¾‹å¦‚å½“ç§å­æ˜¯ 0100ã€2500ã€3792ã€7600 æ—¶ï¼Œéšæœºåºåˆ—å°†æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚è€Œè¿™åªæ˜¯å››ä½æ•°ç§å­æ—¶çš„æƒ…å†µã€‚ ä¸€äº›ç‰¹æ®Šçš„åºåˆ—è¿˜ä¼šäº§ç”ŸæžçŸ­çš„å‘¨æœŸã€‚ä¾‹å¦‚ 0540 -&gt; 2916 -&gt; 5030 -&gt; 3009ã€‚äº‹å®žä¸Šï¼Œ00 ~ 99 è¿™ 100 ä¸ªäºŒä½æ•°ç§å­ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªå‘¨æœŸå¯ä»¥è¶…è¿‡ 14ã€‚ 2.2. çº¿æ€§åŒä½™æ–¹æ³• Linear congruential generatorç®—æ³•æè¿°çº¿æ€§åŒäºŽæ–¹æ³•ï¼ˆç®€ç§° LCG ï¼‰ï¼ŒåŽŸç†å¦‚ä¸‹ï¼š $X_{n+1}= (aX_n+c) \mod m$ å…¶ä¸­ï¼š $m$ æ˜¯æ¨¡æ•°ï¼Œ$m &gt; 0$ $a$ æ˜¯ä¹˜æ•°ï¼Œ$0 &lt; a &lt; m$ $c$ æ˜¯å¢žé‡ï¼Œ$0 \le c &lt; m$ $X_0$ æ˜¯ç§å­ï¼Œ$0 \le X_0 &lt; m$ çº¿æ€§åŒä½™æ–¹æ³•å°±é€šè¿‡ä¸æ–­è®¡ç®—è¯¥å¼å­ï¼Œé€’æŽ¨åœ°ç®—å‡ºéšæœºåºåˆ—ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒLCG å¯¹å‚æ•°çš„é€‰æ‹©æžå…¶æ•æ„Ÿã€‚å¥½çš„å‚æ•°é€‰æ‹©ï¼Œå¯ä»¥ä½¿ LCG äº§ç”Ÿçš„éšæœºæ•°é˜Ÿåˆ—åºåˆ—æ‹¥æœ‰å¾ˆé•¿çš„å‘¨æœŸï¼Œè§£å†³ä¸Šè¿°å¹³æ–¹å–ä¸­æ³•çš„ç¼ºé™·ã€‚ä½†æ˜¯ç³Ÿç³•çš„å‚æ•°é€‰æ‹©ä¹Ÿä¼šä½¿å¾— LCG çš„è¡¨çŽ°éžå¸¸å·®ã€‚ ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼š æ¥æº æ¨¡æ•° $m$ ä¹˜æ•° $a$ å¢žé‡ $c$ C++11 çš„ minstd_rand0 $2^{31}-1$ 16807 0 C++11 çš„ minstd_rand $2^{31}-1$ 48271 0 Java çš„ java.util.Random $2^{48}$ 25214903917 11 è¦æ³¨æ„çš„æ˜¯ï¼ŒLCG å¹¶ä¸æ€»æ˜¯å°†è®¡ç®—ç»“æžœçš„å…¨éƒ¨äºŒè¿›åˆ¶ä½éƒ½ä½œä¸ºè¾“å‡ºã€‚æ¯”å¦‚ Java åœ¨æ¯æ¬¡è¿­ä»£ä¸­ä½¿ç”¨ 48 ä½è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯åªè¿”å›žç»“æžœä¸­çš„ 32 ä¸ªé«˜æœ‰æ•ˆä½ã€‚è¿™æ˜¯å› ä¸ºï¼ˆç»Ÿè®¡ä¸Šï¼‰ä½¿ç”¨è¿™ç§æˆªæ–­æ–¹æ³•å¯ä»¥æ‹¥æœ‰æ›´é•¿çš„å‘¨æœŸï¼Œäº§ç”Ÿæ›´åŠ å¥½çš„éšæœºåºåˆ—ã€‚ ç®€å•å®žçŽ°Python å®žçŽ°å¦‚ä¸‹ï¼Œè¿™é‡Œçš„å‚æ•°ä½¿ç”¨çš„æ˜¯ä¸Ž C++11 çš„ minstd_rand ç›¸åŒçš„å‚æ•° 12345678seed = 1m = 2**31 - 1a = 48271c = 0def linearCongruential(): global seed seed = (a * seed + c) % m return seed ä½“éªŒ See the Pen éšæœºæ•°-çº¿æ€§åŒä½™æ³• by Andie (@Andiedie) on CodePen. ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š LCG é€Ÿåº¦å¿«ï¼Œä¸”éžå¸¸çœç©ºé—´ï¼ˆé€šå¸¸åªéœ€è¦ 32 ä½æˆ–è€… 64 ä½ï¼‰ã€‚ä¸”å½“å‘¨æœŸè¶³å¤Ÿå¤§æ—¶ï¼ŒLCG ç”šè‡³å¯ä»¥é€šè¿‡ä¸€äº›ä¸¥æ ¼çš„ç»Ÿè®¡æµ‹è¯•ã€‚ ç¼ºç‚¹ï¼š é€šè¿‡çº¿æ€§åŒä½™æ–¹æ³•æž„å»ºçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨çš„å‚æ•°å¯ä»¥è½»æ˜“åœ°ç”±å…¶è¾“å‡ºçš„éšæœºåºåˆ—æ¼”ç®—å¾—çŸ¥ï¼Œæ‰€ä»¥æ­¤ç§ä¼ªéšæœºæ•°ç”Ÿæˆå™¨å±žäºŽç»Ÿè®¡å­¦ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚ æ­¤å¤–ï¼ŒLCG äº§ç”Ÿçš„éšæœºåºåˆ—çš„æœ€å¤§å‘¨æœŸæ˜¯æ¨¡æ•° $m$ï¼Œé€šå¸¸æ˜¯ $2^{32}$ å·¦å³ï¼Œè¿™å¯¹äºŽå¤§å¤šæ•°åœºæ™¯æ¥è¯´å·²ç»è¶³å¤Ÿäº†ã€‚ä¸è¿‡å¯¹äºŽæŸäº›åº”ç”¨æ¥è¯´ï¼Œè¿™æ ·çš„å‘¨æœŸè¿˜ä¸å¤Ÿå¤§ã€‚ 2.3. æ¢…æ£®æ—‹è½¬ç®—æ³• Mersenne twisteræ¢…æ£®æ—‹è½¬ç®—æ³•æ¾æœ¬çœŸå’Œè¥¿æ‘æ‹“å£«åœ¨ 1997 å¹´å¼€å‘ï¼Œå¯ä»¥å¿«é€Ÿäº§ç”Ÿé«˜è´¨é‡çš„ä¼ªéšæœºæ•°ï¼Œä¿®æ­£äº†å¤å…¸éšæœºæ•°å‘ç”Ÿç®—æ³•çš„å¾ˆå¤šç¼ºé™·ï¼Œæ˜¯ Rã€Pythonã€Rubyã€IDLã€Free Pascalã€PHPã€Mapleã€MATLABã€GNU å¤šé‡ç²¾åº¦è¿ç®—åº“å’Œ GSL çš„é»˜è®¤ä¼ªéšæœºæ•°äº§ç”Ÿå™¨ã€‚ä»Ž C++11 å¼€å§‹ï¼ŒC++ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§ç®—æ³•ã€‚ ç®—æ³•æè¿°ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯ MT19937ï¼Œå¯ä»¥äº§ç”Ÿ 32 ä½çš„æ•´æ•°åºåˆ—ã€‚æ•´ä¸ªç®—æ³•ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š åˆå§‹åŒ–ï¼šæ ¹æ®ç§å­ç”Ÿæˆåˆå§‹çŠ¶æ€ã€‚ è¿­ä»£ï¼šè¿­ä»£äº§ç”Ÿä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ æå–ï¼šä»Žå½“å‰çŠ¶æ€ä¸­æå–éšæœºæ•°ã€‚ ç®€å•å®žçŽ°Python å®žçŽ°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425class MT19937: def __init__(self, seed = 0): self.state = [0] * 624 self.index = 0 self.state[0] = seed for i in range(1, 624): self.state[i] = (0x6c078965 * (self.state[i - 1] ^ (self.state[i - 1] &gt;&gt; 30)) + i) &amp; 0xffffffff def generate_numbers(self): for i in range(624): y = (self.state[i] &amp; 0x80000000) + (self.state[(i + 1) % 624] &amp; 0x7fffffff) self.state[i] = self.state[(i + 397) % 624] ^ (y &gt;&gt; 1) if y % 2: self.state[i] = self.state[i] ^ 0x9908b0df def extract_number(self): if self.index == 0: self.generate_numbers() y = self.state[self.index] y ^= y &gt;&gt; 11 y ^= (y &lt;&lt; 7) &amp; 0x9d2c5680 y ^= (y &lt;&lt; 15) &amp; 0xefc60000 y ^= y &gt;&gt; 18 self.index = (self.index + 1) % 624 return y ä½“éªŒ See the Pen BGJxvg by Andie (@Andiedie) on CodePen. ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š å‘¨æœŸéžå¸¸é•¿ï¼ŒMT19973 çš„å‘¨æœŸå¯ä»¥è¾¾åˆ° $2^{19973} - 1$ã€‚ å‡åŒ€æ€§å¥½ã€‚ é€Ÿåº¦éžå¸¸å¿«ï¼ŒåŸºæœ¬éƒ½æ˜¯ä½è¿ç®—ã€‚ ç¼ºç‚¹ï¼š ç©ºé—´æˆæœ¬é«˜ï¼Œéœ€è¦ 2.5 KB çš„ç¼“å­˜ç©ºé—´ã€‚ï¼ˆä¹‹åŽåŽŸä½œè€…åˆæŽ¨å‡ºäº†ä»…å ç”¨ 127 bits çš„ TinyMT ï¼‰ ä¸æ˜¯å¯†ç å­¦å®‰å…¨çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚ç”±äºŽæå–å‡½æ•°æ˜¯å¯é€†çš„ä½è¿ç®—ï¼Œæš´éœ²äº†å†…éƒ¨çŠ¶æ€ï¼Œå› æ­¤æ¢…æ£®æ—‹è½¬ç®—æ³•æ˜¯å¯ä»¥çˆ†ç ´çš„ã€‚ å‚è€ƒ éšæœºæ•°. (2018, August 21). Retrieved from ç»´åŸºç™¾ç§‘, è‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦: https://zh.wikipedia.org/w/index.php?title=%E9%9A%8F%E6%9C%BA%E6%95%B0&amp;oldid=50958514 å¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨. (2018, October 9). Retrieved from ç»´åŸºç™¾ç§‘, è‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦: https://zh.wikipedia.org/w/index.php?title=%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%89%E5%85%A8%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90%E5%99%A8&amp;oldid=51577215 å¹³æ–¹å–ä¸­æ³•. (2018, April 29). Retrieved from ç»´åŸºç™¾ç§‘, è‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦: https://zh.wikipedia.org/w/index.php?title=%E5%B9%B3%E6%96%B9%E5%8F%96%E4%B8%AD%E6%B3%95&amp;oldid=49350258 çº¿æ€§åŒä½™æ–¹æ³•. (2018, April 29). Retrieved from ç»´åŸºç™¾ç§‘, è‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦: https://zh.wikipedia.org/w/index.php?title=%E7%B7%9A%E6%80%A7%E5%90%8C%E9%A4%98%E6%96%B9%E6%B3%95&amp;oldid=49350290 æ¢…æ£®æ—‹è½¬ç®—æ³•. (2018, July 30). Retrieved from ç»´åŸºç™¾ç§‘, è‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦: https://zh.wikipedia.org/w/index.php?title=%E6%A2%85%E6%A3%AE%E6%97%8B%E8%BD%AC%E7%AE%97%E6%B3%95&amp;oldid=50644255]]></content>
      <categories>
        <category>Principle</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å®žè®­æŠ¥å‘Š 2nd]]></title>
    <url>%2Fposts%2F5fe4%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸»è¦æŒ‰ç…§å¸ˆå…„çš„æŒ‡å¯¼ï¼Œè¯»è®ºæ–‡äº†è§£ResNetï¼Œè¯»TensorFlowå®˜æ–¹çš„ResNetå®žçŽ°ï¼Œç®€å•ä¿®æ”¹ç½‘ç»œä»¥åŠäº†è§£DeepFashionæ•°æ®é›†ã€‚ 1. æ®‹å·®ç½‘ç»œ1.1. ç†è§£æ®‹å·®ç½‘ç»œ1.1.1. The deeper, the betterå·²ç»æœ‰å¤§é‡å®žéªŒä»¥åŠå®žè·µè¯æ˜Žï¼Œç½‘ç»œçš„å±‚çº§ç»“æž„è¶Šæ·±ï¼Œç½‘ç»œçš„è¡¨çŽ°å°±è¶Šå¥½ã€‚ Very deep convolutional networks for large-scale image recognition å’Œ Going deeper with convolutions ä¸¤ç¯‡è®ºæ–‡å‡è¡¨æ˜Žç½‘ç»œçš„æ·±åº¦è‡³å…³é‡è¦ã€‚ åœ¨ImageNetæ•°æ®é›†ä¸­è¡¨çŽ°ä¼˜ç§€çš„æ¨¡åž‹ï¼Œéƒ½å…·æœ‰â€œéžå¸¸æ·±â€çš„ç½‘ç»œï¼Œæ·±åº¦åœ¨16åˆ°30ä¹‹é—´ã€‚ è®¸å¤šé‡è¦çš„è§†è§‰è¯†åˆ«ä»»åŠ¡ä¹Ÿé€šè¿‡ä½¿ç”¨éžå¸¸æ·±çš„æ¨¡åž‹ï¼Œå–å¾—äº†éžå‡¡çš„æ•ˆæžœã€‚ 1.1.2. The deeper the network, the harder it is to trainæ—¢ç„¶ç½‘ç»œæ·±åº¦å¦‚æ­¤é‡è¦ï¼Œé‚£ä¹ˆè®­ç»ƒå‡ºæ›´å¥½çš„ç½‘ç»œï¼Œå²‚ä¸æ˜¯å°±å’Œä¸æ–­å †å ç½‘ç»œæ·±åº¦ä¸€æ ·ç®€å•ï¼Ÿ å½“ç„¶ä¸æ˜¯ï¼ä¸æ–­åŠ æ·±çš„ç½‘ç»œä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸ Vanishing/Exploding Gradients æ›´æ·±çš„ç½‘ç»œé‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯è‡­åæ˜­è‘—çš„æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜ï¼Œå®ƒä½¿å¾—ç½‘ç»œä¸€å¼€å§‹å°±éš¾ä»¥æ”¶æ•›ã€‚ä¸è¿‡çŽ°åœ¨è¿™ä¸ªé—®é¢˜å¾ˆå¤§ç¨‹åº¦ä¸Šå·²ç»å¯ä»¥é€šè¿‡é‡‡ç”¨æ ‡å‡†åˆå§‹åŒ– Normalized Initializationå’Œä¸­é—´å±‚æ ‡å‡†åŒ– Intermediate Normalizationè§£å†³ã€‚ é€€åŒ– Degradation è™½ç„¶é€šè¿‡ä¸Šè¿°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿æ•°åå±‚çš„ç½‘ç»œé€šè¿‡éšæœºæ¢¯åº¦ä¸‹é™ SGDå¼€å§‹æ”¶æ•› ï¼Œä½†æ˜¯é€€åŒ–çŽ°è±¡æŽ¥è¸µè€Œè‡³ï¼šéšç€ç½‘ç»œæ·±åº¦çš„å¢žåŠ ï¼Œæ¨¡åž‹çš„å‡†ç¡®åº¦ä¼šåœ¨æŸä¸ªæ·±åº¦è¾¾åˆ°é¥±å’Œï¼Œä¹‹åŽè¿…é€Ÿä¸‹é™ã€‚æˆ‘ä»¬æš‚æ—¶æŠŠå‡†ç¡®åº¦é¥±å’Œæ—¶çš„æ·±åº¦ç§°ä¸ºé€‚å®œæ·±åº¦ï¼Œé€€åŒ–çŽ°è±¡è¡¨çŽ°ä¸ºï¼Œå½“ç½‘ç»œæ·±åº¦è¶…è¿‡é€‚å®œæ·±åº¦æ—¶ï¼Œè®­ç»ƒè¯¯å·®ä¼šè¶Šæ¥è¶Šé«˜ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´æ›´é«˜çš„æµ‹è¯•è¯¯å·®ã€‚å¦‚ä¸‹å›¾ï¼š è¿™æ˜¯20å±‚å’Œ56å±‚çš„ç®€å•ç½‘ç»œå†CIFAR-10æ•°æ®é›†ä¸Šçš„è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®ã€‚å¯ä»¥çœ‹å‡ºï¼Œç”±äºŽé€€åŒ–çŽ°è±¡ï¼Œæ›´æ·±çš„ç½‘ç»œåè€Œè¡¨çŽ°æ›´å·®ã€‚ 1.1.3. æ®‹å·®æ˜ å°„ Residual Mappingé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ­£åˆ©ç”¨æ•°ä¸ªå †å çš„å±‚æ‹Ÿåˆä¸€ä¸ªç›®æ ‡æ˜ å°„$\mathcal{H}(x)$ã€‚ä½†åœ¨æ·±åº¦æ®‹å·®å­¦ä¹ æ¡†æž¶ deep residual learning framework ä¸­ï¼Œæˆ‘ä»¬ä¸ç›´æŽ¥æ‹Ÿåˆç›®æ ‡æ˜ å°„$\mathcal{H}(x)$ï¼Œè€Œæ˜¯è¿™å‡ ä¸ªå †å çš„å±‚æ‹Ÿåˆå¦ä¸€ä¸ªæ˜ å°„$\mathcal{F}(x) := \mathcal{H}(x) - x$ã€‚æ­¤æ—¶ï¼Œç›®æ ‡æ˜ å°„è¢«é‡å†™ä¸º$\mathcal{F}(x) + x$ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå‡è®¾ï¼šæ®‹å·®æ˜ å°„$\mathcal{H}(x)-x$æ¯”åŽŸæ˜ å°„$\mathcal{H}(x)$æ›´å®¹æ˜“ä¼˜åŒ–ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ®‹å·®å­¦ä¹ ï¼Ÿå¼•ç”¨theoneçš„ç›´è§‰æè¿°ï¼š å‡è®¾è¿™ä¸ªç½‘ç»œçš„ç›®æ ‡æ˜ å°„æ˜¯è¾“å‡º5ï¼Œè¾“å‡º5.1ï¼Œå³$\mathcal{H}(5)=5.1$ã€‚å¦‚æžœç›´æŽ¥æ‹Ÿåˆè¿™ä¸ªæ˜ å°„ï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ‹Ÿåˆç»“æžœï¼Œå‡½æ•°$\mathcal{Fâ€™}(5)=5.1$ã€‚å¼•å…¥æ®‹å·®åŽï¼Œæ‹Ÿåˆç»“æžœçš„å‡½æ•°å˜ä¸º$\mathcal{F}(5)=0.1$ï¼ˆå…¶ä¸­$\mathcal{H}(5)=\mathcal{F}(5)+5$ ï¼‰ã€‚ çŽ°åœ¨å‡è®¾è¾“å‡ºçš„è¦æ±‚ä»Ž5.1å˜ä¸ºäº†5.2ï¼Œå³$\mathcal{H}(5)=5.2$ã€‚é‚£ä¹ˆç›´æŽ¥æ‹Ÿåˆçš„å‡½æ•°$\mathcal{Fâ€™}(5)$ä»Ž5.1åˆ°5.2å˜åŒ–äº†$1/51\approx0.2$ï¼Œè€Œå¼•å…¥æ®‹å·®çš„æ˜ å°„$\mathcal{F}(5)$ä»Ž0.1åˆ°0.2å˜åŒ–äº†100%ã€‚å¯ä»¥çœ‹å‡ºï¼Œå¼•å…¥æ®‹å·®æ˜ å°„å¯¹äºŽè¾“å‡ºçš„å˜åŒ–æ›´åŠ æ•æ„Ÿï¼Œå¯¹æƒé‡çš„è°ƒæ•´ä½œç”¨æ›´å¤§ã€‚ å› æ­¤ï¼Œæ®‹å·®å­¦ä¹ çš„æ€æƒ³å¯ä»¥ç†è§£ä¸ºï¼šåŽ»æŽ‰ç›¸åŒçš„ä¸»ä½“éƒ¨åˆ†ï¼Œä»Žè€Œçªå‡ºå¾®å°çš„å˜åŒ–ã€‚ 1.1.4. å¿«æ·è¿žæŽ¥ Shortcut Connectionsä¸Šè¿°æ˜ å°„$\mathcal{F}(x)+x$ç”±ä¸€ä¸ªå¿«æ·è¿žæŽ¥å®žçŽ°ï¼Œå¦‚ä¸‹å›¾ï¼š åœ¨è¿™é‡Œï¼Œå¿«æ·è¿žæŽ¥æ˜¯ä¸€ä¸ªæ’ç­‰æ˜ å°„ï¼Œç›´æŽ¥è¢«æ·»åŠ åˆ°æ•´ä¸ªå †å å±‚çš„è¾“å‡º$\mathcal{F}(x)$ä¸Šï¼Œå¾—åˆ°$\mathcal{F}(x)+x$ã€‚æ’ç­‰å¿«æ·è¿žæŽ¥ä¸ä»…ä¸å¢žåŠ é¢å¤–çš„å‚æ•°ï¼Œè€Œä¸”ä¸å¢žåŠ è®¡ç®—å¤æ‚åº¦ã€‚ å…¬å¼è¡¨ç¤ºä¸ºï¼š $$y=\mathcal{F}(x, {W_i}) + x$$ è¿™é‡Œè¦æ±‚$x$ä¸Ž$\mathcal{F}(x)$å…·æœ‰ç›¸åŒçš„ç»´åº¦ï¼Œå¦‚æžœç»´åº¦ä¸åŒï¼Œåˆ™ä½¿ç”¨ç®€å•çš„çº¿æ€§æŠ•å½±$W_s$æ¥åŒ¹é…ç»´åº¦ï¼š $$y=\mathcal{F}(x,W_i)+W_sx$$ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ’ç­‰æ˜ å°„ï¼Ÿå®žé™…ä¸Šåœ¨ResNetåŽŸå›¢é˜Ÿçš„å¦ä¸€ç¯‡è®ºæ–‡[2]ä¸­è§£é‡Šäº†è¿™ä¸ªé—®é¢˜ã€‚åœ¨æ–‡ç« ä¸­ï¼Œä½œè€…è®¾è®¡äº†å…­ç§å¿«æ·è¿žæŽ¥çš„æ˜ å°„ï¼š å®žéªŒè¯æ˜Žï¼Œæ’ç­‰æ˜ å°„çš„è¯¯å·®è¡°å‡æœ€å¿«ï¼Œè¯¯å·®ä¹Ÿæœ€å°ï¼Œå…¶ä»–å¿«æ·è¿žæŽ¥çš„å½¢å¼éƒ½äº§ç”Ÿäº†è¾ƒå¤§çš„è¯¯å·®ï¼ˆæœ‰çš„ç”šè‡³è¶…è¿‡äº†20%ï¼‰ï¼š 1.1.5. æž„å»ºå— Building Blockåƒä¸Šä¸€å°èŠ‚ä¸­ä¸€ä¸ªæ®‹å·®å•å…ƒçš„ç»“æž„ï¼Œè¢«ç§°ä¸ºä¸€ä¸ªæž„å»ºå— Building Blockã€‚æ­¤å¤–è¿˜æœ‰å¦ä¸€ç§ç“¶é¢ˆæž„å»ºå— Bottleneck Building Blockï¼š è¿™ç§æž„å»ºå—ç”±ä¸‰ä¸ªå·ç§¯å±‚å †å è€Œæˆï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åŽä¸€ä¸ª$1\times1$å·ç§¯å±‚è´Ÿè´£å‡å°æˆ–æ¢å¤ç»´åº¦ï¼Œä¸­é—´çš„$3\times3$å·ç§¯å±‚è´Ÿè´£æå–ç‰¹å¾ã€‚è¿™æ ·çš„æž„å»ºå—é€šå¸¸ç”¨äºŽæ›´æ·±çš„ç½‘ç»œä¸­ã€‚ 1.2. å®˜æ–¹æ¨¡åž‹ä»¥ä¸‹ä»£ç æ¥è‡ªäºŽTensorFlowå®˜æ–¹ç»™å‡ºçš„ResNetå®žçŽ°ï¼Œç”¨äºŽè®­ç»ƒCIFAR-10æ•°æ®é›†ã€‚æŽ¥ä¸‹æ¥å°†é€šè¿‡å…¨éƒ¨ä½¿ç”¨é»˜è®¤é…ç½® æƒ…å†µä¸‹ï¼Œäº†è§£ResNetæ˜¯å¦‚ä½•è¢«æž„å»ºçš„ã€‚ 1.2.1. é…ç½®è§£é‡Šåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œpython cifar10_main.pyï¼Œä½¿ç”¨çš„æ˜¯å¦‚ä¸‹é…ç½®ï¼š data_dir=/tmp/cifar10_data å†³å®šæ•°æ®é›†çš„ä½ç½®ï¼Œè¿™ä¸ªå‚æ•°å¯¹æ¨¡åž‹æ²¡æœ‰å½±å“ï¼Œä¸è®¨è®ºã€‚ model_dir=/tmp/cifar10_model å†³å®šæ¨¡åž‹å­˜å‚¨çš„ä½ç½®ï¼Œè¿™ä¸ªå‚æ•°å¯¹æ¨¡åž‹æ²¡æœ‰å½±å“ï¼Œä¸è®¨è®ºã€‚ resnet_size=32 æ¨¡åž‹ä¸­å·ç§¯å±‚çš„æ•°é‡ train_epochs=250 é’ˆå¯¹æ•´ä¸ªæ•°æ®é›†çš„è®­ç»ƒæ¬¡æ•° epochs_between_evals=10 è¿™ä¸ªå‚æ•°å¯¹æ¨¡åž‹æ²¡æœ‰å½±å“ï¼Œä¸è®¨è®ºã€‚ batch_size=128 æ¯æ¬¡ä»Žè®­ç»ƒé›†ä¸­å–å‡ºçš„æ ·æœ¬æ•° å·ç§¯å±‚çš„æ•°é‡ç¬¬ä¸‰ä¸ªå‚æ•°resnet_size=32è¡¨ç¤ºå·ç§¯å±‚çš„æ•°é‡ï¼Œåœ¨å®˜æ–¹å®žçŽ°ä¸­ï¼Œå¯¹è¿™ä¸ªæ•°é‡æœ‰ä¸€ä¸ªé™åˆ¶ï¼š 123# cifar10_main.pyif resnet_size % 6 != 2: raise ValueError('resnet_size must be 6n + 2:', resnet_size) ä¹Ÿå°±æ˜¯è¯´ï¼Œå·ç§¯å±‚çš„æ•°é‡å¿…é¡»æ˜¯6n+2ã€‚ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„é™åˆ¶å‘¢ï¼Ÿ é¦–å…ˆè§£é‡Š6nã€‚é€šè¿‡é˜…è¯»ResNetçš„è®ºæ–‡[1]ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæœ‰ä¸¤ç§æž„å»ºå—â€”â€”æ™®é€šçš„æž„å»ºå—å…·æœ‰ä¸¤ä¸ªå·ç§¯å±‚ã€ç“¶é¢ˆæž„å»ºå—å…·æœ‰ä¸‰ä¸ªå·ç§¯å±‚ã€‚ å‡è®¾æˆ‘ä»¬åªä½¿ç”¨å…·æœ‰ä¸¤ä¸ªå·ç§¯å±‚çš„æ™®é€šæž„å»ºå—ï¼Œé‚£ä¹ˆåªéœ€è¦è¦æ±‚å·ç§¯å±‚æ»¡è¶³2nå³å¯ï¼Œå› ä¸ºæ¯ä¸ªæž„å»ºå—æœ‰ä¸¤ä¸ªå·ç§¯å±‚ï¼Œæž„å»ºå—æ˜¯ä¸å¯åˆ†çš„ï¼Œæ‰€ä»¥æœ‰nä¸ªæž„å»ºå—åˆ™è¡¨ç¤ºæœ‰2nä¸ªå·ç§¯å±‚ï¼Œè¿™å¾ˆå¥½ç†è§£ã€‚åŒæ ·çš„é“ç†ï¼Œå¦‚æžœæˆ‘ä»¬åªä½¿ç”¨æœ‰ä¸‰ä¸ªå·ç§¯å±‚çš„ç“¶é¢ˆæž„å»ºå—ï¼Œåˆ™è¦æ±‚å·ç§¯å±‚æœ‰3nä¸ªã€‚ ä½†ç”±äºŽå®˜æ–¹çš„ResNetåŒæ—¶æ”¯æŒä½¿ç”¨ä¸¤ç§æž„å»ºå—ï¼Œä¸ºäº†å®žçŽ°è¿™ä¸€ç‚¹ï¼Œå°±åªèƒ½æ‰¾2nå’Œ3nçš„æœ€å°å…¬å€æ•°â€”â€”6nã€‚ æŽ¥ç€è§£é‡Šä¸ºä»€ä¹ˆè¦+2ã€‚é€šè¿‡ä¸Šé¢çš„è§£é‡Šï¼Œå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š6nè¿™ä¸ªæ•°é‡è¡¨ç¤ºçš„æ˜¯æž„å»ºå—ä¸­å·ç§¯å±‚çš„æ€»æ•°ã€‚è€Œ+2è‡ªç„¶å¾—å°±å¯ä»¥çœ‹åšæ˜¯ç½‘ç»œä¸­å…¶ä»–éƒ¨åˆ†çš„å·ç§¯å±‚æ€»æ•°ï¼ŒæŸ¥çœ‹æºç ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸¤æ®µï¼š 12345678910111213141516# resnet_model.py# æž„å»ºå—ä¹‹å‰çš„å·ç§¯ï¼Œç”¨äºŽç»´åº¦è½¬æ¢inputs = conv2d_fixed_padding(...)...# æž„å»ºå—for i, num_blocks in enumerate(self.block_sizes): num_filters = self.num_filters * (2**i) inputs = block_layer(...)...# æž„å»ºå—ä¹‹åŽçš„å¹³å‡æ± åŒ–# å¹³å‡æ± åŒ–æ˜¯å·ç§¯çš„ä¸€ç§inputs = tf.layers.average_pooling2d(...) ä»Žä»£ç å¯ä»¥çœ‹å‡ºï¼Œé™¤äº†åœ¨æž„å»ºå—çš„å‰åŽåˆ†åˆ«æœ‰ä¸€æ¬¡ç”¨äºŽç»´åº¦è½¬æ¢çš„å·ç§¯æ ¸ä¸€æ¬¡å¹³å‡æ± åŒ–ï¼ˆå·ç§¯çš„ä¸€ç§ï¼‰ï¼Œè¿™å°±æ˜¯+2çš„æ¥æºã€‚ å› æ­¤å¯ä»¥å¾—å‡ºï¼Œåœ¨è¿™ç§å®žçŽ°ä¸­å·ç§¯å±‚æ•°æ•°é‡ä¸€å®šæ»¡è¶³6n+2ã€‚ å…¶ä»–å‚æ•°å¦å¤–å¦ä¸ªå€¼å¾—ä¸€æçš„å‚æ•°æ˜¯train_epochså’Œbatch_sizeã€‚å‰è€…æŒ‡çš„æ˜¯å¯¹äºŽæ•´ä¸ªè®­ç»ƒé›†ï¼Œæ¨¡åž‹è¿›è¡Œè®­ç»ƒçš„æ¬¡æ•°ï¼›åŽè€…åˆ™è¡¨ç¤ºï¼Œæ¯æ¬¡ä»Žè®­ç»ƒé›†ä¸­å–å‡ºçš„æ ·æœ¬æ•°ã€‚ å¯ä»¥å¾ˆç®€å•çš„å¾—åˆ°ä¸€ä¸ªå…¬å¼ï¼Œè®¡ç®—æ€»çš„è®­ç»ƒæ­¥æ•°ï¼š $$step = \frac{train_epochs\times dataset_size}{batch_size}$$ å°†é»˜è®¤æ•°æ®ï¼Œtrain_epochs=250ã€batch_size=128ä»¥åŠCIFAR-10çš„è®­ç»ƒé›†å¤§å°dataset_size=50000å¸¦å…¥å¯ä»¥ç®—å‡ºï¼Œstep=97656.25ã€‚ å®žé™…çš„è®­ç»ƒæƒ…å†µå¦‚ä¸‹ï¼š é¢˜å¤–è¯å¯ä»¥é€šè¿‡æ—¥å¿—çœ‹åˆ°ï¼Œåœ¨GeForce GTX 1080ä¸Šï¼Œè®­ç»ƒé€Ÿåº¦å¤§æ¦‚å¦‚ä¸‹ï¼ˆå¤§æ¦‚20step/sï¼‰ï¼š æ‰€ä»¥æ€»çš„è®­ç»ƒæ—¶é—´å¤§æ¦‚æ˜¯97656/20=4882ç§’ï¼Œå¤§æ¦‚ä¸€ä¸ªåŠå°æ—¶ã€‚ 1.2.2. ç½‘ç»œç»“æž„1) æ®‹å·®ç»“æž„ä¹‹å‰è¾“å…¥å…ˆæžæ¸…æ¥šæ•´ä¸ªç½‘ç»œçš„è¾“å…¥ã€‚è¾“å…¥æ¥è‡ªCIFAR-10çš„è®­ç»ƒé›†ï¼Œåœ¨è¿™ä¸ªå®žçŽ°ä¸­ï¼Œå›¾ç‰‡è¢«è¿›è¡Œäº†å¤šæ¬¡é¢„å¤„ç†ï¼ˆåŒ…æ‹¬éšæœºå‰ªè£ã€éšæœºé•œåƒåè½¬ã€æ ‡å‡†åŒ–ç­‰ï¼‰ï¼Œæœ€åŽå½¢æˆäº†$3\times32\times32$çš„çŸ©é˜µï¼Œæˆ–è€…å†™æˆ[3, 32, 32]ï¼Œå¯¹åº”[channels, width, height]ã€‚å®žçŽ°ä¸­è¿˜å¤„ç†äº†channels_lastå’Œchannels_firstçš„é—®é¢˜ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿å°±è®¤ä¸ºæ‰€æœ‰è¾“å…¥å›¾ç‰‡éƒ½æ˜¯channels_firstã€‚æ­¤å¤–ï¼Œæ¯æ¬¡ä»Žæ•°æ®é›†ä¸­å–å‡ºçš„æ˜¯batch_size=128å¼ å›¾ï¼Œæ‰€ä»¥å®žé™…ä¸Šçš„è¾“å…¥çŸ©é˜µä¸º[128, 3, 32, 32]ï¼Œå¯¹åº”[batch, channels, width, height]ã€‚ ç½‘ç»œä¸­ä½¿ç”¨çš„å·ç§¯ç½‘ç»œä¸­å¹¶ä¸æ˜¯ç›´æŽ¥ä½¿ç”¨TensorFlowçš„å·ç§¯å®žçŽ°ï¼Œè€Œæ˜¯å®šä¹‰äº†ä¸€ä¸ªåä¸ºconv2d_fixed_paddingçš„å·ç§¯æ“ä½œã€‚é€»è¾‘å¦‚ä¸‹ï¼š å¦‚æžœstrides=1ï¼Œåˆ™é€šè¿‡paddingä¿è¯å·ç§¯å‰åŽsizeä¸€è‡´ å¦‚æžœstrides&gt;=1ï¼Œåˆ™é€šè¿‡paddingä½¿å¾—å·ç§¯åŽçš„ç‰¹å¾å›¾çš„sizeå˜ä¸º$\lceil \frac{size}{strides} \rceil$ é€šè¿‡è¯»æºç å¯çŸ¥ï¼Œå®žé™…ä¸Šæ˜¯é€šè¿‡paddingå°†kernel_sizeçš„å½±å“æŠµæ¶ˆï¼Œè¿‡ç¨‹æ¯”è¾ƒç¹çå°±ä¸å†™å‡ºæ¥äº†ã€‚ ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚æžœè¾“å…¥ä¸º[128, 3, 32, 32]ï¼Œå·ç§¯æ ¸æ•°é‡ä¸º16 strides=1ï¼Œè¾“å‡ºä½[128, 16, 32, 32]ï¼Œsizeä¾æ—§ä¸º32*32 strides=3ï¼Œè¾“å‡ºä½[128, 16, 11, 11]ï¼Œå…¶ä¸­$11 = \lceil \frac{32}{3} \rceil$ åœ¨ä¹‹åŽçš„æè¿°ä¸­ï¼Œæ‰€æœ‰çš„å·ç§¯éƒ½æŒ‡çš„æ˜¯conv2d_fixed_paddingã€‚ ç¬¬ä¸€æ¬¡å·ç§¯æ¥è‡ªè®­ç»ƒé›†çš„è¾“å…¥[128, 3, 32, 32]åœ¨è¿™é‡Œç»åŽ†äº†ç¬¬ä¸€æ¬¡å·ç§¯ï¼Œå‚æ•°å¦‚ä¸‹ï¼š strides = 1 filters = 16 kernel_size = 3 è¿™æ¬¡å·ç§¯çš„ç›®çš„ä¸»è¦æ˜¯è¿›è¡Œç»´åº¦çš„è½¬æ¢ï¼Œå·ç§¯çš„çš„ç»“æžœæ˜¯[128, 16, 32, 32]ã€‚ æœ€å¤§æ± åŒ–å®žçŽ°ä¸­å®žé™…ä¸Šå®šä¹‰äº†æœ€å¤§æ± åŒ–çš„æ“ä½œï¼Œä½†æ˜¯ç”±äºŽé»˜è®¤é…ç½®ä¸‹ï¼Œè¿™ä¸ªæ“ä½œå¹¶ä¸ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥è¿™é‡Œå¿½ç•¥å®ƒã€‚ æ®‹å·®å±‚ä¹‹å‰æ€»ç»“ 2) æ®‹å·®ç»“æž„è¿™æ˜¯ç½‘ç»œçš„é‡ç‚¹ï¼Œæ•´ä¸ªæ®‹å·®ç»“æž„åˆ†ä¸ºå¤šä¸ªæ®‹å·®å±‚ï¼Œæ¯ä¸ªæ®‹å·®å±‚åˆ†ä¸ºå¤šä¸ªæž„å»ºå—ï¼Œæ¯ä¸ªæž„å»ºå—å‘¢æœ‰å¤šä¸ªå·ç§¯å±‚ï¼Œæ¯ä¸ªå·ç§¯å±‚å†…æœ‰å¤šä¸ªå·ç§¯æ ¸ã€‚ä¸‹é¢å°†é€ä¸€è¿›è¡Œä»‹ç»ã€‚ æ®‹å·®å±‚åœ¨ä¸€ä¸ªæ®‹å·®ç»“æž„ä¸­ï¼Œæœ‰å¤šä¸ªæ®‹å·®å±‚ã€‚æˆ‘ä»¬é‡‡ç”¨é»˜è®¤é…ç½®çš„æƒ…å†µä¸‹ï¼Œæœ‰ä¸‰ä¸ªæ®‹å·®å±‚ã€‚ å®žé™…ä¸Šåœ¨å®˜æ–¹å®žçŽ°çš„ResNetä¸­ï¼Œæ®‹å·®å±‚è¢«å›ºå®šä¸º3å±‚ï¼š 123456# cifar10_main.pysuper(Cifar10Model, self).__init__( ..., block_sizes=[num_blocks] * 3, block_strides=[1, 2, 2]) è¿™æ˜¯æž„å»ºæ¨¡åž‹æ—¶çš„ä»£ç ï¼Œå…¶ä¸­block_sizeså’Œblock_stridesçš„é•¿åº¦å°±æ˜¯æ®‹å·®å±‚çš„æ•°é‡ï¼Œè¢«å›ºå®šä¸ºäº†3å±‚ã€‚ æ¯ä¸ªæ®‹å·®å±‚å†…éƒ¨ï¼Œç‰¹å¾å›¾çš„ç»´åº¦æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯åœ¨æ®‹å·®å±‚ä¹‹é—´ç‰¹å¾å›¾ç»´åº¦ä¸åŒã€‚ æž„å»ºå—æ¯ä¸ªæ®‹å·®å±‚å†…éƒ¨æœ‰å¤šä¸ªæž„å»ºå—ï¼Œæˆ‘ä»¬é‡‡ç”¨é»˜è®¤é…ç½®çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ®‹å·®å±‚æœ‰5ä¸ªæž„å»ºå—ã€‚ 1234567# cifar10_main.pynum_blocks = (resnet_size - 2) // 6super(Cifar10Model, self).__init__( ..., block_sizes=[num_blocks] * 3, block_strides=[1, 2, 2]) åŒæ ·æ˜¯è¿™æ®µä»£ç ï¼Œå…¶ä¸­num_blocksä»£è¡¨æ¯ä¸€å±‚ä¸­æž„å»ºå—çš„æ•°é‡ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯é€šè¿‡å·ç§¯å±‚çš„æ•°é‡resnet_sizeè®¡ç®—å‡ºæ¥çš„ã€‚é»˜è®¤æƒ…å†µä¸‹resnet_size=32ï¼Œæ‰€ä»¥num_blocks=5ï¼Œæ¯ä¸ªæ®‹å·®å±‚æœ‰5ä¸ªæž„å»ºå—ã€‚ ä»Žä¸Šæ–‡æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œè®ºæ–‡[1]ä¸­æž„å»ºå—å…±æœ‰ä¸¤ç§å®žçŽ°ï¼Œåˆ†åˆ«ä¸ºæ™®é€šæž„å»ºå—v1å’Œç“¶é¢ˆæž„å»ºå—v1ï¼Œåœ¨å¦ä¸€ç¯‡è®ºæ–‡[2]ä¸­ï¼Œè¿™ä¸¤ç§æž„å»ºå—æœ‰ä¸åŒçš„å®žçŽ°â€”â€”æ™®é€šæž„å»ºå—v2å’Œç“¶é¢ˆæž„å»ºå—v2ã€‚v1å’Œv2ä¸¤ç§å®žçŽ°çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼šBNå±‚æ˜¯åœ¨å·ç§¯æ“ä½œä¹‹å‰æ‰§è¡Œè¿˜æ˜¯ä¹‹åŽæ‰§è¡Œï¼Œå…·ä½“å¯ä»¥è§è®ºæ–‡[2]ã€‚åœ¨è¿™å››ä¸­æž„å»ºå—ä¸­ï¼Œæ ¹æ®é»˜è®¤é…ç½®ï¼š 123456# cifar10_main.pyDEFAULT_VERSION = 2super(Cifar10Model, self).__init__( ..., bottleneck=False) å¯ä»¥å¾—å‡ºï¼Œä½¿ç”¨çš„æ˜¯æ™®é€šæž„å»ºå—v2ã€‚ å·ç§¯å±‚å’Œå·ç§¯æ ¸ç”±ä¸Šå›¾ï¼Œæ¯ä¸ªæž„å»ºå—éƒ½ç”±ä¸¤æ¬¡å·ç§¯æ“ä½œæž„æˆï¼Œæ¯æ¬¡å·ç§¯æ“ä½œä¹‹å‰éƒ½ä¼šè¿›è¡ŒBNå’ŒReLUï¼Œæœ€åŽå åŠ ä¸€ä¸ªå¿«æ·è¿žæŽ¥çš„æ’ç­‰æ˜ å°„ï¼Œå¾—å‡ºç»“æžœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæž„å»ºå—ä¸­æœ‰ä¸¤ä¸ªå·ç§¯å±‚ã€‚ ç¬¬ä¸€ä¸ªå·ç§¯å±‚ä¸­çš„æ¯ä¸ªå·ç§¯æ ¸çš„å‚æ•°å¦‚ä¸‹ï¼š ç¬¬ä¸€ä¸ªæ®‹å·®å±‚ä¸­ï¼šstrides=1ã€kernel_size=3ã€filters=16 ç¬¬ä¸€ä¸ªæ®‹å·®å±‚ä¸­ï¼šstrides=2ã€kernel_size=3ã€filters=32 ç¬¬ä¸€ä¸ªæ®‹å·®å±‚ä¸­ï¼šstrides=2ã€kernel_size=3ã€filters=64 å…¶ä¸­strideså’Œkernel_sizeæ˜¯åœ¨å†å¦‚ä¸‹ä»£ç ä¸­å®šä¹‰ï¼š 123456# cifar10_main.pysuper(Cifar10Model, self).__init__( ..., kernel_size=3, block_strides=[1, 2, 2]) filtersåˆ™é€šè¿‡ä»¥ä¸‹ä»£ç å®šä¹‰ï¼š 123456789# cifar10_main.pysuper(Cifar10Model, self).__init__( ..., num_filters=16, block_sizes=[num_blocks] * 3)# resnet_model.pyfor i, num_blocks in enumerate(self.block_sizes): num_filters = self.num_filters * (2**i) å¯ä»¥çœ‹å‡ºï¼Œåœ¨æ¯ä¸ªæ®‹å·®å±‚ï¼Œfiltersæ•°é‡éƒ½ä¼šåŠ å€ã€‚ å·ç§¯ä»£ç ï¼š 1234inputs = conv2d_fixed_padding( inputs=inputs, filters=filters, kernel_size=3, strides=strides, data_format=data_format) ç¬¬äºŒä¸ªå·ç§¯å±‚ä¸­çš„å·ç§¯æ ¸ï¼Œå‚æ•°ä¸Žç¬¬ä¸€å±‚ä¸­çš„åŸºæœ¬ä¸€è‡´ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œæ‰€æœ‰çš„å·ç§¯æ ¸çš„strides=1ã€‚ 1234inputs = conv2d_fixed_padding( inputs=inputs, filters=filters, kernel_size=3, strides=1, data_format=data_format) æ®‹å·®å±‚ä¹‹é—´çš„æŠ•å½±ç”±äºŽæ®‹å·®å±‚ä¹‹é—´ï¼Œè¾“å…¥å’Œè¾“å‡ºå­˜åœ¨ç»´åº¦ä¸åŒçš„é—®é¢˜ï¼Œæ‰€ä»¥æ¯ä¸ªæ®‹å·®å±‚çš„ç¬¬ä¸€ä¸ªæž„å»ºå—éƒ½éœ€è¦è¿›è¡ŒæŠ•å½±ã€‚ 12345678910111213# æŠ•å½±å‡½æ•°def projection_shortcut(inputs): return conv2d_fixed_padding( inputs=inputs, filters=filters_out, kernel_size=1, strides=strides, data_format=data_format)# æ¯ä¸ªæ®‹å·®å±‚çš„ç¬¬ä¸€ä¸ªæž„å»ºå—è¿›è¡ŒæŠ•å½±inputs = block_fn(inputs, filters, training, projection_shortcut, strides, data_format)# å…¶ä½™çš„æž„å»ºå—ä¸éœ€è¦æŠ•å½±for _ in range(1, blocks): inputs = block_fn(inputs, filters, training, None, 1, data_format) ç»“æžœ ç»è¿‡æ®‹å·®ç»“æž„ä¹‹åŽï¼Œè¾“å…¥å’Œè¾“å‡ºæƒ…å†µå¦‚ä¸Šå›¾ã€‚ 3) æ®‹å·®ç»“æž„ä¹‹åŽæ®‹å·®ç»“æž„ä¹‹åŽå°±æ˜¯ç®€å•çš„BNå±‚ã€ReLUå±‚ã€å¹³å‡æ± åŒ–å±‚å’Œå…¨è¿žæŽ¥å±‚ï¼š 4) æ€»ä½“ç½‘ç»œç»“æž„ é¢˜å¤–è¯PPTæ˜¯ä¸–ç•Œä¸Šæœ€å¥½ç”¨çš„ä½œå›¾å·¥å…·23333ï¼Œä¸Šå›¾çš„PPTæºæ–‡ä»¶é“¾æŽ¥ 1.3. ä¿®æ”¹å®˜æ–¹æ¨¡åž‹å¾—ç›ŠäºŽå®˜æ–¹æ¨¡åž‹é«˜å¯ç”¨çš„å®žçŽ°ï¼Œå¯¹è¿™ä¸ªæ¨¡åž‹è¿›è¡Œç®€å•ä¿®æ”¹éžå¸¸ç®€å•ï¼š å¢žå‡å·ç§¯å±‚/æ®‹å·®ç»“æž„ï¼šåœ¨è¿è¡Œæ—¶åŠ å…¥å‚æ•°--resnet_size=mï¼Œè¿™é‡Œmå°±æ˜¯å·ç§¯å±‚çš„æ•°é‡ï¼Œå¿…é¡»æ»¡è¶³m % 6 == 2ã€‚å¯ä»¥å¾—å‡ºæ•´ä¸ªç½‘ç»œä¸­æž„å»ºå—çš„æ•°é‡ä¸ºblock_num = (m - 2) // 2ã€‚æœ€ç»ˆå·ç§¯å±‚çš„æ•°é‡å®žé™…ä¸Šçš„ä¸Žä½ é‡‡ç”¨ä»€ä¹ˆæž„å»ºå—æœ‰å…³ï¼Œå¦‚æžœä½¿ç”¨æ™®é€šæž„å»ºå—ï¼Œåˆ™å·ç§¯å±‚æ•°é‡ä¸ºblock_num * 2ï¼Œå¦‚æžœé‡‡ç”¨ç“¶é¢ˆæž„å»ºå—åˆ™ä¸ºblock_num * 3ã€‚ ä½¿ç”¨ä¸åŒçš„æž„å»ºå—ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯æ™®é€šæž„å»ºå—v2ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹resnet_model.pyä¸­çš„DEFAULT_VERSIONä½¿ç”¨ä¸åŒçš„ç‰ˆæœ¬ï¼›é€šè¿‡ä¿®æ”¹cifar10_main.pyä¸­çš„bottleneck=Trueä½¿ç”¨ä¸åŒçš„æž„å»ºå—ã€‚ è®­ç»ƒä¸åŒçš„æ•°æ®é›†ï¼šç½‘ç»œçš„ç»“æž„ä¸éœ€è¦è¿‡å¤šçš„ä¿®æ”¹ï¼Œä¸»è¦ä¿®æ”¹çš„æ˜¯cifar10_main.pyæ•°æ®è¾“å…¥çš„å¤„ç†å‡½æ•°ï¼š get_filenames parse_record preprocess_image input_fn get_synth_input_fn ä»¥åŠä¿®æ”¹ä¸€äº›å…¨å±€å˜é‡ï¼š _NUM_CLASSES 2. DeepFashion2.1. ç®€ä»‹DeepFashionæ˜¯ä¸€ä¸ªå…³äºŽæœé¥°çš„è¶…å¤§è§„æ¨¡æ•°æ®é›†ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š DeepFashionæ‹¥æœ‰è¶…è¿‡800,000å¼ æ—¶å°šæœé¥°å›¾ç‰‡ï¼ŒåŒ…æ‹¬è‰¯å¥½çš„åº—é“ºå›¾ç‰‡å’Œæ¶ˆè´¹è€…æ‹æ‘„çš„ä¸å—çº¦æŸçš„å›¾ç‰‡ã€‚ DeepFashionæ‹¥æœ‰50ä¸ªåˆ†ç±»ï¼ˆcategoriesï¼‰ã€1000ä¸­å±žæ€§ï¼ˆattributesï¼‰ä»¥åŠæœé¥°å…³é”®ç‚¹ï¼ˆclothing landmarksï¼‰ã€‚ DeepFashionæ‹¥æœ‰è¶…è¿‡300,000å¯¹äº¤å‰/è·¨åŸŸçš„æœé¥°å›¾ï¼Œä¾‹å¦‚åŒä¸€ä¸ªæœé¥°æ¥è‡ªå•†å®¶å’Œæ¶ˆè´¹è€…çš„ä¸€å¯¹å›¾ç‰‡ã€‚ æ­¤å¤–ï¼ŒDeepFashionè¿˜æœ‰äº”ä¸ªåŸºå‡†æµ‹è¯•é—®é¢˜ï¼ˆBenchmarkï¼‰ï¼ŒåŒ…æ‹¬ï¼šç±»åˆ«å’Œå±žæ€§é¢„æµ‹ã€åº—é“ºæœé¥°æ£€ç´¢ã€æ¶ˆè´¹è€…å¯¹åº—é“ºæœé¥°æ£€ç´¢ã€æœé¥°å…³é”®ç‚¹æ£€æµ‹å’Œç»¼åˆæµ‹è¯•ã€‚ 2.2. åŸºå‡†æµ‹è¯•é—®é¢˜DeepFashionç›®å‰æœ‰äº”ä¸ªåŸºå‡†æµ‹è¯•é—®é¢˜ï¼š ç±»åˆ«å’Œå±žæ€§é¢„æµ‹ Category and Attribute Prediction Benchmarkï¼Œè¿™é¡¹ä»»åŠ¡æ˜¯å¯¹50ä¸ªç±»åˆ«å’Œ1,000ä¸ªå±žæ€§è¿›è¡Œåˆ†ç±»ã€‚ åº—é“ºæœé¥°æ£€ç´¢ In-shop Clothes Retrieval Benchmarkï¼Œè¿™ä¸ªä»»åŠ¡æ˜¯ç¡®å®šæºè‡ªåº—é“ºæ‹æ‘„çš„ä¸¤å¹…å›¾ç‰‡æ˜¯å¦å±žäºŽç›¸åŒçš„æœé¥°ã€‚ æ¶ˆè´¹è€…å¯¹åº—é“ºæœé¥°æ£€ç´¢ Consumer-to-shop Clothes Retrieval Benchmarkï¼Œè¿™é¡¹ä»»åŠ¡æ˜¯å°†æ¥è‡ªæ¶ˆè´¹è€…å›¾ç‰‡ä¸Žæ¥è‡ªåº—é“ºçš„ç›¸åŒæœé¥°çš„å›¾ç‰‡è¿›è¡ŒåŒ¹é…ã€‚ æœé¥°å…³é”®ç‚¹æ£€æµ‹ Fashion Landmark Detection Benchmarkï¼Œè¿™é¡¹ä»»åŠ¡æ˜¯é¢„æµ‹æœé¥°ä¸Šå…³é”®ç‚¹çš„ä½ç½®ï¼Œä¾‹å¦‚é¢†å£ï¼Œä¸‹æ‘†å’Œè¢–å£çš„ä½ç½®ã€‚ ç»¼åˆæµ‹è¯• Fashion Synthesis Benchmarkï¼Œè¿™é¡¹ä»»åŠ¡æ˜¯åˆ©ç”¨å·²æœ‰çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡ã€‚ 2.2. åº—é“ºæœé¥°æ£€ç´¢2.2.1. å›¾ç‰‡In-shop Clothes Retrieval Benchmarkçš„å›¾ç‰‡æ ¼å¼ä¸ºï¼š å±…ä¸­çš„256*256 JPGæ ¼å¼å›¾ç‰‡ åŽŸå§‹å›¾åƒçš„çºµæ¨ªæ¯”ä¿æŒä¸å˜ 2.2.2. æ ‡æ³¨In-shop Clothes Retrieval Benchmarkçš„æ•°æ®é›†ä¸­æ ‡æ³¨å¦‚ä¸‹ï¼š å›¾ç‰‡ä¸­æœé¥°çš„è¾¹ç•Œç›’ list_bbox_inshop.txtï¼Œç¬¬ä¸€è¡Œä¸ºæ•°é‡ï¼Œç¬¬äºŒè¡Œä¸ºåˆ—å å›¾ç‰‡åï¼Œå¦‚img/WOMEN/Blouses_Shirts/id_00000001/02_1_front.jpg æœé¥°ç±»åž‹ | å€¼ | æ„ä¹‰ || â€”- | â€”â€”â€”- || 1 | upper-body || 2 | lower-body || 3 | full-body | å§¿åŠ¿ç±»åž‹ | å€¼ | æ„ä¹‰ || â€”- | â€”â€”â€”â€”â€”- || 1 | frontal view || 2 | side view || 3 | back view || 4 | zoom-out view || 5 | zoom-in view || 6 | stand-alone view | è¾¹ç•Œç›’ä½ç½® | ç¬¦å· | æ„ä¹‰ || â€”â€”â€“ | â€”â€”â€”â€”â€”â€“ || x_1, y_1 | upper left point || x_2, y_2 | lower right point | å›¾ç‰‡ä¸­æœé¥°çš„å…³é”®ç‚¹ list_landmarks_inshop.txtï¼Œç¬¬ä¸€è¡Œä¸ºæ•°é‡ï¼Œç¬¬äºŒè¡Œä¸ºåˆ—å å›¾ç‰‡åï¼Œå¦‚img/WOMEN/Blouses_Shirts/id_00000001/02_1_front.jpg æœé¥°ç±»åž‹ | å€¼ | æ„ä¹‰ || â€”- | â€”â€”â€”â€”â€”â€”â€” || 1 | upper-bodyï¼Œ6ä¸ªå…³é”®ç‚¹ || 2 | lower-bodyï¼Œ4ä¸ªå…³é”®ç‚¹ || 3 | full-bodyï¼Œ8ä¸ªå…³é”®ç‚¹ | å˜åŒ–ç±»åž‹ | å€¼ | æ„ä¹‰ || â€”- | â€”â€”â€”â€”â€“ || 1 | normal pose || 2 | medium pose || 3 | large pose || 4 | medium zoom-in || 5 | large zoom-in | å…³é”®ç‚¹å¯è§æ€§ | å€¼ | æ„ä¹‰ || â€”- | â€”â€”â€”â€”â€”â€” || 1 | visible || 2 | invisible/occluded || 3 | truncated/cut-off | å…³é”®ç‚¹ | æœé¥°ç±»åž‹ | æ•°é‡ | æ„ä¹‰ || â€”â€”â€“ | â€”- | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” || 1 | 6 | left collar, right collar, left sleeve, right sleeve, left hem, right hem || 2 | 4 | left waistline, right waistline, left hem, right hem || 3 | 8 | left collar, right collar, left sleeve, right sleeve, left waistline, right waistline, left hem, right hem | æœé¥°IDé›†åˆ list_item_inshop.txtï¼Œç¬¬ä¸€è¡Œä¸ºæ•°é‡ IDï¼Œå¦‚id_00000001 æœé¥°æè¿° list_description_inshop.json IDï¼Œå¦‚id_00000001 é¢œè‰²ï¼Œå¦‚Cream æè¿°ï¼Œå¦‚Style Deals - When temps start to rise... å±žæ€§é›†åˆ list_attr_cloth.txt ç¬¬ä¸€è¡Œä½å±žæ€§æ•°é‡ï¼Œç¬¬äºŒè¡Œä¸ºåˆ—å å±žæ€§åï¼Œå¦‚lightweight æœé¥°å±žæ€§ list_attr_items.txt è¿˜æœ‰è‹¥å¹²ä¸ªå€¼ï¼Œæ•°é‡ç­‰äºŽå±žæ€§é›†åˆä¸­å±žæ€§çš„æ•°é‡ | å€¼ | æ„ä¹‰ || â€”- | â€”â€”â€”â€”â€”â€” || 1 | æœé¥°æœ‰å¯¹åº”çš„å±žæ€§ || 2 | æœé¥°æ²¡æœ‰å¯¹åº”çš„å±žæ€§ | æ˜ å°„å…³ç³» list_eval_partition.txtï¼Œç¬¬ä¸€è¡Œä¸ºæ•°é‡ï¼Œç¬¬äºŒè¡Œä¸ºåˆ—å å›¾ç‰‡åï¼Œå¦‚img/WOMEN/Dresses/id_00000002/02_1_front.jpg ç‰©å“IDï¼Œå¦‚id_00000002 çŠ¶æ€ | å€¼ | æ„ä¹‰ || â€”â€”- | â€”â€”â€”â€”â€“ || train | training image || query | query image || gallery | gallery image | å›¾ç‰‡ä¸­æœé¥°çš„é¢œè‰² list_color_cloth.txtï¼Œç¬¬ä¸€è¡Œä¸ºæ•°é‡ï¼Œç¬¬äºŒè¡Œä¸ºåˆ—å å›¾ç‰‡åï¼Œå¦‚img/WOMEN/Blouses_Shirts/id_00000001/02_1_front.jpg é¢œè‰²ï¼Œå¦‚Cream 2.2.3. å¯¹æ ‡æ³¨çš„ç†è§£ 3. å‚è€ƒ[1]Deep Residual Learning for Image Recognition [2]Identity Mappings in Deep Residual Networks [3]çŸ¥ä¹Ž|theoneçš„å›žç­” [4]DeepFashion: Powering Robust Clothes Recognition and Retrieval with Rich Annotations [5]Fashion Landmark Detection in the Wild]]></content>
      <categories>
        <category>Homework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[SyncMyCookie ä¸­æ–‡æ–‡æ¡£]]></title>
    <url>%2Fposts%2Fabbd%2F</url>
    <content type="text"><![CDATA[SyncMyCookieEnglish | ä¸­æ–‡ SyncMyCookie æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨å¤šä¸ªæµè§ˆå™¨é—´åŒæ­¥Cookieçš„æ’ä»¶ã€‚ ä½ å¯ä»¥ä½¿ç”¨å®ƒåŒæ­¥ä»»æ„ç½‘ç«™çš„ cookiesã€‚ä½ è¿˜å¯ä»¥é€šè¿‡é…ç½®è‡ªå®šä¹‰ Auto Merge å’Œ Auto Push çš„è§„åˆ™ã€‚ 1. å®‰è£… æŽ¨èï¼šChrome Web Store SyncMyCookie.crx é¢„ç¼–è¯‘ åœ¨ Chrome æ‰©å±•ï¼ˆchrome://extensionsï¼‰ä¸­å¯åŠ¨å¼€å‘è€…æ¨¡å¼å¹¶é€šè¿‡åŠ è½½æœªæ‰“åŒ…çš„æ‹“å±•å®‰è£…ã€‚ ä»Žæºç ç¼–è¯‘ 1234git clone https://github.com/Andiedie/sync-my-cookie.gitcd sync-my-cookieyarn # npm installyarn build # npm run build åƒä¸Šé¢ä¸€æ ·åŠ è½½buildç›®å½•å³å¯ã€‚ 2. ä½¿ç”¨åœºæ™¯2.1. é¿å…é¢‘ç¹ç™»å½•æœ‰äº›ç½‘ç«™è®¾ç½®çš„ cookies æ˜¯ session çº§åˆ«çš„ï¼Œä¸€æ—¦æµè§ˆå™¨å…³é—­ï¼Œè¿™äº› cookies å°±ä¼šè¿‡æœŸå¤±æ•ˆï¼Œè¿™ä½¿å¾—æˆ‘ä»¬éœ€è¦é¢‘ç¹åœ°è¿›è¡Œç™»å½•ã€‚ ä½ å¯ä»¥åœ¨ç™»å½•æœ‰ä½¿ç”¨ SyncMyCookie ä¿å­˜è¿™äº› cookiesï¼Œå¹¶å¯åŠ¨ Auto Merge åŠŸèƒ½ã€‚è¿™æ ·å³ä½¿æµè§ˆå™¨å…³é—­äº†ï¼Œä½ çš„ç™»å½•çŠ¶æ€ä¹Ÿä¸ä¼šå¤±æ•ˆã€‚ 2.2. å…±äº«è´¦å·ä¹Ÿè®¸ä½ ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼š ä¸Žæœ‹å‹å…±äº«è´¦å· çªç ´å•ç‚¹ç™»å½•çš„é™åˆ¶ åœ¨å¤šä¸ªæµè§ˆå™¨é—´åŒæ­¥ç™»å½•çŠ¶æ€ ä½¿ç”¨ SyncMyCookie èƒ½éžå¸¸ç®€å•çš„æ»¡è¶³è¿™äº›éœ€æ±‚ã€‚ ä½ åªéœ€è¦åœ¨ç™»å½•åŽä½¿ç”¨ SyncMyCookie ä¿å­˜ç½‘ç«™çš„ cookiesï¼Œå¹¶å¯åŠ¨ Auto Push åŠŸèƒ½ï¼›åœ¨å…¶ä»–çš„æµè§ˆå™¨ä¸Šï¼Œå¯ç”¨ Auto Merge åŠŸèƒ½ã€‚è¿™æ ·ä½ çš„ç™»å½•çŠ¶æ€å°±å¯ä»¥åœ¨å¤šä¸ªæµè§ˆå™¨é—´è‡ªåŠ¨åŒæ­¥ã€‚ 3. é…ç½®ä¸ºäº†èƒ½åœ¨è®¾å¤‡é—´åŒæ­¥ cookiesï¼Œæ’ä»¶å°†ä½ çš„ cookies åŠ å¯†å­˜å‚¨åœ¨ GitHub Gist ä¸­ï¼Œè¿™å°±è¦æ±‚ä½ æœ‰ä¸€ä¸ª GitHub è´¦å·ã€‚ å¦‚æžœå‘çŽ°äº†ä¸€äº›æ›´å¥½çš„å­˜å‚¨æ–¹æ¡ˆï¼Œè¯·åœ¨è¿™é‡Œæäº¤ issue å‘Šè¯‰æˆ‘ï¼Œååˆ†æ„Ÿè°¢ã€‚ 3.1. ç”Ÿæˆ GitHub Access TokenGitHub Access Tokenï¼ˆä»¥ä¸‹ç®€ç§° tokenï¼‰çš„ä½œç”¨æ˜¯è®©æ’ä»¶æœ‰æƒé™ä¿®æ”¹ä½ çš„ Gistã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œç”Ÿæˆä¸€ä¸ªæ–°çš„ tokenã€‚ æ³¨æ„ï¼š æ’ä»¶åªéœ€è¦ Gist æƒé™ï¼Œæ‰€ä»¥è¯·ä¸è¦å‹¾é€‰å…¶ä»–ä¸å¿…è¦çš„æƒé™ï¼Œä»¥ä¿è¯ä½ çš„è´¦å·å®‰å…¨ã€‚ 3.2. é…ç½®æ’ä»¶ å³é”®æ’ä»¶ï¼Œç‚¹å‡»é€‰é¡¹ã€‚ è¾“å…¥ä½ çš„ token å’ŒåŠ å¯†å¯†é’¥ã€‚ è¯·æ³¨æ„ï¼šå¿½ç•¥å¯é€‰çš„ Gist ID å’Œ Filename å­—æ®µä¹‹åŽï¼Œæ’ä»¶ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ Gist æ¥å­˜å‚¨æ•°æ®ã€‚å¦‚æžœä½ æƒ³è¦åœ¨ä¸¤ä¸ªæµè§ˆå™¨é—´åŒæ­¥ cookiesï¼Œé‚£ä¹ˆä¸¤ä¸ªæµè§ˆå™¨ä¸Šçš„æ’ä»¶å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„é…ç½®ï¼Œå³ GitHub Access Tokenã€passwordã€Gist ID å’Œ Filename è¿™å››ä¸ªå­—æ®µå¿…é¡»å®Œå…¨ç›¸åŒã€‚æ’ä»¶æä¾›äº†å¯¼å…¥å¯¼å‡ºé…ç½®çš„åŠŸèƒ½å¸®åŠ©ä½ å®Œæˆè¿™é¡¹å·¥ä½œã€‚ 4. ä½¿ç”¨4.1. Push cookieså°†æŒ‡å®šç½‘ç«™ cookies åŠ å¯†ä¿å­˜åˆ° Gist ä¸­ï¼Œåªéœ€è¦åœ¨æµè§ˆè¯¥ç½‘ç«™æ—¶ç‚¹å¼€æ’ä»¶ï¼Œç‚¹å‡» Push å³å¯ã€‚ 4.2. Merge cookeisè¦ä½¿ç”¨ä»¥ä¿å­˜çš„ cookiesï¼Œåœ¨æ’ä»¶ä¸Šé€‰æ‹©å¯¹åº”çš„ç½‘ç«™å¹¶ç‚¹å‡» Merge å³å¯ã€‚ 4.3. Auto Mergeå½“æŒ‡å®šç½‘ç«™å¼€å¯ Auto Merge åŽï¼Œæ¯å½“æ‰“å¼€æµè§ˆå™¨ï¼Œæ’ä»¶éƒ½ä¼šè‡ªåŠ¨å°†æŒ‡å®šçš„ cookies åˆå¹¶è¿›æµè§ˆå™¨ã€‚ è‡ªåŠ¨åˆå¹¶åŽï¼Œæ’ä»¶ä¸Šä¼šæœ‰æ ‡å¾½å±•ç¤ºæœ¬æ¬¡è‡ªåŠ¨åˆå¹¶çš„ç½‘ç«™æ•°é‡ï¼š 4.4. Auto Pushå½“æŒ‡å®šç½‘ç«™å¼€å¯ Auto Push åŽï¼Œæ¯å½“è¯¥ç½‘ç«™çš„ cookies å‘ç”Ÿå˜åŒ–ï¼Œæ’ä»¶éƒ½ä¼šè‡ªåŠ¨æŽ¨é€æ–°çš„ cookiesã€‚ è‡ªåŠ¨æŽ¨é€åŽï¼Œæ’ä»¶ä¸Šä¼šæœ‰æ ‡å¾½å±•ç¤ºæœ¬æ¬¡è‡ªåŠ¨æŽ¨é€çš„ç½‘ç«™æ•°é‡ï¼š é…ç½® Auto Pushé€šå¸¸ï¼Œcookies ä¸­åªæœ‰éƒ¨åˆ†å€¼æ˜¯æ¯”è¾ƒé‡è¦çš„ã€‚é€šè¿‡é…ç½®ï¼ŒAuto Push åŠŸèƒ½å¯ä»¥åœ¨æŒ‡å®šçš„å€¼å‘ç”Ÿå˜åŒ–åŽæ‰è¿›è¡Œè‡ªåŠ¨æŽ¨é€ã€‚ å°†é¼ æ ‡æ‚¬åœåœ¨ Push å›¾æ ‡ä¸Šï¼Œç‚¹å‡»å‡ºçŽ°çš„é…ç½®æŒ‰é’®ï¼š é€‰æ‹©æˆ–è¾“å…¥åç§°ï¼Œè¡¨æ˜Žå½“è¿™äº›åç§°çš„ cookies å˜åŒ–æ—¶ï¼Œè¿›è¡ŒæŽ¨é€ã€‚ 5. å®‰å…¨ç”±äºŽ cookies æ˜¯ä½ éžå¸¸é‡è¦çš„å®‰å…¨å‡­è¯ï¼Œæ‰€ä»¥è¯·éžå¸¸å°å¿ƒåœ°ä½¿ç”¨è¿™ä¸ªæ’ä»¶ã€‚ æ’ä»¶ä½¿ç”¨ HTTPS å’Œ AES-128-CBC ä¿è¯åœ¨ä¼ è¾“å’Œå­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œä½ çš„ Cookie æ˜¯å®‰å…¨çš„ï¼Œä½†ä½ ä»ç„¶éœ€è¦æ³¨æ„å¦‚ä¸‹å‡ ç‚¹ï¼š å› æ­¤ä¸ºäº†ä¿è¯ä½ çš„ cookies å®‰å…¨ï¼Œè¯·ä¸è¦éšæ„é€éœ²ä½ çš„é…ç½®ï¼Œç‰¹åˆ«æ˜¯å¯†ç ã€‚ä¸€æ—¦é…ç½®æ³„éœ²ï¼Œä½ çš„ cookies ä¹Ÿéšä¹‹æ³„éœ²ã€‚ æ’ä»¶ä¿è¯åªä¼šä½¿ç”¨ GitHub Access Token çš„ Gist æƒé™ã€‚ä¸ºäº†é˜²æ­¢æ½œåœ¨çš„å®‰å…¨é—®é¢˜ï¼Œåœ¨ç”Ÿæˆ token æ—¶ï¼Œè¯·åªç»™ä¸Ž Gist æƒé™ã€‚ ç†è®ºä¸Šï¼Œå¤šä¸ªè®¾å¤‡ä½¿ç”¨ç›¸åŒçš„ Cookie å¯ä»¥å®žçŽ°åŒæ—¶ä½¿ç”¨ä¸€äº›æœåŠ¡ï¼Œä½†æ˜¯è¿™å’ŒæœåŠ¡æä¾›å•†çš„æ£€æµ‹æœºåˆ¶æœ‰å…³ã€‚å› æ­¤ä½¿ç”¨è¿™ä¸ªæ’ä»¶è¿›è¡Œè´¦å·å…±äº«ï¼Œé£Žé™©æ˜¯ä¸ç¡®å®šçš„ã€‚]]></content>
      <categories>
        <category>Development</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Travisè¿›è¡ŒæŒç»­é›†æˆ]]></title>
    <url>%2Fposts%2F53ad%2F</url>
    <content type="text"><![CDATA[1. æŒç»­é›†æˆ1.1. æŒç»­é›†æˆçš„æ¦‚å¿µ Continuous Integration is a software development practice where members of a team integrate their work frequently, usually each person integrates at least daily - leading to multiple integrations per day. Each integration is verified by an automated build (including test) to detect integration errors as quickly as possible. Many teams find that this approach leads to significantly reduced integration problems and allows a team to develop cohesive software more rapidly. â€”â€”Martin Fowler Martin Fowlerå…³äºŽæŒç»­é›†æˆçš„å®Œæ•´æ–‡ç« ï¼Œå¯ä»¥ä»Žè¿™é‡ŒèŽ·å–ã€‚ 1.2. æŒç»­é›†æˆçš„è¦ç´  ç»Ÿä¸€çš„ä»£ç åº“ è‡ªåŠ¨æž„å»º è‡ªåŠ¨æµ‹è¯• æ¯æ¬¡ä»£ç æäº¤åŽéƒ½ä¼šè§¦å‘ä¸€æ¬¡æž„å»º å¯ä»¥å¾ˆå®¹æ˜“åœ°èŽ·å–æœ€æ–°å¯æ‰§è¡Œçš„ç¨‹åº è‡ªåŠ¨åŒ–éƒ¨ç½² çŽ°åœ¨ä½¿ç”¨Travis CIæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å®žçŽ°æŒç»­é›†æˆã€‚ 2. ä½¿ç”¨Travis CI å®žçŽ°è‡ªåŠ¨æµ‹è¯•Travis CIæ˜¯åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸä¸­çš„ä¸€ä¸ªåœ¨çº¿çš„ï¼Œåˆ†å¸ƒå¼çš„æŒç»­é›†æˆæœåŠ¡ï¼Œç”¨æ¥æž„å»ºåŠæµ‹è¯•åœ¨GitHubæ‰˜ç®¡çš„ä»£ç ã€‚Travisåªèƒ½åœ¨GitHubé¡¹ç›®ä¸Šä½¿ç”¨ï¼Œåªè¦é¡¹ç›®æœ‰æ”¹åŠ¨ï¼ŒTraviså°±ä¼šä¸ºå…¶æä¾›ä¸€ä¸ªè¿è¡ŒçŽ¯å¢ƒï¼Œæ‰§è¡Œæµ‹è¯•ã€æž„å»ºç”šè‡³éƒ¨ç½²ä»»åŠ¡ã€‚ä¸‹é¢å°†æ¼”ç¤ºå¦‚ä½•é…ç½®Node.jsé¡¹ç›®çš„è‡ªåŠ¨æµ‹è¯•ã€‚ 2.1. ä¸ºé¡¹ç›®å¼€å¯Travisè¿›å…¥Travisï¼Œä½¿ç”¨GItHubè´¦å·ç™»å½•ï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œè¿›å…¥Profileã€‚é€‰æ‹©é¡¹ç›®ï¼Œæ‰“å¼€å¼€å…³å³å¯ã€‚ 2.2. åŸºæœ¬é…ç½®ç‚¹å‡»é¡¹ç›®åå’Œå¼€å…³ä¹‹é—´çš„é½¿è½®å¯ä»¥è¿›å…¥è®¾ç½®é¡µï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥è¿›è¡Œç›¸å…³çš„é…ç½®ï¼Œä¸è¿‡å¤§å¤šæ•°æƒ…å†µä¸‹ä¿æŒé»˜è®¤å³å¯ã€‚ 2.2.1. åŸºç¡€è®¾ç½® å»ºè®®æ‰“å¼€Build only if .travis.yml is presentå¯ä»¥é¿å…åœ¨æ²¡æœ‰é…ç½®æ–‡ä»¶çš„æ—¶å€™è¿›è¡Œæ— æ„ä¹‰çš„æž„å»ºå·¥ä½œã€‚æ­¤å¤–ä¹Ÿå¯ä»¥é…ç½®æ˜¯å¦å¯¹åˆ†æ”¯ã€PRè¿›è¡Œæž„å»ºï¼Œå¹¶é™åˆ¶å¹¶è¡Œæ•°é‡ã€‚ 2.2.2. è‡ªåŠ¨å–æ¶ˆ å»ºè®®å¼€å¯ï¼Œå¼€å¯åŽå¦‚æžœé˜Ÿåˆ—ä¸­ç§¯åŽ‹äº†å¤§é‡çš„æž„å»ºä»»åŠ¡ï¼ˆæ¯”å¦‚ä¸€æ¬¡æ€§æäº¤äº†å¤§é‡çš„commitï¼‰ï¼Œé‚£ä¹ˆTravisåªä¼šå¯¹æœ€æ–°çš„commitè¿›è¡Œæž„å»ºï¼Œé¿å…è¿‡é•¿çš„ç­‰å¾…æ—¶é—´ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè‡ªåŠ¨å–æ¶ˆåªä¼šå¯¹ç­‰å¾…ä¸­çš„ä»»åŠ¡ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä½ çš„ä»»åŠ¡æ­£åœ¨è¿è¡Œï¼Œé‚£ä¹ˆå³ä½¿æœ‰æ›´æ–°çš„ä»»åŠ¡å‡ºçŽ°ï¼Œå½“å‰ä»»åŠ¡ä¹Ÿä¸ä¼šè¢«å–æ¶ˆã€‚ 2.2.3. çŽ¯å¢ƒå˜é‡ä¸Žè®¡åˆ’ä»»åŠ¡åœ¨è¿™é‡Œä½ å¯ä»¥å®šä¹‰ä»»åŠ¡ä¸­å¯ä»¥éšæ—¶ä½¿ç”¨çš„çŽ¯å¢ƒå˜é‡ï¼Œåœ¨æœ¬æ–‡çš„åŽç»­å†…å®¹ä¸­ä¹Ÿä¼šæœ‰çŽ¯å¢ƒå˜é‡çš„ç®€å•ä½¿ç”¨ã€‚ æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥è®¾ç½®è®¡åˆ’ä»»åŠ¡ï¼Œè®©Traviså®šæ—¶å¯¹ä½ çš„é¡¹ç›®è¿›è¡Œæµ‹è¯•å’Œæž„å»ºã€‚ 2.3. ç¼–å†™.travis.ymlé¦–å…ˆå‡è®¾ä½ çš„node.jsé¡¹ç›®å·²ç»ç¼–å†™å®Œæˆï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡npm testè¿è¡Œæµ‹è¯•å‘½ä»¤ã€‚ åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œåˆ›å»ºæ–‡ä»¶.travis.yml .travis.yml12345language: node_jsnode_js:- '9'install: npm installscript: npm test è¿™ä¸ªé…ç½®æ–‡ä»¶æè¿°äº†Traviså°†å¦‚ä½•å·¥ä½œã€‚é¦–å…ˆæˆ‘ä»¬å°†è¯­è¨€é€‰å®šä¸ºäº†node.jså¹¶æŒ‡å®šnode.jsçš„ç‰ˆæœ¬å·ä¸º9.x.xï¼Œå½“ç„¶ä½ å¯ä»¥æŒ‡å®šå¤šä¸ªç‰ˆæœ¬å·ï¼ŒTraviså°†åœ¨æ¯ä¸ªç‰ˆæœ¬ä¸­éƒ½å¯¹ä½ çš„ä»£ç è¿›è¡Œæž„å»ºå’Œæµ‹è¯•ã€‚ æ­¤å¤–æˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸¤ä¸ªè¿‡ç¨‹ï¼šinstallå’Œscriptï¼Œå®ƒä»¬åˆ†åˆ«å‘Šè¯‰äº†Traviså¦‚ä½•å®‰è£…ä¾èµ–ï¼Œå¦‚ä½•è¿›è¡Œæµ‹è¯•ã€‚ å°†è¿™ä¸ªæ–‡ä»¶æŽ¨ä¸ŠGitHubï¼Œç™»å½•Travisï¼Œä½ ä¼šå‘çŽ°å®ƒæ­£åœ¨è‡ªåŠ¨çš„ä¸ºä½ çš„é¡¹ç›®è¿›è¡Œæž„å»ºã€ä¸‹è½½ä¾èµ–å¹¶è¿›è¡Œæµ‹è¯•ã€‚å¦‚æžœæµ‹è¯•é€šè¿‡ï¼Œæµ‹è¯•ç»“æžœåœ¨GitHubçš„ä¸Šæœ‰ç›¸åº”çš„æ ‡æ³¨ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨Traviså®Œæˆäº†è‡ªåŠ¨æµ‹è¯•ï¼Œä½ åœ¨é¡¹ç›®ä¸­çš„æ¯ä¸€æ¬¡æ”¹åŠ¨ï¼ŒåŒ…æ‹¬commitã€branchå’Œpull requestï¼ŒTraviséƒ½ä¼šæŒ‰ç…§.travis.ymlçš„é…ç½®è¿›è¡Œæµ‹è¯•ã€‚ 2.4. ç”Ÿå‘½å‘¨æœŸé™¤äº†ä¸Šè¿°çš„installå’Œscriptï¼ŒTravisè¿˜æä¾›äº†å¤§é‡çš„é’©å­å‡½æ•° installï¼šä¾èµ–å®‰è£… scriptï¼šæµ‹è¯•ï¼ˆå¦‚æžœinstallå¤±è´¥åˆ™ä¸è¿è¡Œï¼‰ deployï¼šéƒ¨ç½²ï¼ˆå¦‚æžœscriptå¤±è´¥åˆ™ä¸è¿è¡Œï¼‰ before_installï¼šinstallä¹‹å‰è¿è¡Œ before_scriptï¼šscriptä¹‹å‰è¿è¡Œ after_failureï¼šscriptå¤±è´¥åŽè¿è¡Œ after_successï¼šscriptæˆåŠŸåŽè¿è¡Œ before_deployï¼šdeployä¹‹å‰è¿è¡Œ after_deployï¼šdeployä¹‹åŽè¿è¡Œ after_scriptï¼šåœ¨æ•´ä¸ªè¿‡ç¨‹çš„æœ€åŽæ‰§è¡Œ å®Œæ•´çš„æž„å»ºç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š 123456789before_installinstallbefore_scriptscriptafter_success or after_failurebefore_deploydeployafter_deployafter_script ç”Ÿå‘½å‘¨æœŸä¸­çš„æ¯ä¸€ä¸ªé’©å­å‡½æ•°éƒ½å¯ä»¥å®šä¹‰å¤šä¸ªè„šæœ¬ï¼Œä¾‹å¦‚ 123install:- command1- command2 æ­¤æ—¶å½“æ‰§è¡Œåˆ°installé˜¶æ®µæ—¶ï¼Œinstallä¸­çš„æ¯ä¸€ä¸ªå‘½ä»¤éƒ½ä¼šè¢«æ‰§è¡Œã€‚ä¸”å³ä½¿command1å¤±è´¥äº†ï¼Œcommand2ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚å¦‚æžœå¸Œæœ›command1å¤±è´¥åŽä¸æ‰§è¡Œcommand2ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š 1install: command1 &amp;&amp; command2 3. ä½¿ç”¨Travis CI å®žçŽ°è‡ªåŠ¨éƒ¨ç½²è‡ªåŠ¨æµ‹è¯•å®ŒæˆåŽï¼Œæˆ‘ä»¬å¸Œæœ›å°†æµ‹è¯•é€šè¿‡çš„ç‰ˆæœ¬è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚åŸºæœ¬çš„æ€è·¯æ˜¯ï¼Œè®©Travisç™»å½•æœåŠ¡å™¨ï¼Œå¹¶åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œéƒ¨ç½²è„šæœ¬ã€‚ 3.1. Travisç™»å½•æœåŠ¡å™¨å‡è®¾æœåŠ¡å™¨åœ°å€æ˜¯1.2.3.4ã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨SSH Keyç™»å½•ã€‚ 3.1.1. ç”ŸæˆSSH Keyå…·ä½“å¯è§é€šè¿‡SSH Keyç™»å½•Linuxï¼Œè¿™é‡Œåªå±•ç¤ºç®€å•çš„å‘½ä»¤ï¼š 12345# ç”Ÿæˆkeyå’Œkey.pubä¸¤ä¸ªæ–‡ä»¶ssh-keygen -f key# å°†å…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ssh-copy-id -i key.pub user@1.2.3.4 3.1.2. é…ç½®å°†å½“å‰ç›®å½•ä¸‹çš„keyæ–‡ä»¶å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸­ .travis.yml1234567891011121314151617language: node_jsnode_js:- '9'addons: ssh_known_hosts: 1.2.3.4install: npm installscript: npm testbefore_deploy:- eval "$(ssh-agent -s)"- chmod 600 key- ssh-add keydeploy: provider: script script: ssh -i key user@1.2.3.4 è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®©Travisç™»å½•ä¸Šæˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œä½†æ˜¯å¦‚æžœé¡¹ç›®æ˜¯åœ¨GitHubä¸Šå¼€æºçš„ï¼Œé‚£ä¹ˆç›¸å½“äºŽç™»å½•æœåŠ¡å™¨çš„ç§é’¥ä¹Ÿå…¬å¼€äº†ï¼Œè¿™å½“ç„¶æ˜¯ä¸å¯æŽ¥å—çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ç§æ›´åŠ å®‰å…¨çš„æ–¹æ³•ã€‚ 3.2. æ›´åŠ å®‰å…¨åœ°ç™»å½•æœåŠ¡å™¨ä¸ºäº†é¿å…ç§é’¥å…¬å¼€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Travisçš„åŠ å¯†æ–¹æ³•å¯¹ç§é’¥è¿›è¡ŒåŠ å¯†ã€‚ 3.2.1. ä¸‹è½½Traviså‘½ä»¤è¡Œå·¥å…·æŸ¥çœ‹è¿™é‡Œäº†è§£å¦‚ä½•å®‰è£…Travisï¼Œç”±äºŽWindowsçŽ¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼ŒæŽ¨èä½¿ç”¨linuxçŽ¯å¢ƒï¼ŒWindowsç”¨æˆ·å¯ä»¥ä½¿ç”¨WSLï¼ˆWSLç›¸å…³æ•™ç¨‹è§WSLå®‰è£…ä¸ŽSSHé…ç½®ï¼‰ã€‚ è¿è¡Œä¸‹åˆ—å‘½ä»¤å®‰è£…Travis CLI 12345678# å®‰è£…rubysudo apt install ruby ruby-dev# å®‰è£…travisgem install travis -v 1.8.8 --no-rdoc --no-ri# æµ‹è¯•travis version# &gt; 1.8.8 3.2.2. ç™»å½•Travis12345# ç™»å½•Travistravis login# ç¡®è®¤ç™»å½•travis whoami# &gt; You are xxx 3.2.3. åŠ å¯†ç§é’¥æ–‡ä»¶çŽ°åœ¨æˆ‘ä»¬å‡è®¾ç§é’¥æ–‡ä»¶keyå’Œ.travis.ymléƒ½å¤„äºŽé¡¹ç›®æ ¹ç›®å½• 12345# cdåˆ°keyæ‰€åœ¨çš„ç›®å½•ï¼ˆæ¯”å¦‚é¡¹ç›®æ ¹ç›®å½•ï¼‰cd path/to/key# åŠ å¯†æ–‡ä»¶travis encrypt-file key --add åŠ å¯†å®ŒåŽï¼Œå½“å‰ç›®å½•ä¸‹ä¼šå¢žåŠ ä¸€ä¸ªkey.encæ–‡ä»¶ï¼Œå³keyåŠ å¯†åŽçš„æ–‡ä»¶ã€‚è¯·æ³¨æ„ï¼Œä¸è¦å°†keyä¸Šä¼ åˆ°GitHubï¼Œå–è€Œä»£ä¹‹çš„æ˜¯key.encã€‚ å¦å¤–è¿›å…¥Travisç½‘ç«™ä¸­ï¼Œé¡¹ç›®çš„è®¾ç½®é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢žçš„çŽ¯å¢ƒå˜é‡ å¹¶ä¸”.travis.ymlä¸­ä¼šå¢žåŠ ä¸€è¡Œè¿™æ ·çš„é…ç½® .travis.yml12before_install:- openssl aes-256-cbc -K $encrypted_57510f08f3ae_key -iv $encrypted_57510f08f3ae_iv è¿™é‡Œ$xxxxå°±æ˜¯å¼•ç”¨äº†çŽ¯å¢ƒå˜é‡ï¼Œå¹¶ä½¿ç”¨opensslå¯¹ç§é’¥æ–‡ä»¶è¿›è¡Œè§£å¯†ã€‚ 3.3. .travis.ymlé…ç½®.travis.yml123456789101112131415161718192021222324language: node_jsnode_js:- '9'install: npm installscript: npm testaddons: ssh_known_hosts: 119.29.252.110before_deploy:- openssl aes-256-cbc -K $encrypted_57510f08f3ae_key -iv $encrypted_57510f08f3ae_iv -in deploy_rsa.enc -out deploy_rsa -d- eval "$(ssh-agent -s)"- chmod 600 key- ssh-add keydeploy: provider: script script: bash deploy.sh skip_cleanup: true on: branch: master æ³¨æ„åˆ°è¿™é‡Œæˆ‘ä»¬æ–°å¢žäº†å‡ è¡Œï¼š before_deployä¸­çš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ç”¨äºŽè§£å¯†ç§é’¥æ–‡ä»¶key skip_cleanupæ˜¯ä¸ºäº†é¿å…éƒ¨ç½²é˜¶æ®µä¸€äº›æ–‡ä»¶è¢«æ¸…é™¤ï¼Œå…·ä½“å¯ä»¥å‚é˜…å®˜æ–¹æ–‡æ¡£ on branch masterè¿™é‡Œæ˜¯æŒ‡å®šäº†åªæœ‰masteråˆ†æ”¯ä¸Šçš„æ”¹åŠ¨æ‰éœ€è¦è¿›è¡Œéƒ¨ç½² bash deploy.shè¯·è§ä¸‹ä¸€èŠ‚ 3.4. ç¼–å†™éƒ¨ç½²è„šæœ¬ä¸ºäº†ä¾¿äºŽç®¡ç†ï¼Œæˆ‘ä»¬è®©deployé˜¶æ®µè¿è¡Œæˆ‘ä»¬çš„éƒ¨ç½²è„šæœ¬deploy.shï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ç¼–å†™è¿™ä¸ªè„šæœ¬å‘¢ï¼Ÿ éžå¸¸ç®€å•ï¼š 123456ssh -i key user@1.2.3.4 &lt;&lt; eeooffcommand1command2eeooff æŒ‰ç…§ä¸Šé¢çš„æ ¼å¼ï¼Œå°†éœ€è¦å†æœåŠ¡ç«¯ä¸Šè¿è¡Œçš„å‘½ä»¤æ”¾åœ¨ä¸¤ä¸ªeeooffä¸­é—´å³å¯ã€‚]]></content>
      <categories>
        <category>Homework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å®žè®­æŠ¥å‘Š 1st]]></title>
    <url>%2Fposts%2Fc31d%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸»è¦é€šè¿‡é˜…è¯»è®ºæ–‡çš„æ–¹å¼ï¼Œå­¦ä¹ äº†å·ç§¯ç¥žç»ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µã€ç»“æž„ã€æ–¹æ³•ã€‚è¿™ç¯‡å‘¨æŠ¥ä¸»è¦æ˜¯å¯¹æ‰€å­¦çŸ¥è¯†çš„ä¸€äº›æ€»ç»“ã€‚ å¦‚æžœæœ‰é”™è¯¯ï¼Œçƒ¦è¯·åœ¨è¯„è®ºåŒºæŒ‡æ­£ã€‚ 1. ç¥žç»ç½‘ç»œ1.1. ç¥žç»å…ƒ Neuronç¥žç»ç½‘ç»œç”±ç¥žç»å…ƒç»„æˆï¼Œå•ä¸ªç¥žç»å…ƒçš„ç»“æž„å¦‚ä¸‹ å®žé™…ä¸Šæ˜¯ï¼Œè¾“å…¥å‘é‡$x$ç»è¿‡æƒå€¼$W$è¿›è¡Œçº¿æ€§å˜æ¢ä¹‹åŽå¾—åˆ°$W^Tx+b$ï¼Œå†è¿›è¿‡æ¿€æ´»å‡½æ•°$f$å°†çº¿æ€§ç»“æžœè½¬å˜ä¸ºéžçº¿æ€§çš„ç»“æžœ$f(W^Tx+b)$ï¼Œå³ $H_{W,b}=f(W^Tx+b)$ï¼Œå…¶ä¸­$W^T$æ˜¯$W$çš„è½¬ç½®ã€‚ 1.1.1. ç¥žç»å…ƒä¸Žç¥žç»ç»†èƒžä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘å°†ç”¨ç¥žç»å…ƒæ¥è¡¨ç¤ºæœ¬æ–‡ä¸­ç¥žç»ç½‘ç»œçš„åŸºæœ¬å•ä½ï¼Œè€Œç”¨ç¥žç»ç»†èƒžè¡¨ç¤ºç”Ÿç‰©å­¦ä¸­çš„æ¦‚å¿µã€‚ è®©æˆ‘ä»¬æ¥å°†è¿™ä¸ªç¥žç»å…ƒä¸Žç¥žç»ç»†èƒžåšå¯¹æ¯”ã€‚ ç¥žç»ç»†èƒžæœ‰æ ‘çªã€ç»†èƒžä½“å’Œè½´çªã€‚å•ä¸ªç¥žç»ç»†èƒžå¯ä»¥çœ‹åšä¸€ä¸ªäºŒå…ƒåˆ†ç±»å™¨â€”â€”â€”â€”å…´å¥‹æ—¶è¾“å‡º1ï¼ŒæŠ‘åˆ¶æ—¶è¾“å‡º0ã€‚å½“ä¿¡å·é‡è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼Œç¥žç»å…ƒå¯ä»¥å°†å…´å¥‹æ²¿ç€è½´çªä¼ é€’ç»™ç¥žç»å…ƒã€‚ è€Œè¿™é‡Œçš„ç¥žç»å…ƒåˆ™æ˜¯ä¸ºäº†æ¨¡æ‹Ÿç¥žç»ç»†èƒžï¼Œæƒå€¼å‘é‡$W$å¯¹åº”æ ‘çªï¼Œåç½®$b$å¯¹åº”é˜ˆå€¼ï¼Œæ¿€æ´»å‡½æ•°$f$å¯¹åº”ç»†èƒžä½“ã€‚ç¥žç»å…ƒé€šè¿‡æƒå€¼å‘é‡$W$æŽ¥æ”¶æ¥è‡ªä¸Šä¸€æ¬¡çš„è¾“å…¥å‘é‡$x$ï¼Œå¹¶å°†è¾“å…¥$W^Tx+b$äº¤ç»™æ¿€æ´»å‡½æ•°$f$ã€‚æ¿€æ´»å‡½æ•°å°†å†³å®šä¼ é€’ç»™ä¸‹ä¸€å±‚ç¥žç»å…ƒçš„è¾“å‡ºã€‚ 1.1.2. æ¿€æ´»å‡½æ•° Activation Functionæ¿€æ´»å‡½æ•°å®šä¹‰äº†ç¥žç»å…ƒåœ¨çº¿æ€§å˜æ¢$W^Tx+b$ä¹‹åŽçš„éžçº¿æ€§è¾“å‡ºç»“æžœã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨æ¿€æ´»å‡½æ•°å¦‚æžœä¸ä½¿ç”¨æ¿€æ´»å‡½æ•°ï¼Œç”±äºŽæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯çº¿æ€§çš„ï¼Œæ‰€ä»¥æ•´ä¸ªç¥žç»ç½‘ç»œåªæ˜¯ä¸€ä¸ªçº¿æ€§å›žå½’æ¨¡åž‹ã€‚çº¿æ€§å›žå½’æ¨¡åž‹çš„è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œå®ƒåœ¨å¾ˆå¤šé—®é¢˜ä¸Šéƒ½è¡¨çŽ°å¾—ä¸å¤Ÿå¥½ï¼Œç”šè‡³æ— æ³•è§£å†³è¿™äº›é—®é¢˜ã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡å¼•å…¥æ¿€æ´»å‡½æ•°ï¼Œä¸ºç¥žç»ç½‘ç»œå¼•å…¥éžçº¿æ€§çš„å› ç´ ï¼Œå¢žå¼ºå®ƒçš„èƒ½åŠ›ï¼Œä½¿å…¶å¯ä»¥å­¦ä¹ æ›´åŠ å¤æ‚çš„æ•°æ®ï¼Œè¡¨è¾¾è¾“å…¥è¾“å‡ºä¹‹é—´éžçº¿æ€§çš„å¤æ‚æ˜ å°„å…³ç³»ã€‚ å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°æœ‰ Sigmoidï¼š$S(t)=\frac{1}{1+e^{-t}}$ Tanh: $tanh(x)=\frac{sinh(x)}{cosh(x)}=\frac{e^x-e^{-x}}{e^x+e^{-x}}$ ReLUï¼š$f(x)=max(0,x)$ ç”±äºŽæ¢¯åº¦æ¶ˆå¤±é—®é¢˜(Vanishing Gradient Problem)ï¼Œå‰ä¸¤è€…å·²ç»å¼ƒç”¨ï¼ŒReLUæ˜¯ä¸»æµçš„æ¿€æ´»å‡½æ•°ã€‚ 1.1.3. å…¨è¿žæŽ¥ Fully-Connectedè¿™é‡Œæˆ‘ä»¬å±•ç¤ºçš„ç¥žç»å…ƒï¼Œå°†æ¥è‡ªè¾“å…¥å‘é‡$x$ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½ç”¨äºŽè®¡ç®—ï¼Œæˆ‘ä»¬è¿˜ç§°è¿™ä¸ªç¥žç»å…ƒæ˜¯å…¨è¿žæŽ¥çš„(fully-connected)ã€‚ ç»§ç»­æˆ‘ä»¬ç¥žç»å…ƒä¸Žç¥žç»ç»†èƒžçš„æ¯”è¾ƒè”æƒ³ï¼Œå‡å¦‚è¿™ä¸ªç¥žç»å…ƒæ˜¯è¾“å…¥å‘é‡ä¹‹åŽçš„ç¬¬ä¸€å±‚ç¥žç»å…ƒï¼Œé‚£ä¹ˆä½ å¯ä»¥æƒ³è±¡æˆï¼Œæˆ‘ä»¬è„‘ä¸­æœ‰ä¸€ä¸ªæ ‘çªæžå…¶å·¨å¤§çš„ç¥žç»ç»†èƒžï¼Œå®ƒå°†æ¥è‡ªå¤–ç•Œçš„åˆºæ¿€å…¨éƒ¨æ”¶å…¥å›Šä¸­ï¼Œå¹¶æ ¹æ®åˆºæ¿€ç»™å‡ºè¾“å‡ºã€‚ å…¨è¿žé€šçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œæ¯ä¸ªç¥žç»å…ƒéƒ½å¯ä»¥èŽ·å–æœ€å…¨é¢çš„è¾“å…¥ï¼›ä½†å®ƒçš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§â€”â€”â€”â€”æˆ‘ä»¬å®šä¹‰å¤„ç†å¤§é‡çš„æƒå€¼å‚æ•°ã€‚è¿™ä¸ªç¼ºç‚¹çš„å…·ä½“æè¿°ï¼Œä»¥åŠå…¨è¿žé€šç¼ºç‚¹çš„æ–¹æ³•ï¼Œéƒ½ä¼šåœ¨æŽ¥ä¸‹æ¥çš„å†…å®¹ä¸­æåˆ°ã€‚ 1.2. å¤šå±‚ç¥žç»ç½‘ç»œå½“å¤šä¸ªç¥žç»å…ƒç»„åˆèµ·æ¥ï¼Œå½¢æˆåˆ†å±‚ç»“æž„æ—¶ï¼Œå°±å½¢æˆäº†ç¥žç»ç½‘ç»œã€‚ å…¶ä¸­ $a_1^{(2)}=f(W^{(1)}_{11}x_1+W^{(1)}_{12}x_2+W^{(1)}_{13}x_3+b^{(1)}_1)$ $a_2^{(2)}=f(W^{(1)}_{21}x_1+W^{(1)}_{22}x_2+W^{(1)}_{23}x_3+b^{(1)}_2)$ $a_3^{(2)}=f(W^{(1)}_{31}x_1+W^{(1)}_{32}x_2+W^{(1)}_{33}x_3+b^{(1)}_3)$ $H_{W,b}=f(W^{(2)}_{12}a_1^{(2)}+W^{(2)}_{22}a_2^{(2)}+W^{(2)}_{32}a_3^{(2)}+b^{(2)}_1)$ è¿™é‡Œçš„$W_{\beta\gamma}^{(\alpha)}$è¡¨ç¤ºä»Žç¬¬$\alpha$å±‚åˆ°ç¬¬$\beta$å±‚çš„ç¬¬$\gamma$ä¸ªç¥žç»å…ƒçš„æƒå€¼å‘é‡$W$ï¼ˆä¸ºäº†ç®€åŒ–ï¼Œè¿™é‡Œçœç•¥äº†è½¬ç½®ç¬¦å·$^T$ï¼‰ï¼Œ$b^{(\alpha)}_\beta$è¡¨ç¤ºä»Žç¬¬$\alpha$å±‚åˆ°ç¬¬$\beta$å±‚çš„åç½®$b$ã€‚ è¿™æ˜¯ä¸€ä¸ªå…¸åž‹çš„ä¸‰å±‚ç¥žç»ç½‘ç»œï¼Œæˆ‘ä»¬å°†Layer 2ç§°ä¸ºéšè—å±‚(Hidden Layer)ã€‚ä¸€ä¸ªç¥žç»ç½‘ç»œä¸­å¯ä»¥æ‹¥æœ‰å¤šä¸ªéšè—å±‚ã€‚ 1.2.1. å‰é¦ˆç¥žç»ç½‘ç»œ Feedforward neural networkåƒè¿™æ ·ï¼Œåœ¨ç¥žç»ç½‘ç»œå†…éƒ¨ï¼Œè¾“å…¥ä»Žè¾“å…¥å±‚å‘è¾“å‡ºå±‚å•å‘ä¼ æ’­ï¼Œä¸æž„æˆä»»ä½•æœ‰å‘çŽ¯çš„ç»“æž„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå‰é¦ˆç¥žç»ç½‘ç»œã€‚ 1.2.2. åå‘ä¼ æ’­ Backpropagationä¸‹ä¸€ä¸ªè¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œæ€Žæ ·åˆç†åœ°ç¡®å®šç¥žç»ç½‘ç»œä¸­å„å±‚çš„æƒå€¼ã€‚è¿™å¥éœ€è¦ç”¨åˆ°åå‘ä¼ æ’­ç®—æ³•ã€‚ åå‘ä¼ æ’­ç®—æ³•æ˜¯è®­ç»ƒç¥žç»ç½‘ç»œçš„å¸¸ç”¨æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨é“¾å¼æ³•åˆ™å¯¹ç½‘ç»œä¸­çš„æ‰€æœ‰æƒå€¼è®¡ç®—æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œç”¨æ¥æ›´æ–°æƒå€¼ä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ¢¯åº¦ä¸‹é™æ³•ã€‚ åå‘ä¼ æ’­ç®—æ³•æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šæ¿€åŠ±ä¼ æ’­å’Œæƒå€¼æ›´æ–° æ¿€åŠ±ä¼ æ’­ å‰å‘ä¼ æ’­ï¼šè¾“å…¥è¿›å…¥ç¥žç»ç½‘ç»œå¹¶å‰å‘ä¼ æ’­ï¼Œæœ€åŽäº§ç”Ÿè¾“å‡ºã€‚ åå‘ä¼ æ’­ï¼šé€šè¿‡æŸå¤±å‡½æ•°æ±‚å‡ºè¾“å‡ºä¸Žæ ‡å‡†è¾“å‡ºä¹‹é—´çš„è¯¯å·®ï¼Œç„¶åŽé€šè¿‡é“¾å¼æ³•åˆ™æ±‚å‡ºæ¯ä¸€å±‚çš„æƒå€¼å‚æ•°å¯¹æ•´ä½“è¯¯å·®çš„å½±å“ï¼ˆå³æ€»è¯¯å·®å¯¹æƒå€¼å‚æ•°æ±‚åå¯¼ï¼‰ã€‚ æƒå€¼æ›´æ–° å°†è¾“å…¥å¸¦å…¥å‰é¢çš„æ±‚åˆ°ç»“æžœä¸­ï¼ŒèŽ·å¾—æƒå€¼æ¢¯åº¦ã€‚ å°†æƒå€¼ä¹˜ä¸Šä¸€ä¸ªè´Ÿçš„å­¦ä¹ çŽ‡ï¼ŒåŠ åˆ°çŽ°æœ‰çš„æƒå€¼ä¸Šï¼Œä»¥æ›´æ–°å®ƒçš„å€¼ã€‚ å…·ä½“å®žä¾‹åœ¨è¿™ç¯‡åšå®¢ä¸­æœ‰éžå¸¸è¯¦ç»†çš„è¿‡ç¨‹ã€‚ 1.2.3. é—®é¢˜åœ¨å‰é¢æˆ‘ä»¬å°±æ›¾æåˆ°è¿‡ï¼Œåœ¨æˆ‘ä»¬çŽ°åœ¨ä»‹ç»çš„ç¥žç»ç½‘ç»œä¸­æœ‰ä¸€ä¸ªç”±äºŽå…¨è¿žæŽ¥å¯¼è‡´çš„å·¨å¤§é—®é¢˜â€”â€”â€”â€”å‚æ•°æ•°é‡å·¨å¤§ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œå‡å¦‚è¾“å…¥æ˜¯1000X1000çš„ç°åº¦å›¾ç‰‡ï¼ˆä¸€ä¸ªchannelï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª$10^6$ä¸ªå€¼ï¼Œç¬¬äºŒå±‚éšè—å±‚æœ‰$10^6$ä¸ªç¥žç»å…ƒï¼Œé‚£æˆ‘ä»¬å°†é¢ä¸´$10^{12}$æ¬¡æ–¹ä¸ªæƒå€¼ã€‚è¿™æ ·çš„å‚æ•°æ•°é‡æ˜¯ä¸å¯æŽ¥å—çš„ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦æƒ³ä¸€ä¸ªåŠžæ³•åŽ»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 2. å·ç§¯ç¥žç»ç½‘ç»œ2.1. å±€éƒ¨è¿žæŽ¥ Locally Connectedäººå¯¹å¤–ç•Œçš„è®¤çŸ¥æ˜¯ä»Žå±€éƒ¨åˆ°æ€»ä½“çš„ï¼Œæˆ‘ä»¬æ€»æ˜¯å…ˆå¯¹å›¾åƒä¸­çš„ç»†èŠ‚â€”â€”â€”â€”ä¾‹å¦‚è¾¹ç¼˜ã€é¢œè‰²ç­‰æœ‰äº†è®¤è¯†ï¼Œé€æ¸è¾¨åˆ«è½®å»“ï¼Œæœ€åŽè¯†åˆ«å‡ºç‰©ä½“ã€‚å¦å¤–ä¸€ä¸ªç›´è§‰çš„æƒ³æ³•æ˜¯ï¼Œå›¾åƒä¸­çš„åƒç´ ç‚¹æ€»æ˜¯å’Œé‚»è¿‘çš„ç‚¹å…³ç³»å¯†åˆ‡ï¼Œå’Œè·ç¦»è¾ƒè¿œçš„ç‚¹å…³ç³»è¾ƒå°ç”šè‡³æ²¡æœ‰å…³ç³»ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå•ä¸€çš„ç¥žç»å…ƒæ²¡æœ‰å¿…è¦å¯¹æ•´ä¸ªè¾“å…¥å›¾åƒè¿›è¡Œæ„ŸçŸ¥ï¼ˆå…¨è¿žæŽ¥ï¼‰ã€‚ç¥žç»å…ƒåªéœ€è¦å¯¹å±€éƒ¨è¿›è¡Œæ„ŸçŸ¥ï¼ˆå±€éƒ¨è¿žæŽ¥ï¼‰ï¼Œå†ç”±æ›´é«˜å±‚çš„ç¥žç»å…ƒè¿›è¡Œç»¼åˆå³å¯ã€‚ å¦‚ä¸Šå›¾ï¼Œç¬¬äºŒå±‚éšè—å±‚ä¸­çš„ç¥žç»å…ƒåªå°†éƒ¨åˆ†å€¼å½“åšè¾“å…¥ï¼Œæœ€åŽç”±ç¬¬ä¸‰å±‚éšè—å±‚è¿›è¡Œå…¨è¿žæŽ¥ã€‚ å›žåˆ°ä¹‹å‰çš„å‡è®¾ï¼Œå‡å¦‚è¾“å…¥ä¾æ—§æ˜¯1000X1000çš„ç°åº¦å›¾ç‰‡ï¼Œç¬¬äºŒå±‚éšè—å±‚ä¾æ—§æœ‰$10^6$ä¸ªç¥žç»å…ƒã€‚ä½†æ­¤æ—¶åˆ©ç”¨å±€éƒ¨è¿žæŽ¥ï¼Œç¬¬äºŒå±‚çš„ç¥žç»å…ƒæ¯ä¸ªå€¼å¯¹åº”è¾“å…¥ä¸­10X10çš„å›¾åƒèŒƒå›´ï¼Œé‚£ä¹ˆæ¯ä¸ªç¥žç»å…ƒåªéœ€è¦100ä¸ªæƒå€¼ã€‚æ­¤æ—¶æƒå€¼æ€»æ•°å°±æ˜¯$10^8$ä¸ªï¼Œè¿œå°äºŽ$10^{12}$ä¸ªã€‚ 2.2. å‚æ•°å…±äº« Shared Weights$10^8$ä¸ªæƒå€¼å‚æ•°è™½ç„¶å¯¹æ¯”$10^{12}$å·²ç»æ˜¯ç›¸å½“å¤§çš„è¿›æ­¥ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥è¿›ä¸€æ­¥ç¼©å°å®ƒï¼Œè§£å†³çš„æ–¹æ¡ˆå°±æ˜¯å‚æ•°å…±äº«ã€‚ ç¬¬äºŒå±‚çš„$10^6$ä¸ªç¥žç»å…ƒå‡é‡‡ç”¨ä¸åŒçš„å‚æ•°ï¼Œè®¾æƒ³ä¸€ä¸‹ï¼ŒåŠ å…¥å®ƒä»¬éƒ½é‡‡ç”¨ä¸€æ ·çš„100ä¸ªæƒå€¼å‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°çš„æ€»æ•°å°±åªå‰©ä¸‹äº†100ã€‚ æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£æƒå€¼å…±äº«ï¼Œè¿™100ä¸ªå‚æ•°å…¶å®žæ˜¯é€šè¿‡å·ç§¯æå–å›¾ç‰‡çš„ç‰¹å¾çš„æ–¹å¼ã€‚åœ¨æ²¡æœ‰æƒå€¼å…±äº«ä¹‹å‰ï¼Œæ¯ä¸ªç¥žç»å…ƒæå–ç‰¹å¾çš„æ–¹å¼éƒ½æ˜¯ä¸åŒçš„ï¼ˆå› ä¸ºå®ƒä»¬çš„æƒå€¼å‚æ•°ä¸åŒï¼‰ã€‚è€ŒçŽ°åœ¨æ‰€æœ‰ç¥žç»å…ƒå…±äº«è¿™100ä¸ªå‚æ•°ï¼Œé‚£æ‰€æœ‰çš„ç¥žç»å…ƒå°±ä¼šä»¥ç›¸åŒçš„æ–¹å¼æå–å›¾ç‰‡ç‰¹å¾ã€‚åˆå› ä¸ºä¸Šè¿°å±€éƒ¨è¿žæŽ¥çš„å­˜åœ¨ï¼Œæ¯ä¸ªç¥žç»å…ƒæå–ç‰¹å¾çš„ä½ç½®æ˜¯ä¸ä¸€æ ·çš„ã€‚æœ€ç»ˆå¯¼è‡´çš„ç»“æžœæ˜¯ï¼Œæ¯ä¸ªç¥žç»å…ƒåœ¨å„è‡ªçš„å±€éƒ¨ï¼Œç”¨ç›¸åŒçš„æ–¹å¼æå–ç‰¹å¾ã€‚ è¿™100ä¸ªå‚æ•°å®žé™…ä¸Šæ˜¯10X10çš„çŸ©é˜µï¼Œæˆ‘ä»¬å°†è¿™ä¸ªçŸ©é˜µæˆä¸ºå·ç§¯æ ¸(Kernel)ï¼Œå·ç§¯(Convolution)çš„è¿‡ç¨‹å°±æ˜¯è¿™ä¸ªå·ç§¯æ ¸åœ¨å›¾ç‰‡ä¸Šæ¸¸èµ°ï¼Œå°†è¦†ç›–èŒƒå›´å†…çš„æ‰€æœ‰è¾“å…¥å€¼ä¸Žå·ç§¯æ ¸å¯¹åº”ä½ç½®çš„æƒå€¼ç›¸ä¹˜ç´¯åŠ ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æå–å‡ºç‰¹å¾å›¾(Feature Map)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ 2.2.1. å¯¹ç°åº¦å›¾åƒå·ç§¯å¯¹äºŽä¸€ä¸ªå›¾åƒï¼Œæ¯ä¸ªåƒç´ ç‚¹ç”±RGBä¸‰ä¸ªå€¼æè¿°ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå›¾åƒæ˜¯ä¸€ä¸ªä¸‰ç»´çŸ©é˜µã€‚æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªç»´åº¦åˆ†åˆ«ç§°ä¸ºé•¿ã€å®½å’Œé€šé“ã€‚ å¯¹äºŽä¸€ä¸ªå·ç§¯æ ¸ï¼Œä¹Ÿæœ‰ä¸‰ä¸ªç»´åº¦ï¼Œåˆ†åˆ«ä¸ºé•¿ã€å®½å’Œæ·±åº¦ã€‚ ä¸€æ¬¡å·ç§¯æ“ä½œæœ‰å¤šä¸ªå‚æ•°éœ€è¦è€ƒè™‘ï¼š Sizeï¼šæ¯ä¸ªå·ç§¯æ ¸çš„å¤§å° Width*Height*Depthã€‚ Strideï¼šå·ç§¯æ ¸æ¯æ¬¡ç§»åŠ¨çš„æ­¥é•¿ã€‚ Paddingï¼šå·ç§¯æ ¸åœ¨é‡åˆ°è¾¹ç¼˜æ—¶è¡¥0çš„å®½åº¦ã€‚ çŽ°åœ¨æˆ‘ä»¬è€ƒè™‘æ¯”è¾ƒç®€å•çš„æƒ…å†µï¼Œç°åº¦å›¾åƒçš„ç‰¹ç‚¹æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªé€šé“ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šè¿°è¦æ±‚ï¼Œå·ç§¯æ ¸çš„æ·±åº¦åªéœ€è¦ä¸º1å°±è¡Œäº†ã€‚ ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªSizeä¸º3X3X1çš„å·ç§¯æ ¸åœ¨Strideä¸º2ã€Paddingä¸º1æƒ…å†µä¸‹ï¼Œå¯¹ä¸€ä¸ª5X5X1ç°åº¦å›¾åƒçš„å·ç§¯æ“ä½œï¼š 2.2.2. å¯¹å¤šé€šé“å›¾åƒå·ç§¯å¯¹äºŽå¤šä¸ªé€šé“çš„å›¾åƒï¼Œåˆ™è¦æ±‚å·ç§¯æ ¸çš„æ·±åº¦å¿…é¡»ä¸Žè¾“å…¥å›¾åƒçš„é€šé“æ•°ä¸€è‡´ã€‚å¯¹äºŽRGBä¸‰é€šé“å›¾åƒï¼Œåˆ™è¦æ±‚å·ç§¯æ ¸çš„æ·±åº¦å¿…é¡»ä¸º3ã€‚ ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªSizeä¸º3X3X3çš„å·ç§¯æ ¸åœ¨Strideä¸º2ã€Paddingä¸º0çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸€ä¸ª9X9X3çš„RGBå›¾åƒçš„å·ç§¯æ“ä½œï¼š 2.2.3. è®¡ç®—ç‰¹å¾å›¾çš„å¤§å°ç”±äºŽå·ç§¯æ ¸çš„æ·±åº¦æ€»æ˜¯ä¸Žè¾“å…¥å›¾åƒçš„é€šé“æ•°ä¸€è‡´ï¼Œæ‰€ä»¥è¾“å‡ºçš„ç‰¹å¾å›¾æ€»æ˜¯ä¸€ä¸ªäºŒç»´çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—å‡ºç‰¹å¾å›¾çš„å¤§å°ï¼š $$W_{new}=\frac{W_{old}+Padding*2-W_{kernel}}{stride}+1$$ è¿™é‡ŒWä»£è¡¨Widthï¼ŒåŒç†å¯ä»¥è®¡ç®—å‡ºHeightã€‚ 2.3. å¤šæ ¸å·ç§¯æˆ‘ä»¬çŸ¥é“ï¼Œä¸€æ¬¡å·ç§¯æ“ä½œç”Ÿæˆçš„ç‰¹å¾å›¾ï¼Œæ˜¯åˆ©ç”¨ä¸€ä¸ªå·ç§¯æ ¸æå–å‡ºæ¥çš„ä¸€ç§ç‰¹å¾ã€‚ä¸ºäº†èƒ½å¤Ÿå¢žåŠ ç‰¹å¾çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªå·ç§¯æ ¸Sizeã€Strideã€Paddingå®Œå…¨ç›¸åŒï¼Œä½†å‚æ•°ä¸åŒçš„å·ç§¯æ ¸å¯¹è¾“å…¥å›¾åƒè¿›è¡Œå·ç§¯ã€‚ ä¸‹å›¾å±•ç¤ºäº†æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªå·ç§¯æ ¸çš„å·æœºæ“ä½œï¼š å¯ä»¥å‘çŽ°ï¼Œè¾“å‡ºçš„ç‰¹å¾å›¾çš„é€šé“æ•°ï¼Œä¸Žè¾“å…¥å›¾åƒçš„é€šé“æ•°æ— å…³ï¼Œè€Œæ˜¯ä¸Žå·ç§¯æ ¸çš„æ•°é‡æœ‰å…³ã€‚ä½¿ç”¨çš„å·ç§¯æ ¸çš„æ•°é‡è¶Šå¤šï¼Œæˆ‘ä»¬æå–çš„ç‰¹å¾æ•°é‡å°±è¶Šå¤šï¼Œç‰¹å¾å›¾çš„é€šé“æ•°ä¹Ÿè¶Šå¤šã€‚ 2.4. å¤šå±‚å·ç§¯å›¾åƒæ˜¯ä»¥åƒç´ ç‚¹ä¸ºå•ä½ä½œä¸ºè¾“å…¥çš„ï¼Œéšè—å±‚å¯¹è¾“å…¥å·ç§¯ï¼Œæå–å‡ºå±€éƒ¨ç‰¹å¾ï¼ˆæ¯”å¦‚è¾¹ç¼˜ï¼‰ã€‚æŽ¥ä¸‹æ¥çš„ä¸‹ä¸€ä¸ªéšè—å±‚åˆä»¥ä¹‹å‰éšè—å±‚çš„è¾“å‡ºä½œä¸ºè¾“å…¥è¿›è¡Œå·ç§¯ï¼Œæå–å‡ºæŠ½è±¡ç­‰çº§æ›´é«˜çš„ç‰¹å¾ï¼ˆæ¯”å¦‚è½®å»“ï¼‰ã€‚æœ€åŽä¸æ–­åœ°å¢žåŠ éšè—å±‚çš„æ•°é‡ï¼Œä¸æ–­æå–æŠ½è±¡ç­‰çº§æ›´é«˜çš„ç‰¹å¾ã€‚æœ€åŽè¿›è¡Œå…¨è¿žæŽ¥ï¼Œä½¿å¾—å­¦ä¹ çš„ç‰¹å¾å…·æœ‰å…¨å±€åŒ–çš„ç‰¹æ€§ã€‚ 2.5. è¿‡æ‹Ÿåˆ Overfittingä¸€èˆ¬ä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒï¼Œæœ€åŽè®­ç»ƒå‡ºæ¥çš„æ¨¡åž‹è¢«æœŸæœ›åœ¨ç”¨äºŽé¢„æµ‹æ—¶ä¹Ÿæ‹¥æœ‰è‰¯å¥½çš„è¡¨çŽ°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ³›åŒ–æ€§ã€‚ ç„¶è€Œå¦‚æžœä¸€ä¸ªæ¨¡åž‹å¼€å§‹å­¦ä¹ è®­ç»ƒé›†æ•°æ®ä¸­çš„ç‰¹åŒ–æ€§è´¨æˆ–è€…éšå³ç‰¹å¾ï¼Œåœ¨é¢„æµ‹æ—¶å¯¹äºŽæœªçŸ¥æ•°æ®çš„è¡¨çŽ°å°±ä¼šå˜å·®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè¿‡æ‹Ÿåˆã€‚ ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯ï¼Œå¦‚æžœä¸€ä¸ªç¥žç»ç½‘ç»œè¢«è®­ç»ƒç”¨äºŽåˆ†è¾¨å‡ºæ‰€æœ‰çš„è½¿è½¦ã€‚æ³›åŒ–æ€§è‰¯å¥½çš„æƒ…å†µä¸‹ï¼Œæ¨¡åž‹åªå­¦ä¹ äº†è½¿è½¦çš„é€šç”¨ç‰¹å¾ï¼Œæ¯”å¦‚æ‹¥æœ‰å››ä¸ªè½®å­ã€è½¦å¤§ç¯ã€åŽå¤‡ç®±ç­‰ã€‚ä½†å¦‚æžœæˆ‘ä»¬çš„è®­ç»ƒé›†ä¸­æ‰€æœ‰çš„è½¿è½¦éƒ½æ˜¯ç™½è‰²çš„ï¼Œæ¨¡åž‹è¿‡åº¦å­¦ä¹ è®¤ä¸ºåªæœ‰ç™½è‰²çš„æ‰æ˜¯è½¿è½¦ï¼Œè¿™å°±æ˜¯è¿‡æ‹ŸåˆçŽ°è±¡ã€‚ 2.5.1. æ± åŒ– Pollingé€šè¿‡å·ç§¯èŽ·å¾—ç‰¹å¾ä¹‹åŽï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨è¿™äº›ç‰¹å¾åŽ»åˆ†ç±»ã€‚ç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æå–åˆ°çš„æ‰€æœ‰ç‰¹å¾åŽ»åˆ†ç±»ï¼Œä½†è¿™æ ·ä¼šé¢ä¸´æžå…¶å¤§çš„æ•°æ®é‡ã€‚ ä¾‹å¦‚å¯¹äºŽä¸€ä¸ª96X96X1çš„è¾“å…¥å›¾åƒï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€400ä¸ª8X8çš„å·ç§¯æ ¸è¿›è¡Œå·ç§¯ï¼ˆStrideä¸º1ã€Paddingä¸º0ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ª89X89X400çš„ç‰¹å¾å›¾ã€‚è¿™ä¸ªç‰¹å¾å›¾ä¸­æ‹¥æœ‰è¶…è¿‡ä¸‰ç™¾ä¸‡ä¸ªæ•°æ®ï¼Œå¦‚æ­¤åºžå¤§çš„æ•°æ®é‡éš¾ä»¥å­¦ä¹ ï¼Œä¸”å®¹æ˜“å‡ºçŽ°è¿‡æ‹Ÿåˆçš„çŽ°è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ± åŒ–æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æ‰€è°“æ± åŒ–ï¼Œå°±æ˜¯å°è¯•ä½¿ç”¨ä¸€ä¸ªæ›´å°çš„ç‰¹å¾å›¾åŽ»æè¿°ä¸€ä¸ªå·¨å¤§çš„ç‰¹å¾å›¾ã€‚å°±åƒæˆ‘ä»¬äººç±»è§‚å¯Ÿä¸€ä¸ªå·¨å¤§çš„å›¾ç‰‡æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šæ³¨æ„å›¾ç‰‡ä¸­çš„æ¯ä¸ªç»†èŠ‚ï¼Œè€Œæ˜¯åœ¨æ¯ä¸ªåŒºåŸŸé€‰å‡ºæœ‰ä»£è¡¨æ€§ç‰¹å¾ï¼Œç„¶åŽç»„åˆè¿™äº›ç‰¹å¾å½¢æˆä¸€ä¸ªæ›´å°æ›´åˆ©äºŽç†è§£çš„ç‰¹å¾å›¾ã€‚ä½¿ç”¨æ± åŒ–å¯ä»¥å¤§å¤§é™ä½Žç‰¹å¾å›¾çš„å¤§å°ï¼Œå¹¶ä¸”å‡å°‘è¿‡æ‹ŸåˆçŽ°è±¡ã€‚ ä¸Šå›¾æè¿°äº†ä¸€ä¸ªå…¸åž‹çš„æ± åŒ–æ“ä½œï¼Œå°†è¿™ä¸ªç‰¹å¾å›¾åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†å–å‡ºä¸€ä¸ªä»£è¡¨æ€§ç‰¹å¾ï¼Œå¹¶æœ€ç»ˆå½¢æˆä¸€ä¸ª4X4çš„æ± åŒ–ç‰¹å¾å›¾ã€‚ å’Œå·ç§¯ä¸€æ ·ï¼Œæ± åŒ–ä¹Ÿæœ‰å‡ ä¸ªéœ€è¦è€ƒè™‘å‚æ•°ï¼š Sizeï¼šæ¯æ¬¡æ± åŒ–çš„èŒƒå›´ Strideï¼šæ± åŒ–èŒƒå›´åœ¨ç‰¹å¾å›¾ç§»åŠ¨çš„è·ç¦» ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå…¸åž‹çš„Size=Strideçš„æ± åŒ–ã€‚ æ± åŒ–æ–¹æ³• å¹³å‡æ± åŒ–ï¼šSize=Strideï¼Œå–æ± åŒ–èŒƒå›´ä¸­æ‰€æœ‰çš„å€¼çš„å‡å€¼ä½œä¸ºç‰¹å¾ æœ€å¤§æ± åŒ–ï¼šSize=Strideï¼Œå–æ± åŒ–èŒƒå›´ä¸­çš„æœ€å¤§å€¼ä½œä¸ºç‰¹å¾ é‡å æ± åŒ–ï¼šStride&lt;Sizeï¼Œæ­¤æ—¶æ± åŒ–èŒƒå›´ä¼šæœ‰é‡å ï¼ŒåŒ…å«é‡å å¹³å‡æ± åŒ–å’Œé‡å æœ€å¤§æ± åŒ–ã€‚ 2.5.2. å¤±æ´» Dropoutä¸€ä¸ªé™ä½Žé¢„æµ‹è¯¯å·®çš„æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬è®­ç»ƒå¤šä¸ªä¸åŒçš„æ¨¡åž‹ï¼Œå¹¶ä¸”å°†è¿™äº›æ¨¡åž‹çš„é¢„æµ‹ç»“æžœç»“åˆèµ·æ¥ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒ³æ³•ï¼Œä½†æ˜¯ä»£ä»·ä¹Ÿç›¸å½“çš„å¤§ã€‚è®­ç»ƒä¸€ä¸ªæ¨¡åž‹å·²ç»éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè®­ç»ƒå¤šä¸ªæ¨¡åž‹çš„æˆæœ¬å°†æˆå€å¢žåŠ ï¼Œä½†æ˜¯æ”¶ç›Šå´å¹¶æ²¡æœ‰é‚£ä¹ˆæ˜¾è‘—ã€‚å› æ­¤ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹æ¡ˆè¢«æå‡ºâ€”â€”â€”â€”å¤±æ´»ã€‚ å¤±æ´»è¿™ä¸ªæœºåˆ¶åœ¨ç¥žç»ç½‘ç»œä¸­ä½œç”¨çš„æ–¹å¼æ˜¯ï¼Œå¯¹äºŽæ¯æ¬¡è¾“å…¥ï¼Œéšè—å±‚ä¸­çš„æ¯ä¸ªç¥žç»å…ƒçš„è¾“å‡ºéƒ½æœ‰ä¸€å®šçš„æ¦‚çŽ‡ï¼ˆä¾‹å¦‚0.5ï¼‰è¢«è®¾ä¸º0ï¼Œè¿™äº›å¤±æ´»çš„ç¥žç»å…ƒä¸å†å‚ä¸Žå‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ã€‚å› æ­¤ï¼Œæ¯æ¬¡è¾“å…¥ï¼Œç¥žç»ç½‘ç»œéƒ½ä¼šä»¥ä¸€ç§ä¸åŒçš„ç»“æž„ï¼Œè¿™å¼ºè¿«ç¥žç»å…ƒå­¦ä¹ æ›´åŠ é²æ£’çš„ç‰¹å¾ï¼Œå‡å°‘ç›¸äº’ä¹‹é—´çš„ä¾èµ–ï¼Œä»¥é€‚åº”éšæœºçš„å¤±æ´»æœºåˆ¶ã€‚ åœ¨å®žè·µä¸­ï¼Œå¤±æ´»æœºåˆ¶å¤§å¤§å‡å°‘äº†è¿‡æ‹Ÿåˆçš„çŽ°è±¡ï¼Œä»£ä»·åˆ™æ˜¯ä½¿å¾—æ”¶æ•›çš„æ—¶é—´ç¿»äº†ä¸€å€ã€‚ 2.6. å±€éƒ¨å“åº”å½’ä¸€åŒ– Local Response Normalizationå±€éƒ¨å“åº”å½’ä¸€åŒ–åŽŸç†æ˜¯ä»¿é€ ç”Ÿç‰©å­¦ä¸Šæ´»è·ƒçš„ç¥žç»ç»†èƒžå¯¹ç›¸é‚»ç¥žç»ç»†èƒžçš„æŠ‘åˆ¶çŽ°è±¡ï¼ˆä¾§æŠ‘åˆ¶ï¼‰ã€‚å®ƒå°†ç¥žç»ç½‘ç»œä¸­å“åº”è¾ƒå¼ºçš„ç‰¹å¾åˆ°å¢žå¼ºï¼Œè€Œå“åº”è¾ƒå¼±çš„ç‰¹å¾è¢«æŠ‘åˆ¶ï¼Œä»Žè€ŒåŠ å¿«æ”¶æ•›é€Ÿåº¦ã€‚ å…¶å…¬å¼å¦‚ä¸‹ï¼š $$b_{x,y}^i=a_{x,y}^i/\left(k+\alpha\sum_{j=max(0,i-n/2)}^{min(N-1,i+n/2)}(a_{x,y}^j)^2\right)^\beta$$ å…¶ä¸­$a_{x,y}^i$è¡¨ç¤ºåœ¨ié€šé“ä¸­çš„ï¼Œxã€yä½ç½®ä¸Šçš„ç‚¹çš„å€¼ï¼Œkã€$\alpha$ã€$\beta$ã€néƒ½æ˜¯è‡ªå®šä¹‰çš„å€¼ã€‚ ä»Žä¸Šå›¾æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œå®žé™…ä¸Šæ˜¯ä»¥$a_{x,y}^i$ä¸ºä¸­å¿ƒï¼Œæ²¿ç€é€šé“çš„è½´çš„æ–¹å‘å–nä¸ªå€¼ç´¯åŠ å€¼ä½œä¸ºåˆ†æ¯ï¼Œè‹¥è¯¥ç‚¹çš„å€¼è¶Šå¤§ï¼Œåˆ™è¢«åŠ å¼ºçš„è¶Šå¤šï¼›è‹¥è¶Šå°ï¼Œåˆ™è¢«æŠ‘åˆ¶çš„è¶Šå¤šã€‚ 2.7. SoftMaxå®ƒèƒ½å°†ä¸€ä¸ªå«ä»»æ„å®žæ•°çš„Kç»´çš„å‘é‡$z$çš„â€œåŽ‹ç¼©â€åˆ°å¦ä¸€ä¸ªKç»´å®žå‘é‡$\sigma(z)ä¸­ï¼Œä½¿å¾—æ¯ä¸€ä¸ªå…ƒç´ çš„èŒƒå›´éƒ½åœ¨(0,1)ä¹‹é—´ï¼Œå¹¶ä¸”æ‰€æœ‰å…ƒç´ çš„å’Œä¸º1ã€‚è¯¥å‡½æ•°çš„å½¢å¼é€šå¸¸æŒ‰ä¸‹é¢çš„å¼å­ç»™å‡ºï¼š $$\sigma(z)_j=\frac{e^{z_j}}{\sum_{k=1}^Ke^{z_k}}$$ å‡è®¾ç¥žç»ç½‘ç»œæœ€åŽçš„å…¨è¿žæŽ¥è¾“å‡ºçš„å‘é‡ä¸º1000ç»´ï¼Œé‚£ä¹ˆå°†è¿™1000ç»´çš„å‘é‡è¾“å…¥SoftMaxå‡½æ•°ä¸­ï¼Œå°†ä¼šè¾“å‡º1000ç»´çš„æ¦‚çŽ‡å‘é‡ã€‚è¿™ä¸ªå‘é‡ä¸­çš„æ¯ä¸€ä¸ªå€¼æè¿°äº†è¿™ä¸ªè¾“å…¥å±žäºŽ1000ä¸ªåˆ†ç±»ä¸­æ¯ä¸ªåˆ†ç±»çš„æ¦‚çŽ‡ã€‚ 3. å‚è€ƒå›¾ç‰‡æ¥è‡ªGoogle Image Krizhevsky A, Sutskever I, Hinton G E. ImageNet Classification with Deep Convolutional Neural Networks ç»´åŸºç™¾ç§‘. å‰é¦ˆç¥žç»ç½‘ç»œ ç»´åŸºç™¾ç§‘. æ„ŸçŸ¥å™¨ UFLDLæ•™ç¨‹ ç»´åŸºç™¾ç§‘. é“¾å¼æ³•åˆ™ ç»´åŸºç™¾ç§‘. åå‘ä¼ æ’­ç®—æ³• Charlotte77. ä¸€æ–‡å¼„æ‡‚ç¥žç»ç½‘ç»œä¸­çš„åå‘ä¼ æ’­æ³•â€”â€”BackPropagation ç»´åŸºç™¾ç§‘. çº¿æ€§æ•´æµå‡½æ•° ç»´åŸºç™¾ç§‘. è¿‡æ‹Ÿåˆ]]></content>
      <categories>
        <category>Homework</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ ‘èŽ“æ´¾ç³»ç»Ÿå®‰è£…ä¸Žé…ç½®]]></title>
    <url>%2Fposts%2F159d%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡æ¶‰åŠåˆ°æ ‘èŽ“æ´¾ç³»ç»Ÿå®‰è£…ï¼ŒSSHç™»å½•ï¼Œé•œåƒåŠ é€Ÿé…ç½®ï¼Œæ— çº¿ç½‘å¡é…ç½®ï¼ŒæŒ‚è½½NTFSç¡¬ç›˜ã€‚ ä¸€ã€å†™å…¥ç³»ç»Ÿç”±äºŽæ²¡æœ‰å¤šä½™çš„æ˜¾ç¤ºå±å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥åªèƒ½ç›²è£…ç³»ç»Ÿã€‚ç³»ç»Ÿå¯ä»¥ä»Žè¿™é‡Œä¸‹è½½ï¼Œç”±äºŽæ²¡æœ‰æ˜¾ç¤ºå™¨ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†ä»¥ä¸‹ç‰ˆæœ¬ Windowsä¸‹çƒ§å½•ç³»ç»Ÿè¿˜éœ€è¦win32diskimageræ’ä¸ŠSDå¡ï¼Œåœ¨Win32DiskImagerä¸­é€‰æ‹©ä¸‹è½½çš„ç³»ç»Ÿé•œåƒå’Œè®¾å¤‡ï¼Œå†™å…¥ã€‚ å†™å…¥æˆåŠŸåŽï¼Œåœ¨ç›˜ç¬¦ä¸ºbootçš„Uç›˜æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºsshçš„ç©ºæ–‡ä»¶ã€‚è¿™æ˜¯å› ä¸ºæ–°ç‰ˆæœ¬çš„Raspbiané»˜è®¤ä¸å¼€å¯sshï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼è®©å…¶æ‰“å¼€sshåŠŸèƒ½ã€‚ å°†SDå¡æ’å…¥æ ‘èŽ“æ´¾ï¼Œè¿žä¸Šç½‘çº¿å’Œç”µæºã€‚ äºŒã€SSHç™»å½•æ ‘èŽ“æ´¾é¦–å…ˆéœ€è¦èŽ·å–æ ‘èŽ“æ´¾åœ¨å†…ç½‘çš„åœ°å€ï¼Œè¿™é‡Œé€šè¿‡è·¯ç”±å™¨æ¥æŸ¥çœ‹ã€‚ ä½¿ç”¨SSHç™»å½•æ ‘èŽ“æ´¾ï¼Œè´¦æˆ·piï¼Œå¯†ç raspberry1ssh pi@192.168.0.103 ä¸‰ã€é…ç½®é•œåƒåŠ é€Ÿå›½å¤–çš„apt-getæºå®žåœ¨æ˜¯å¤ªæ…¢äº†ï¼Œè¿™æ›¿æ¢æˆæ¸…åŽå¤§å­¦Raspbiané•œåƒ1sudo nano /etc/apt/sources.list å°†/etc/apt/sources.listçš„å†…å®¹æ›¿æ¢ä¸º12deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ jessie main non-free contribdeb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ jessie main non-free contrib ç„¶åŽè¿è¡Œsudo apt-get update å››ã€é…ç½®æ— çº¿ç½‘å¡1ifconfig wlan0 å¯ä»¥çœ‹åˆ°æ ‘èŽ“æ´¾å·²ç»æˆåŠŸæŒ‚è½½æ— çº¿ç½‘å¡ ä¿®æ”¹é…ç½®/etc/network/interfaces12345678910111213source-directory /etc/network/interfaces.dauto lo wlan0 wlan1iface lo inet loopbackiface eth0 inet dhcpallow-hotplug wlan0 wlan1iface wlan0 inet dhcpwpa-conf /etc/wpa_supplicant/wpa_supplicant.confiface wlan1 inet manual ä¿®æ”¹é…ç½®/etc/wpa_supplicant/wpa_supplicant.confæ³¨æ„ priority é«˜çš„wifiå°†è¢«ä¼˜å…ˆè¿žæŽ¥123456789101112131415country=GBctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123; ssid=&quot;WIFIå1&quot; psk=&quot;WIFIå¯†ç 1&quot; priority=2&#125;network=&#123; ssid=&quot;WIFIå2&quot; psk=&quot;WIFIå¯†ç 2&quot; priority=1&#125; è¿è¡Œå‘½ä»¤sudo ifup wlan0 çº¢è‰²éƒ¨åˆ†åˆ™ä¸ºwifié“¾æŽ¥çš„ip äº”ã€æŒ‚è½½ç¡¬ç›˜ç”±äºŽæˆ‘çš„ç§»åŠ¨ç¡¬ç›˜æ˜¯NTFSæ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦ä¸‹è½½å¯¹åº”çš„é©±åŠ¨1sudo apt-get install ntfs-3g å°†ç§»åŠ¨ç¡¬ç›˜è¿žæŽ¥åˆ°æ ‘èŽ“æ´¾ï¼Œä½¿ç”¨sudo fdisk -læŸ¥çœ‹ç£ç›˜çŠ¶å†µ åœ¨/dev/sda1å‘çŽ°ç§»åŠ¨ç¡¬ç›˜ï¼Œè¿™é‡Œsda1å–å†³äºŽä½ çš„æƒ…å†µï¼Œaè¡¨ç¤ºç¬¬ä¸€ä¸ªç¡¬ç›˜ï¼Œ1è¡¨ç¤ºç¬¬ä¸€ä¸ªåˆ†åŒº åˆ›å»ºæ–‡ä»¶å¤¹å¹¶æŒ‚è½½ç£ç›˜12sudo mkdir /mnt/usbsudo mount -o uid=pi,gid=pi /dev/sda1 /mnt/usb å¸è½½ç£ç›˜æ–¹æ³•1sudo umount /mnt/usb]]></content>
      <categories>
        <category>Tutorial</category>
      </categories>
  </entry>
</search>
